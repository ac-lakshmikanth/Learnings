!function(){!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("ractive",factory):global.Ractive=factory()}(this,function(){"use strict";function getElement(input){var output;if(input&&"boolean"!=typeof input){if("undefined"==typeof window||!document||!input)return null;if(input.nodeType)return input;if("string"==typeof input){output=document.getElementById(input);!output&&document.querySelector&&(output=document.querySelector(input));if(output&&output.nodeType)return output}return input[0]&&input[0].nodeType?input[0]:null}}function detachNode(node){node&&"unknown"!=typeof node.parentNode&&node.parentNode&&node.parentNode.removeChild(node);return node}function safeToStringValue(value){return null!=value&&value.toString?value:""}function utils_object__extend(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)sources[_key-1]=arguments[_key];for(var prop,source;source=sources.shift();)for(prop in source)hasOwn.call(source,prop)&&(target[prop]=source[prop]);return target}function fillGaps(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)sources[_key-1]=arguments[_key];sources.forEach(function(s){for(var key in s)!s.hasOwnProperty(key)||key in target||(target[key]=s[key])});return target}function isArray(thing){return"[object Array]"===is__toString.call(thing)}function isArrayLike(obj){return arrayLikePattern.test(is__toString.call(obj))}function isEqual(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function is__isNumeric(thing){return!isNaN(parseFloat(thing))&&isFinite(thing)}function isObject(thing){return thing&&"[object Object]"===is__toString.call(thing)}function format(message,args){return message.replace(/%s/g,function(){return args.shift()})}function fatal(message){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];message=format(message,args);throw new Error(message)}function logIfDebug(){_Ractive.DEBUG&&log.apply(null,arguments)}function warn(message){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];message=format(message,args);printWarning(message,args)}function warnOnce(message){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];message=format(message,args);if(!alreadyWarned[message]){alreadyWarned[message]=!0;printWarning(message,args)}}function warnIfDebug(){_Ractive.DEBUG&&warn.apply(null,arguments)}function warnOnceIfDebug(){_Ractive.DEBUG&&warnOnce.apply(null,arguments)}function findInViewHierarchy(registryName,ractive,name){var instance=findInstance(registryName,ractive,name);return instance?instance[registryName][name]:null}function findInstance(registryName,ractive,name){for(;ractive;){if(name in ractive[registryName])return ractive;if(ractive.isolated)return null;ractive=ractive.parent}}function snap(to){return function(){return to}}function getPotentialWildcardMatches(keypath){var keys,starMap,mapper,i,result,wildcardKeypath;keys=keypath.split(".");(starMap=starMaps[keys.length])||(starMap=getStarMap(keys.length));result=[];mapper=function(star,i){return star?"*":keys[i]};i=starMap.length;for(;i--;){wildcardKeypath=starMap[i].map(mapper).join(".");if(!result.hasOwnProperty(wildcardKeypath)){result.push(wildcardKeypath);result[wildcardKeypath]=!0}}return result}function getStarMap(num){var max,binary,starMap,mapper,i,j,l,map,ones="";if(!starMaps[num]){starMap=[];for(;ones.length<num;)ones+=1;max=parseInt(ones,2);mapper=function(digit){return"1"===digit};for(i=0;max>=i;i+=1){binary=i.toString(2);for(;binary.length<num;)binary="0"+binary;map=[];l=binary.length;for(j=0;l>j;j++)map.push(mapper(binary[j]));starMap[i]=map}starMaps[num]=starMap}return starMaps[num]}function assignNewKeypath(target,property,oldKeypath,newKeypath){var existingKeypath=target[property];if(!existingKeypath||!existingKeypath.equalsOrStartsWith(newKeypath)&&existingKeypath.equalsOrStartsWith(oldKeypath)){target[property]=existingKeypath?existingKeypath.replace(oldKeypath,newKeypath):newKeypath;return!0}}function decodeKeypath(keypath){var value=keypath.slice(2);return"i"===keypath[1]&&is__isNumeric(value)?+value:value}function getKeypath(str){if(null==str)return str;keypathCache.hasOwnProperty(str)||(keypathCache[str]=new Keypath(str));return keypathCache[str]}function getMatchingKeypaths(ractive,keypath){function expand(matchingKeypaths,keypath){var wrapper,value,keys;if(keypath.isRoot)keys=[].concat(Object.keys(ractive.viewmodel.data),Object.keys(ractive.viewmodel.mappings),Object.keys(ractive.viewmodel.computations));else{wrapper=ractive.viewmodel.wrapped[keypath.str];value=wrapper?wrapper.get():ractive.viewmodel.get(keypath);keys=value?Object.keys(value):null}keys&&keys.forEach(function(key){"_ractive"===key&&isArray(value)||matchingKeypaths.push(keypath.join(key))});return matchingKeypaths}var keys,key,matchingKeypaths;keys=keypath.str.split(".");matchingKeypaths=[rootKeypath];for(;key=keys.shift();)"*"===key?matchingKeypaths=matchingKeypaths.reduce(expand,[]):matchingKeypaths[0]===rootKeypath?matchingKeypaths[0]=getKeypath(key):matchingKeypaths=matchingKeypaths.map(concatenate(key));return matchingKeypaths}function concatenate(key){return function(keypath){return keypath.join(key)}}function normalise(ref){return ref?ref.replace(refPattern,".$1"):""}function add(root,keypath,d){if("string"!=typeof keypath||!is__isNumeric(d))throw new Error("Bad arguments");var value=void 0,changes=void 0;if(/\*/.test(keypath)){changes={};getMatchingKeypaths(root,getKeypath(normalise(keypath))).forEach(function(keypath){var value=root.viewmodel.get(keypath);if(!is__isNumeric(value))throw new Error(shared_add__errorMessage);changes[keypath.str]=value+d});return root.set(changes)}value=root.get(keypath);if(!is__isNumeric(value))throw new Error(shared_add__errorMessage);return root.set(keypath,+value+d)}function Ractive$add(keypath,d){return shared_add(this,keypath,void 0===d?1:+d)}function Hook(event){this.event=event;this.method="on"+event;this.deprecate=deprecations[event]}function addToArray(array,value){var index=array.indexOf(value);-1===index&&array.push(value)}function arrayContains(array,value){for(var i=0,c=array.length;c>i;i++)if(array[i]==value)return!0;return!1}function arrayContentsMatch(a,b){var i;if(!isArray(a)||!isArray(b))return!1;if(a.length!==b.length)return!1;i=a.length;for(;i--;)if(a[i]!==b[i])return!1;return!0}function ensureArray(x){return"string"==typeof x?[x]:void 0===x?[]:x}function lastItem(array){return array[array.length-1]}function removeFromArray(array,member){var index=array.indexOf(member);-1!==index&&array.splice(index,1)}function toArray(arrayLike){for(var array=[],i=arrayLike.length;i--;)array[i]=arrayLike[i];return array}function wait(callback){setTimeout(callback,0)}function makeDispatcher(handlers,result){return function(){for(var handler;handler=handlers.shift();)handler(result)}}function utils_Promise__resolve(promise,x,fulfil,reject){var then;if(x===promise)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(x instanceof _Promise)x.then(fulfil,reject);else if(!x||"object"!=typeof x&&"function"!=typeof x)fulfil(x);else{try{then=x.then}catch(e){reject(e);return}if("function"==typeof then){var called,resolvePromise,rejectPromise;resolvePromise=function(y){if(!called){called=!0;utils_Promise__resolve(promise,y,fulfil,reject)}};rejectPromise=function(r){if(!called){called=!0;reject(r)}};try{then.call(x,resolvePromise,rejectPromise)}catch(e){if(!called){reject(e);called=!0;return}}}else fulfil(x)}}function resolveRef(ractive,ref,fragment){var keypath;ref=normalise(ref);if("~/"===ref.substr(0,2)){keypath=getKeypath(ref.substring(2));createMappingIfNecessary(ractive,keypath.firstKey,fragment)}else if("."===ref[0]){keypath=resolveAncestorRef(getInnerContext(fragment),ref);keypath&&createMappingIfNecessary(ractive,keypath.firstKey,fragment)}else keypath=resolveAmbiguousReference(ractive,getKeypath(ref),fragment);return keypath}function resolveAncestorRef(baseContext,ref){var contextKeys;void 0!=baseContext&&"string"!=typeof baseContext&&(baseContext=baseContext.str);if("."===ref)return getKeypath(baseContext);contextKeys=baseContext?baseContext.split("."):[];if("../"===ref.substr(0,3)){for(;"../"===ref.substr(0,3);){if(!contextKeys.length)throw new Error('Could not resolve reference - too many "../" prefixes');contextKeys.pop();ref=ref.substring(3)}contextKeys.push(ref);return getKeypath(contextKeys.join("."))}return getKeypath(baseContext?baseContext+ref.replace(/^\.\//,"."):ref.replace(/^\.\/?/,""))}function resolveAmbiguousReference(ractive,ref,fragment,isParentLookup){var context,key,parentValue,hasContextChain,parentKeypath;if(ref.isRoot)return ref;key=ref.firstKey;for(;fragment;){context=fragment.context;fragment=fragment.parent;if(context){hasContextChain=!0;parentValue=ractive.viewmodel.get(context);if(parentValue&&("object"==typeof parentValue||"function"==typeof parentValue)&&key in parentValue)return context.join(ref.str)}}if(isRootProperty(ractive.viewmodel,key))return ref;if(ractive.parent&&!ractive.isolated){hasContextChain=!0;fragment=ractive.component.parentFragment;key=getKeypath(key);if(parentKeypath=resolveAmbiguousReference(ractive.parent,key,fragment,!0)){ractive.viewmodel.map(key,{origin:ractive.parent.viewmodel,keypath:parentKeypath});return ref}}if(!isParentLookup&&!hasContextChain){ractive.viewmodel.set(ref,void 0);return ref}}function createMappingIfNecessary(ractive,key){var parentKeypath;if(ractive.parent&&!ractive.isolated&&!isRootProperty(ractive.viewmodel,key)){key=getKeypath(key);(parentKeypath=resolveAmbiguousReference(ractive.parent,key,ractive.component.parentFragment,!0))&&ractive.viewmodel.map(key,{origin:ractive.parent.viewmodel,keypath:parentKeypath})}}function isRootProperty(viewmodel,key){return""===key||key in viewmodel.data||key in viewmodel.computations||key in viewmodel.mappings}function teardown(x){x.teardown()}function methodCallers__unbind(x){x.unbind()}function methodCallers__unrender(x){x.unrender()}function cancel(x){x.cancel()}function detach(element){element.detach()}function detachNodes(tm){tm.detachNodes()}function check(tm){if(tm.ready&&!tm.outros.length&&!tm.outroChildren){if(!tm.outrosComplete){tm.parent?tm.parent.decrementOutros(tm):tm.detachNodes();tm.outrosComplete=!0}if(!tm.intros.length&&!tm.totalChildren){"function"==typeof tm.callback&&tm.callback();tm.parent&&tm.parent.decrementTotal()}}}function flushChanges(){for(var i,thing,changeHash;batch.ractives.length;){thing=batch.ractives.pop();changeHash=thing.viewmodel.applyChanges();changeHash&&changeHook.fire(thing,changeHash)}attemptKeypathResolution();for(i=0;i<batch.views.length;i+=1)batch.views[i].update();batch.views.length=0;for(i=0;i<batch.tasks.length;i+=1)batch.tasks[i]();batch.tasks.length=0;return batch.ractives.length?flushChanges():void 0}function attemptKeypathResolution(){var i,item,keypath,resolved;i=unresolved.length;for(;i--;){item=unresolved[i];if(item.keypath)unresolved.splice(i,1);else if(keypath=shared_resolveRef(item.root,item.ref,item.parentFragment)){(resolved||(resolved=[])).push({item:item,keypath:keypath});unresolved.splice(i,1)}}resolved&&resolved.forEach(global_runloop__resolve)}function global_runloop__resolve(resolved){resolved.item.resolve(resolved.keypath)}function Ractive$animate(keypath,to,options){var promise,fulfilPromise,k,animation,animations,easing,duration,step,complete,makeValueCollector,currentValues,collectValue,dummy,dummyOptions;promise=new utils_Promise(function(fulfil){return fulfilPromise=fulfil});if("object"==typeof keypath){options=to||{};easing=options.easing;duration=options.duration;animations=[];step=options.step;complete=options.complete;if(step||complete){currentValues={};options.step=null;options.complete=null;makeValueCollector=function(keypath){return function(t,value){currentValues[keypath]=value}}}for(k in keypath)if(keypath.hasOwnProperty(k)){if(step||complete){collectValue=makeValueCollector(k);options={easing:easing,duration:duration};step&&(options.step=collectValue)}options.complete=complete?collectValue:noop;animations.push(animate(this,k,keypath[k],options))}dummyOptions={easing:easing,duration:duration};step&&(dummyOptions.step=function(t){return step(t,currentValues)});complete&&promise.then(function(t){return complete(t,currentValues)});dummyOptions.complete=fulfilPromise;dummy=animate(this,null,null,dummyOptions);animations.push(dummy);promise.stop=function(){for(var animation;animation=animations.pop();)animation.stop();dummy&&dummy.stop()};return promise}options=options||{};options.complete&&promise.then(options.complete);options.complete=fulfilPromise;animation=animate(this,keypath,to,options);promise.stop=function(){return animation.stop()};return promise}function animate(root,keypath,to,options){var easing,duration,animation,from;keypath&&(keypath=getKeypath(normalise(keypath)));null!==keypath&&(from=root.viewmodel.get(keypath));shared_animations.abort(keypath,root);if(isEqual(from,to)){options.complete&&options.complete(options.to);return noAnimation}if(options.easing){easing="function"==typeof options.easing?options.easing:root.easing[options.easing];"function"!=typeof easing&&(easing=null)}duration=void 0===options.duration?400:options.duration;animation=new animate_Animation({keypath:keypath,from:from,to:to,root:root,duration:duration,easing:easing,interpolator:options.interpolator,step:options.step,complete:options.complete});shared_animations.add(animation);root._animations.push(animation);return animation}function Ractive$detach(){if(this.detached)return this.detached;this.el&&removeFromArray(this.el.__ractive_instances__,this);this.detached=this.fragment.detach();prototype_detach__detachHook.fire(this);return this.detached}function Ractive$find(selector){return this.el?this.fragment.find(selector):null}function Query$test(item,noDirty){var itemMatches;itemMatches=this._isComponentQuery?!this.selector||item.name===this.selector:item.node?matches(item.node,this.selector):null;if(itemMatches){this.push(item.node||item.instance);noDirty||this._makeDirty();return!0}}function getParent(item){var parentFragment;return(parentFragment=item.parentFragment)?parentFragment.owner:item.component&&(parentFragment=item.component.parentFragment)?parentFragment.owner:void 0}function getAncestry(item){var ancestry,ancestor;ancestry=[item];ancestor=getParent(item);for(;ancestor;){ancestry.push(ancestor);ancestor=getParent(ancestor)}return ancestry}function makeQuery(ractive,selector,live,isComponentQuery){var query=[];defineProperties(query,{selector:{value:selector},live:{value:live},_isComponentQuery:{value:isComponentQuery},_test:{value:test}});if(!live)return query;defineProperties(query,{cancel:{value:makeQuery_cancel},_root:{value:ractive},_sort:{value:sort},_makeDirty:{value:makeQuery_dirty},_remove:{value:remove},_dirty:{value:!1,writable:!0}});return query}function Ractive$findAll(selector,options){var liveQueries,query;if(!this.el)return[];options=options||{};liveQueries=this._liveQueries;if(query=liveQueries[selector])return options&&options.live?query:query.slice();query=_makeQuery(this,selector,!!options.live,!1);if(query.live){liveQueries.push(selector);liveQueries["_"+selector]=query}this.fragment.findAll(selector,query);return query}function Ractive$findAllComponents(selector,options){var liveQueries,query;options=options||{};liveQueries=this._liveComponentQueries;if(query=liveQueries[selector])return options&&options.live?query:query.slice();query=_makeQuery(this,selector,!!options.live,!0);if(query.live){liveQueries.push(selector);liveQueries["_"+selector]=query}this.fragment.findAllComponents(selector,query);return query}function Ractive$findComponent(selector){return this.fragment.findComponent(selector)}function Ractive$findContainer(selector){return this.container?this.container.component&&this.container.component.name===selector?this.container:this.container.findContainer(selector):null}function Ractive$findParent(selector){return this.parent?this.parent.component&&this.parent.component.name===selector?this.parent:this.parent.findParent(selector):null}function fireEvent(ractive,eventName){var options=void 0===arguments[2]?{}:arguments[2];if(eventName){options.event?options.event.name=eventName:options.event={name:eventName,_noArg:!0};var eventNames=getKeypath(eventName).wildcardMatches();fireEventAs(ractive,eventNames,options.event,options.args,!0)}}function fireEventAs(ractive,eventNames,event,args){var subscribers,i,initialFire=void 0===arguments[4]?!1:arguments[4],bubble=!0;shared_eventStack.enqueue(ractive,event);for(i=eventNames.length;i>=0;i--){subscribers=ractive._subs[eventNames[i]];subscribers&&(bubble=notifySubscribers(ractive,subscribers,event,args)&&bubble)}shared_eventStack.dequeue(ractive);if(ractive.parent&&bubble){if(initialFire&&ractive.component){var fullName=ractive.component.name+"."+eventNames[eventNames.length-1];eventNames=getKeypath(fullName).wildcardMatches();event&&(event.component=ractive)}fireEventAs(ractive.parent,eventNames,event,args)}}function notifySubscribers(ractive,subscribers,event,args){var originalEvent=null,stopEvent=!1;event&&!event._noArg&&(args=[event].concat(args));subscribers=subscribers.slice();for(var i=0,len=subscribers.length;len>i;i+=1)subscribers[i].apply(ractive,args)===!1&&(stopEvent=!0);if(event&&!event._noArg&&stopEvent&&(originalEvent=event.original)){originalEvent.preventDefault&&originalEvent.preventDefault();originalEvent.stopPropagation&&originalEvent.stopPropagation()}return!stopEvent}function Ractive$fire(eventName){var options={args:Array.prototype.slice.call(arguments,1)};shared_fireEvent(this,eventName,options)}function Ractive$get(keypath){var value;keypath=getKeypath(normalise(keypath));value=this.viewmodel.get(keypath,options);void 0===value&&this.parent&&!this.isolated&&shared_resolveRef(this,keypath.str,this.component.parentFragment)&&(value=this.viewmodel.get(keypath));return value}function Ractive$insert(target,anchor){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");target=getElement(target);anchor=getElement(anchor)||null;if(!target)throw new Error("You must specify a valid target to insert into");target.insertBefore(this.detach(),anchor);this.el=target;(target.__ractive_instances__||(target.__ractive_instances__=[])).push(this);this.detached=null;fireInsertHook(this)}function fireInsertHook(ractive){insertHook.fire(ractive);ractive.findAllComponents("*").forEach(function(child){fireInsertHook(child.instance)})}function Ractive$merge(keypath,array,options){var currentArray,promise;keypath=getKeypath(normalise(keypath));currentArray=this.viewmodel.get(keypath);if(!isArray(currentArray)||!isArray(array))return this.set(keypath,array,options&&options.complete);promise=global_runloop.start(this,!0);this.viewmodel.merge(keypath,currentArray,array,options);global_runloop.end();return promise}function getPattern(ractive,pattern){var matchingKeypaths,values;matchingKeypaths=getMatchingKeypaths(ractive,pattern);values={};matchingKeypaths.forEach(function(keypath){values[keypath.str]=ractive.get(keypath.str)});return values}function getObserverFacade(ractive,keypath,callback,options){var observer,isPatternObserver,cancelled;keypath=getKeypath(normalise(keypath));options=options||emptyObject;if(keypath.isPattern){observer=new observe_PatternObserver(ractive,keypath,callback,options);ractive.viewmodel.patternObservers.push(observer);isPatternObserver=!0}else observer=new observe_Observer(ractive,keypath,callback,options);observer.init(options.init);ractive.viewmodel.register(keypath,observer,isPatternObserver?"patternObservers":"observers");observer.ready=!0;var facade={cancel:function(){var index;if(!cancelled){if(isPatternObserver){index=ractive.viewmodel.patternObservers.indexOf(observer);ractive.viewmodel.patternObservers.splice(index,1);ractive.viewmodel.unregister(keypath,observer,"patternObservers")}else ractive.viewmodel.unregister(keypath,observer,"observers");cancelled=!0}}};ractive._observers.push(facade);return facade}function Ractive$observe(keypath,callback,options){var observers,map,keypaths,i;if(isObject(keypath)){options=callback;map=keypath;observers=[];for(keypath in map)if(map.hasOwnProperty(keypath)){callback=map[keypath];observers.push(this.observe(keypath,callback,options))}return{cancel:function(){for(;observers.length;)observers.pop().cancel()}}}if("function"==typeof keypath){options=callback;callback=keypath;keypath="";return observe_getObserverFacade(this,keypath,callback,options)}keypaths=keypath.split(" ");if(1===keypaths.length)return observe_getObserverFacade(this,keypath,callback,options);observers=[];i=keypaths.length;for(;i--;){keypath=keypaths[i];keypath&&observers.push(observe_getObserverFacade(this,keypath,callback,options))}return{cancel:function(){for(;observers.length;)observers.pop().cancel()}}}function Ractive$observeOnce(property,callback,options){var observer=this.observe(property,function(){callback.apply(this,arguments);observer.cancel()},{init:!1,defer:options&&options.defer});return observer}function Ractive$off(eventName,callback){var eventNames,_this=this;if(eventName){eventNames=eventName.split(" ").map(shared_trim).filter(notEmptyString);eventNames.forEach(function(eventName){var subscribers,index;if(subscribers=_this._subs[eventName])if(callback){index=subscribers.indexOf(callback);-1!==index&&subscribers.splice(index,1)}else _this._subs[eventName]=[]})}else for(eventName in this._subs)delete this._subs[eventName];return this}function Ractive$on(eventName,callback){var listeners,n,eventNames,_this=this;if("object"==typeof eventName){listeners=[];for(n in eventName)eventName.hasOwnProperty(n)&&listeners.push(this.on(n,eventName[n]));return{cancel:function(){for(var listener;listener=listeners.pop();)listener.cancel()}}}eventNames=eventName.split(" ").map(shared_trim).filter(notEmptyString);eventNames.forEach(function(eventName){(_this._subs[eventName]||(_this._subs[eventName]=[])).push(callback)});return{cancel:function(){return _this.off(eventName,callback)}}}function Ractive$once(eventName,handler){var listener=this.on(eventName,function(){handler.apply(this,arguments);listener.cancel()});return listener}function getNewIndices(array,methodName,args){var spliceArguments,len,removeStart,removeEnd,balance,i,newIndices=[];spliceArguments=getSpliceEquivalent(array,methodName,args);if(!spliceArguments)return null;len=array.length;balance=spliceArguments.length-2-spliceArguments[1];removeStart=Math.min(len,spliceArguments[0]);removeEnd=removeStart+spliceArguments[1];for(i=0;removeStart>i;i+=1)newIndices.push(i);for(;removeEnd>i;i+=1)newIndices.push(-1);for(;len>i;i+=1)newIndices.push(i+balance);0!==balance?newIndices.touchedFrom=spliceArguments[0]:newIndices.touchedFrom=array.length;return newIndices}function getSpliceEquivalent(array,methodName,args){switch(methodName){case"splice":void 0!==args[0]&&args[0]<0&&(args[0]=array.length+Math.max(args[0],-array.length));for(;args.length<2;)args.push(0);args[1]=Math.min(args[1],array.length-args[0]);return args;case"sort":case"reverse":return null;case"pop":return array.length?[array.length-1,1]:[0,0];case"push":return[array.length,0].concat(args);case"shift":return[0,array.length?1:0];case"unshift":return[0,0].concat(args)}}function Ractive$render(target,anchor){var promise,instances,transitionsEnabled,_this=this;transitionsEnabled=this.transitionsEnabled;this.noIntro&&(this.transitionsEnabled=!1);promise=global_runloop.start(this,!0);global_runloop.scheduleTask(function(){return renderHook.fire(_this)},!0);if(this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");target=getElement(target)||this.el;anchor=getElement(anchor)||this.anchor;this.el=target;this.anchor=anchor;if(!this.append&&target){var others=target.__ractive_instances__;others&&others.length&&removeOtherInstances(others);target.innerHTML=""}this.cssId&&global_css.apply();if(target){(instances=target.__ractive_instances__)?instances.push(this):target.__ractive_instances__=[this];anchor?target.insertBefore(this.fragment.render(),anchor):target.appendChild(this.fragment.render())}global_runloop.end();this.transitionsEnabled=transitionsEnabled;return promise.then(function(){return completeHook.fire(_this)})}function removeOtherInstances(others){others.splice(0,others.length).forEach(teardown)}function custom_adapt__combine(a,b){for(var c=a.slice(),i=b.length;i--;)~c.indexOf(b[i])||c.push(b[i]);return c}function transformCss(css,id){var transformed,dataAttr,addGuid;dataAttr='[data-ractive-css~="{'+id+'}"]';addGuid=function(selector){var selectorUnits,match,unit,base,prepended,appended,i,transformed=[];selectorUnits=[];for(;match=selectorUnitPattern.exec(selector);)selectorUnits.push({str:match[0],base:match[1],modifiers:match[2]});base=selectorUnits.map(extractString);i=selectorUnits.length;for(;i--;){appended=base.slice();unit=selectorUnits[i];appended[i]=unit.base+dataAttr+unit.modifiers||"";prepended=base.slice();prepended[i]=dataAttr+" "+prepended[i];transformed.push(appended.join(" "),prepended.join(" "))}return transformed.join(", ")};transformed=dataRvcGuidPattern.test(css)?css.replace(dataRvcGuidPattern,dataAttr):css.replace(commentsPattern,"").replace(selectorsPattern,function(match,$1){var selectors,transformed;if(mediaQueryPattern.test($1))return match;selectors=$1.split(",").map(trim);transformed=selectors.map(addGuid).join(", ")+" ";return match.replace($1,transformed)});return transformed}function trim(str){return str.trim?str.trim():str.replace(/^\s+/,"").replace(/\s+$/,"")}function extractString(unit){return unit.str}function validate(data){data&&data.constructor!==Object&&("function"==typeof data||("object"!=typeof data?fatal("data option must be an object or a function, `"+data+"` is not valid"):warnIfDebug("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function custom_data__combine(parentValue,childValue){validate(childValue);var parentIsFn="function"==typeof parentValue,childIsFn="function"==typeof childValue;childValue||parentIsFn||(childValue={});return parentIsFn||childIsFn?function(){var child=childIsFn?callDataFunction(childValue,this):childValue,parent=parentIsFn?callDataFunction(parentValue,this):parentValue;return fromProperties(child,parent)}:fromProperties(childValue,parentValue)}function callDataFunction(fn,context){var data=fn.call(context);if(data){"object"!=typeof data&&fatal("Data function must return an object");data.constructor!==Object&&warnOnceIfDebug("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged");return data}}function fromProperties(primary,secondary){if(primary&&secondary){for(var key in secondary)key in primary||(primary[key]=secondary[key]);return primary}return primary||secondary}function template_parser__createHelper(parseOptions){var helper=create(parser);helper.parse=function(template,options){return doParse(template,options||parseOptions)};return helper}function doParse(template,parseOptions){if(!parse)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return parse(template,parseOptions||this.options)}function fromId(id,options){var template;if(!isClient){if(options&&options.noThrow)return;throw new Error("Cannot retrieve template #"+id+" as Ractive is not running in a browser.")}isHashedId(id)&&(id=id.substring(1));if(!(template=document.getElementById(id))){if(options&&options.noThrow)return;throw new Error("Could not find template element with id #"+id)}if("SCRIPT"!==template.tagName.toUpperCase()){if(options&&options.noThrow)return;throw new Error("Template element with id #"+id+", must be a <script> element")}return"textContent"in template?template.textContent:template.innerHTML}function isHashedId(id){return id&&"#"===id[0]}function isParsed(template){return!("string"==typeof template)}function getParseOptions(ractive){ractive.defaults&&(ractive=ractive.defaults);return parseOptions.reduce(function(val,key){val[key]=ractive[key];return val},{})}function resetValue(ractive){var result,initial=ractive._config.template;if(initial&&initial.fn){result=getDynamicTemplate(ractive,initial.fn);if(result!==initial.result){initial.result=result;result=parseIfString(result,ractive);return result}}}function getDynamicTemplate(ractive,fn){var helper=template_template__createHelper(template_parser.getParseOptions(ractive));return fn.call(ractive,helper)}function template_template__createHelper(parseOptions){var helper=create(template_parser);helper.parse=function(template,options){return template_parser.parse(template,options||parseOptions)};return helper}function parseIfString(template,ractive){if("string"==typeof template){"#"===template[0]&&(template=template_parser.fromId(template));template=parse(template,template_parser.getParseOptions(ractive))}else{if(void 0==template)throw new Error("The template cannot be "+template+".");if("number"!=typeof template.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(template.v!==TEMPLATE_VERSION)throw new Error("Mismatched template version (expected "+TEMPLATE_VERSION+", got "+template.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return template}function extendPartials(existingPartials,newPartials,overwrite){if(newPartials)for(var key in newPartials)(overwrite||!existingPartials.hasOwnProperty(key))&&(existingPartials[key]=newPartials[key])}function wrap(parent,name,method){if(!/_super/.test(method))return method;var wrapper=function(){var result,superMethod=getSuperMethod(wrapper._parent,name),hasSuper="_super"in this,oldSuper=this._super;this._super=superMethod;result=method.apply(this,arguments);hasSuper?this._super=oldSuper:delete this._super;return result};wrapper._parent=parent;wrapper._method=method;return wrapper}function getSuperMethod(parent,name){var value,method;if(name in parent){value=parent[name];method="function"==typeof value?value:function(){return value}}else method=noop;return method}function getMessage(deprecated,correct,isError){return"options."+deprecated+" has been deprecated in favour of options."+correct+"."+(isError?" You cannot specify both options, please use options."+correct+".":"")}function deprecateOption(options,deprecatedOption,correct){if(deprecatedOption in options){if(correct in options)throw new Error(getMessage(deprecatedOption,correct,!0));warnIfDebug(getMessage(deprecatedOption,correct));options[correct]=options[deprecatedOption]}}function deprecate(options){deprecateOption(options,"beforeInit","onconstruct");deprecateOption(options,"init","onrender");deprecateOption(options,"complete","oncomplete");deprecateOption(options,"eventDefinitions","events");isArray(options.adaptors)&&deprecateOption(options,"adaptors","adapt")}function configure(method,Parent,target,options){config_deprecate(options);for(var key in options)if(isStandardKey.hasOwnProperty(key)){var value=options[key];"el"!==key&&"function"==typeof value?warnIfDebug(""+key+" is a Ractive option that does not expect a function and will be ignored","init"===method?target:null):target[key]=value}config_registries.forEach(function(registry){registry[method](Parent,target,options)});custom_adapt[method](Parent,target,options);
template_template[method](Parent,target,options);css_css[method](Parent,target,options);extendOtherMethods(Parent.prototype,target,options)}function extendOtherMethods(parent,target,options){for(var key in options)if(!isBlacklisted[key]&&options.hasOwnProperty(key)){var member=options[key];"function"==typeof member&&(member=wrapPrototype(parent,key,member));target[key]=member}}function makeObj(array){var obj={};array.forEach(function(x){return obj[x]=!0});return obj}function Fragment$bubble(){this.dirtyValue=this.dirtyArgs=!0;this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function Fragment$detach(){var docFrag;if(1===this.items.length)return this.items[0].detach();docFrag=document.createDocumentFragment();this.items.forEach(function(item){var node=item.detach();node&&docFrag.appendChild(node)});return docFrag}function Fragment$find(selector){var i,len,item,queryResult;if(this.items){len=this.items.length;for(i=0;len>i;i+=1){item=this.items[i];if(item.find&&(queryResult=item.find(selector)))return queryResult}return null}}function Fragment$findAll(selector,query){var i,len,item;if(this.items){len=this.items.length;for(i=0;len>i;i+=1){item=this.items[i];item.findAll&&item.findAll(selector,query)}}return query}function Fragment$findAllComponents(selector,query){var i,len,item;if(this.items){len=this.items.length;for(i=0;len>i;i+=1){item=this.items[i];item.findAllComponents&&item.findAllComponents(selector,query)}}return query}function Fragment$findComponent(selector){var len,i,item,queryResult;if(this.items){len=this.items.length;for(i=0;len>i;i+=1){item=this.items[i];if(item.findComponent&&(queryResult=item.findComponent(selector)))return queryResult}return null}}function Fragment$findNextNode(item){var node,index=item.index;node=this.items[index+1]?this.items[index+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this);return node}function Fragment$firstNode(){return this.items&&this.items[0]?this.items[0].firstNode():null}function readNumberLiteral(parser){var result;return(result=parser.matchPattern(literal_readNumberLiteral__numberPattern))?{t:NUMBER_LITERAL,v:result}:null}function readKey(parser){var token;return(token=readStringLiteral(parser))?identifier.test(token.v)?token.v:'"'+token.v.replace(/"/g,'\\"')+'"':(token=literal_readNumberLiteral(parser))?token.v:(token=parser.matchPattern(patterns__name))?token:void 0}function getKeyValuePair(parser){var key,valueToken,pair;parser.allowWhitespace();key=shared_readKey(parser);if(!key)return null;pair={key:key};parser.allowWhitespace();if(!parser.matchString(":"))return null;parser.allowWhitespace();valueToken=parser.read();if(!valueToken)return null;pair.value=valueToken.v;return pair}function processItems(items,values,guid,counter){counter=counter||0;return items.map(function(item){var placeholderId,wrapped,value;if(item.text)return item.text;if(item.fragments)return item.fragments.map(function(fragment){return processItems(fragment.items,values,guid,counter)}).join("");placeholderId=guid+"-"+counter++;value=item.keypath&&(wrapped=item.root.viewmodel.wrapped[item.keypath.str])?wrapped.value:item.getValue();values[placeholderId]=value;return"${"+placeholderId+"}"}).join("")}function Fragment$getArgsList(){var values,source,parsed,result;if(this.dirtyArgs){source=shared_processItems(this.items,values={},this.root._guid);parsed=parseJSON("["+source+"]",values);result=parsed?parsed.value:[this.toString()];this.argsList=result;this.dirtyArgs=!1}return this.argsList}function Fragment$getNode(){var fragment=this;do if(fragment.pElement)return fragment.pElement.node;while(fragment=fragment.parent);return this.root.detached||this.root.el}function Fragment$getValue(){var values,source,parsed,result;if(this.dirtyValue){source=shared_processItems(this.items,values={},this.root._guid);parsed=parseJSON(source,values);result=parsed?parsed.value:this.toString();this.value=result;this.dirtyValue=!1}return this.value}function decodeCharacterReferences(html){return html.replace(entityPattern,function(match,entity){var code;code="#"!==entity[0]?htmlEntities[entity]:"x"===entity[1]?parseInt(entity.substring(2),16):parseInt(entity.substring(1),10);return code?String.fromCharCode(validateCode(code)):match})}function validateCode(code){return code?10===code?32:128>code?code:159>=code?controlCharacters[code-128]:55296>code?code:57343>=code?65533:65535>=code?code:65533:65533}function escapeHtml(str){return str.replace(amp,"&amp;").replace(lessThan,"&lt;").replace(greaterThan,"&gt;")}function shared_unbind__unbind(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()}function Mustache$getValue(){return this.value}function getProp(target,prop){for(var value,i=0;i<prop.prop.length;i++)if(void 0!==(value=target[prop.prop[i]]))return value}function findIndexRefs(fragment,refName){var refs,fragRefs,ref,i,owner,result={},hit=!1;refName||(result.refs=refs={});for(;fragment;){if((owner=fragment.owner)&&(fragRefs=owner.indexRefs)){if(refName&&(ref=owner.getIndexRef(refName))){result.ref={fragment:fragment,ref:ref};return result}if(!refName)for(i in fragRefs){ref=fragRefs[i];if(!refs[ref.n]){hit=!0;refs[ref.n]={fragment:fragment,ref:ref}}}}if(!fragment.parent&&fragment.owner&&fragment.owner.component&&fragment.owner.component.parentFragment&&!fragment.owner.component.instance.isolated){result.componentBoundary=!0;fragment=fragment.owner.component.parentFragment}else fragment=fragment.parent}return hit?result:void 0}function createReferenceResolver(owner,ref,callback){var indexRef;return"@"===ref.charAt(0)?new Resolvers_SpecialResolver(owner,ref,callback):(indexRef=Resolvers_findIndexRefs(owner.parentFragment,ref))?new Resolvers_IndexResolver(owner,indexRef,callback):new Resolvers_ReferenceResolver(owner,ref,callback)}function getFunctionFromString(str,i){var fn,args;if(cache[str])return cache[str];args=[];for(;i--;)args[i]="_"+i;fn=new Function(args.join(","),"return("+str+")");cache[str]=fn;return fn}function call(value){return value.call()}function getUniqueString(str,keypaths){return str.replace(/_([0-9]+)/g,function(match,$1){var keypath,value;if(+$1>=keypaths.length)return"_"+$1;keypath=keypaths[$1];if(void 0===keypath)return"undefined";if(keypath.isSpecial){value=keypath.value;return"number"==typeof value?value:'"'+value+'"'}return keypath.str})}function createExpressionKeypath(uniqueString){return getKeypath("${"+uniqueString.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function isValidDependency(keypath){return void 0!==keypath&&"@"!==keypath[0]}function wrapFunction(fn,ractive){var wrapped,prop,key;if(fn.__ractive_nowrap)return fn;prop="__ractive_"+ractive._guid;wrapped=fn[prop];if(wrapped)return wrapped;if(/this/.test(fn.toString())){defineProperty(fn,prop,{value:Resolvers_ExpressionResolver__bind.call(fn,ractive),configurable:!0});for(key in fn)fn.hasOwnProperty(key)&&(fn[prop][key]=fn[key]);ractive._boundFunctions.push({fn:fn,prop:prop});return fn[prop]}defineProperty(fn,"__ractive_nowrap",{value:fn});return fn.__ractive_nowrap}function ReferenceExpressionResolver_ReferenceExpressionResolver__getValue(member){return member.value}function isDefined(value){return void 0!=value}function forceResolution(member){member.forceResolution()}function Mustache$init(mustache,options){function resolve(keypath){mustache.resolve(keypath)}function resolveAndRebindChildren(newKeypath){var oldKeypath=mustache.keypath;if(newKeypath!=oldKeypath){mustache.resolve(newKeypath);void 0!==oldKeypath&&mustache.fragments&&mustache.fragments.forEach(function(f){f.rebind(oldKeypath,newKeypath)})}}var ref,parentFragment,template;parentFragment=options.parentFragment;template=options.template;mustache.root=parentFragment.root;mustache.parentFragment=parentFragment;mustache.pElement=parentFragment.pElement;mustache.template=options.template;mustache.index=options.index||0;mustache.isStatic=options.template.s;mustache.type=options.template.t;mustache.registered=!1;(ref=template.r)&&(mustache.resolver=Resolvers_createReferenceResolver(mustache,ref,resolve));options.template.x&&(mustache.resolver=new Resolvers_ExpressionResolver(mustache,parentFragment,options.template.x,resolveAndRebindChildren));options.template.rx&&(mustache.resolver=new ReferenceExpressionResolver_ReferenceExpressionResolver(mustache,options.template.rx,resolveAndRebindChildren));mustache.template.n!==SECTION_UNLESS||mustache.hasOwnProperty("value")||mustache.setValue(void 0)}function Mustache$resolve(keypath){var wasResolved,value,twowayBinding;if(keypath&&keypath.isSpecial){this.keypath=keypath;this.setValue(keypath.value)}else{if(this.registered){this.root.viewmodel.unregister(this.keypath,this);this.registered=!1;wasResolved=!0}this.keypath=keypath;if(void 0!=keypath){value=this.root.viewmodel.get(keypath);this.root.viewmodel.register(keypath,this);this.registered=!0}this.setValue(value);wasResolved&&(twowayBinding=this.twowayBinding)&&twowayBinding.rebound()}}function Mustache$rebind(oldKeypath,newKeypath){this.fragments&&this.fragments.forEach(function(f){return f.rebind(oldKeypath,newKeypath)});this.resolver&&this.resolver.rebind(oldKeypath,newKeypath)}function Section$bubble(){this.parentFragment.bubble()}function Section$detach(){var docFrag;if(1===this.fragments.length)return this.fragments[0].detach();docFrag=document.createDocumentFragment();this.fragments.forEach(function(item){docFrag.appendChild(item.detach())});return docFrag}function Section$find(selector){var i,len,queryResult;len=this.fragments.length;for(i=0;len>i;i+=1)if(queryResult=this.fragments[i].find(selector))return queryResult;return null}function Section$findAll(selector,query){var i,len;len=this.fragments.length;for(i=0;len>i;i+=1)this.fragments[i].findAll(selector,query)}function Section$findAllComponents(selector,query){var i,len;len=this.fragments.length;for(i=0;len>i;i+=1)this.fragments[i].findAllComponents(selector,query)}function Section$findComponent(selector){var i,len,queryResult;len=this.fragments.length;for(i=0;len>i;i+=1)if(queryResult=this.fragments[i].findComponent(selector))return queryResult;return null}function Section$findNextNode(fragment){return this.fragments[fragment.index+1]?this.fragments[fragment.index+1].firstNode():this.parentFragment.findNextNode(this)}function Section$firstNode(){var len,i,node;if(len=this.fragments.length)for(i=0;len>i;i+=1)if(node=this.fragments[i].firstNode())return node;return this.parentFragment.findNextNode(this)}function Section$shuffle(newIndices){var parentFragment,firstChange,i,newLength,reboundFragments,fragmentOptions,fragment,_this=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===SECTION_EACH){this.shuffling=!0;global_runloop.scheduleTask(function(){return _this.shuffling=!1});parentFragment=this.parentFragment;reboundFragments=[];newIndices.forEach(function(newIndex,oldIndex){var fragment,by,oldKeypath,newKeypath,deps;if(newIndex!==oldIndex){fragment=_this.fragments[oldIndex];void 0===firstChange&&(firstChange=oldIndex);if(-1!==newIndex){by=newIndex-oldIndex;oldKeypath=_this.keypath.join(oldIndex);newKeypath=_this.keypath.join(newIndex);fragment.index=newIndex;(deps=fragment.registeredIndexRefs)&&deps.forEach(shuffle__blindRebind);fragment.rebind(oldKeypath,newKeypath);reboundFragments[newIndex]=fragment}else{_this.fragmentsToUnrender.push(fragment);fragment.unbind()}}else reboundFragments[newIndex]=_this.fragments[oldIndex]});newLength=this.root.viewmodel.get(this.keypath).length;if(void 0===firstChange){if(this.length===newLength)return;firstChange=this.length}this.length=this.fragments.length=newLength;this.rendered&&global_runloop.addView(this);fragmentOptions={template:this.template.f,root:this.root,owner:this};for(i=firstChange;newLength>i;i+=1){fragment=reboundFragments[i];fragment||this.fragmentsToCreate.push(i);this.fragments[i]=fragment}}}function shuffle__blindRebind(dep){dep.rebind("","")}function Section$render(){var _this=this;this.docFrag=document.createDocumentFragment();this.fragments.forEach(function(f){return _this.docFrag.appendChild(f.render())});this.renderedFragments=this.fragments.slice();this.fragmentsToRender=[];this.rendered=!0;return this.docFrag}function Section$setValue(value){var wrapper,fragmentOptions,_this=this;if(!this.updating){this.updating=!0;this.keypath&&(wrapper=this.root.viewmodel.wrapped[this.keypath.str])&&(value=wrapper.get());if(this.fragmentsToCreate.length){fragmentOptions={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this};this.fragmentsToCreate.forEach(function(index){var fragment;fragmentOptions.context=_this.keypath.join(index);fragmentOptions.index=index;fragment=new virtualdom_Fragment(fragmentOptions);_this.fragmentsToRender.push(_this.fragments[index]=fragment)});this.fragmentsToCreate.length=0}else if(reevaluateSection(this,value)){this.bubble();this.rendered&&global_runloop.addView(this)}this.value=value;this.updating=!1}}function changeCurrentSubtype(section,value,obj){if(value===SECTION_EACH&&section.indexRefs&&section.indexRefs[0]){var ref=section.indexRefs[0];if((obj&&"i"===ref.t||!obj&&"k"===ref.t)&&!obj){section.length=0;section.fragmentsToUnrender=section.fragments.slice(0);section.fragmentsToUnrender.forEach(function(f){return f.unbind()})}ref.t=obj?"k":"i"}section.currentSubtype=value}function reevaluateSection(section,value){var fragmentOptions={template:section.template.f||[],root:section.root,pElement:section.parentFragment.pElement,owner:section};section.hasContext=!0;if(section.subtype)switch(section.subtype){case SECTION_IF:section.hasContext=!1;return reevaluateConditionalSection(section,value,!1,fragmentOptions);case SECTION_UNLESS:section.hasContext=!1;return reevaluateConditionalSection(section,value,!0,fragmentOptions);case SECTION_WITH:return reevaluateContextSection(section,fragmentOptions);case SECTION_IF_WITH:return reevaluateConditionalContextSection(section,value,fragmentOptions);case SECTION_EACH:if(isObject(value)){changeCurrentSubtype(section,section.subtype,!0);return reevaluateListObjectSection(section,value,fragmentOptions)}}section.ordered=!!isArrayLike(value);if(section.ordered){changeCurrentSubtype(section,SECTION_EACH,!1);return reevaluateListSection(section,value,fragmentOptions)}if(isObject(value)||"function"==typeof value){if(section.template.i){changeCurrentSubtype(section,SECTION_EACH,!0);return reevaluateListObjectSection(section,value,fragmentOptions)}changeCurrentSubtype(section,SECTION_WITH,!1);return reevaluateContextSection(section,fragmentOptions)}changeCurrentSubtype(section,SECTION_IF,!1);section.hasContext=!1;return reevaluateConditionalSection(section,value,!1,fragmentOptions)}function reevaluateListSection(section,value,fragmentOptions){var i,length,fragment;length=value.length;if(length===section.length)return!1;if(length<section.length){section.fragmentsToUnrender=section.fragments.splice(length,section.length-length);section.fragmentsToUnrender.forEach(methodCallers__unbind)}else if(length>section.length)for(i=section.length;length>i;i+=1){fragmentOptions.context=section.keypath.join(i);fragmentOptions.index=i;fragment=new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[i]=fragment)}section.length=length;return!0}function reevaluateListObjectSection(section,value,fragmentOptions){var id,i,hasKey,fragment,changed,deps;hasKey=section.hasKey||(section.hasKey={});i=section.fragments.length;for(;i--;){fragment=section.fragments[i];if(!(fragment.key in value)){changed=!0;fragment.unbind();section.fragmentsToUnrender.push(fragment);section.fragments.splice(i,1);hasKey[fragment.key]=!1}}i=section.fragments.length;for(;i--;){fragment=section.fragments[i];if(fragment.index!==i){fragment.index=i;(deps=fragment.registeredIndexRefs)&&deps.forEach(setValue__blindRebind)}}i=section.fragments.length;for(id in value)if(!hasKey[id]){changed=!0;fragmentOptions.context=section.keypath.join(id);fragmentOptions.key=id;fragmentOptions.index=i++;fragment=new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(fragment);section.fragments.push(fragment);hasKey[id]=!0}section.length=section.fragments.length;return changed}function reevaluateConditionalContextSection(section,value,fragmentOptions){return value?reevaluateContextSection(section,fragmentOptions):removeSectionFragments(section)}function reevaluateContextSection(section,fragmentOptions){var fragment;if(!section.length){fragmentOptions.context=section.keypath;fragmentOptions.index=0;fragment=new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[0]=fragment);section.length=1;return!0}}function reevaluateConditionalSection(section,value,inverted,fragmentOptions){var doRender,emptyArray,emptyObject,fragment,name;emptyArray=isArrayLike(value)&&0===value.length;emptyObject=!1;if(!isArrayLike(value)&&isObject(value)){emptyObject=!0;for(name in value){emptyObject=!1;break}}doRender=inverted?emptyArray||emptyObject||!value:value&&!emptyArray&&!emptyObject;if(!doRender)return removeSectionFragments(section);if(!section.length){fragmentOptions.index=0;fragment=new virtualdom_Fragment(fragmentOptions);section.fragmentsToRender.push(section.fragments[0]=fragment);section.length=1;return!0}if(section.length>1){section.fragmentsToUnrender=section.fragments.splice(1);section.fragmentsToUnrender.forEach(methodCallers__unbind);return!0}}function removeSectionFragments(section){if(section.length){section.fragmentsToUnrender=section.fragments.splice(0,section.fragments.length).filter(isRendered);section.fragmentsToUnrender.forEach(methodCallers__unbind);section.length=section.fragmentsToRender.length=0;return!0}}function isRendered(fragment){return fragment.rendered}function setValue__blindRebind(dep){dep.rebind("","")}function Section$toString(escape){var str,i,len;str="";i=0;len=this.length;for(i=0;len>i;i+=1)str+=this.fragments[i].toString(escape);return str}function Section$unbind(){var _this=this;this.fragments.forEach(methodCallers__unbind);this.fragmentsToRender.forEach(function(f){return removeFromArray(_this.fragments,f)});this.fragmentsToRender=[];shared_unbind.call(this);this.length=0;this.unbound=!0}function Section$unrender(shouldDestroy){this.fragments.forEach(shouldDestroy?unrenderAndDestroy:prototype_unrender__unrender);this.renderedFragments=[];this.rendered=!1}function unrenderAndDestroy(fragment){fragment.unrender(!0)}function prototype_unrender__unrender(fragment){fragment.unrender(!1)}function Section$update(){var fragment,renderIndex,renderedFragments,anchor,target,i,len;renderedFragments=this.renderedFragments;for(;fragment=this.fragmentsToUnrender.pop();){fragment.unrender(!0);renderedFragments.splice(renderedFragments.indexOf(fragment),1)}for(;fragment=this.fragmentsToRender.shift();)fragment.render();this.rendered&&(target=this.parentFragment.getNode());len=this.fragments.length;for(i=0;len>i;i+=1){fragment=this.fragments[i];renderIndex=renderedFragments.indexOf(fragment,i);if(renderIndex!==i){this.docFrag.appendChild(fragment.detach());-1!==renderIndex&&renderedFragments.splice(renderIndex,1);renderedFragments.splice(i,0,fragment)}else if(this.docFrag.childNodes.length){anchor=fragment.firstNode();target.insertBefore(this.docFrag,anchor)}}if(this.rendered&&this.docFrag.childNodes.length){anchor=this.parentFragment.findNextNode(this);target.insertBefore(this.docFrag,anchor)}this.renderedFragments=this.fragments.slice()}function Triple$detach(){var len,i;if(this.docFrag){len=this.nodes.length;for(i=0;len>i;i+=1)this.docFrag.appendChild(this.nodes[i]);return this.docFrag}}function Triple$find(selector){var i,len,node,queryResult;len=this.nodes.length;for(i=0;len>i;i+=1){node=this.nodes[i];if(1===node.nodeType){if(matches(node,selector))return node;if(queryResult=node.querySelector(selector))return queryResult}}return null}function Triple$findAll(selector,queryResult){var i,len,node,queryAllResult,numNodes,j;len=this.nodes.length;for(i=0;len>i;i+=1){node=this.nodes[i];if(1===node.nodeType){matches(node,selector)&&queryResult.push(node);if(queryAllResult=node.querySelectorAll(selector)){numNodes=queryAllResult.length;for(j=0;numNodes>j;j+=1)queryResult.push(queryAllResult[j])}}}}function Triple$firstNode(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function element(tagName){return elementCache[tagName]||(elementCache[tagName]=createElement(tagName))}function updateSelect(parentElement){var selectedOptions,option,value;if(parentElement&&"select"===parentElement.name&&parentElement.binding){selectedOptions=toArray(parentElement.node.options).filter(isSelected);parentElement.getAttribute("multiple")?value=selectedOptions.map(function(o){return o.value}):(option=selectedOptions[0])&&(value=option.value);void 0!==value&&parentElement.binding.setValue(value);parentElement.bubble()}}function isSelected(option){return option.selected}function Triple$render(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");this.docFrag=document.createDocumentFragment();this.nodes=insertHtml(this.value,this.parentFragment.getNode(),this.docFrag);helpers_updateSelect(this.pElement);this.rendered=!0;return this.docFrag}function Triple$setValue(value){var wrapper;(wrapper=this.root.viewmodel.wrapped[this.keypath.str])&&(value=wrapper.get());if(value!==this.value){this.value=value;this.parentFragment.bubble();this.rendered&&global_runloop.addView(this)}}function Triple$toString(){return void 0!=this.value?decodeCharacterReferences(""+this.value):""}function Triple$unrender(shouldDestroy){if(this.rendered&&shouldDestroy){this.nodes.forEach(detachNode);this.rendered=!1}}function Triple$update(){var node,parentNode;if(this.rendered){for(;this.nodes&&this.nodes.length;){node=this.nodes.pop();node.parentNode.removeChild(node)}parentNode=this.parentFragment.getNode();this.nodes=insertHtml(this.value,parentNode,this.docFrag);parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));helpers_updateSelect(this.pElement)}}function Element$detach(){var parentNode,node=this.node;if(node){(parentNode=node.parentNode)&&parentNode.removeChild(node);return node}}function Element$findNextNode(){return null}function Element$firstNode(){return this.node}function Element$getAttribute(name){return this.attributes&&this.attributes[name]?this.attributes[name].value:void 0}function Attribute$bubble(){var value=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();if(!isEqual(value,this.value)){"id"===this.name&&this.value&&delete this.root.nodes[this.value];this.value=value;"value"===this.name&&this.node&&(this.node._ractive.value=value);this.rendered&&global_runloop.addView(this)}}function getInterpolator(attribute){var items=attribute.fragment.items;return 1===items.length&&items[0].type===INTERPOLATOR?items[0]:void 0}function Attribute$init(options){this.type=ATTRIBUTE;this.element=options.element;this.root=options.root;determineNameAndNamespace(this,options.name);this.isBoolean=booleanAttributes.test(this.name);if(options.value&&"string"!=typeof options.value){this.parentFragment=this.element.parentFragment;this.fragment=new virtualdom_Fragment({template:options.value,root:this.root,owner:this});this.value=this.fragment.getValue();this.interpolator=helpers_getInterpolator(this);this.isBindable=!!this.interpolator&&!this.interpolator.isStatic;this.ready=!0}else this.value=this.isBoolean?!0:options.value||""}function Attribute$rebind(oldKeypath,newKeypath){this.fragment&&this.fragment.rebind(oldKeypath,newKeypath)}function Attribute$render(node){var propertyName;this.node=node;if(!node.namespaceURI||node.namespaceURI===namespaces.html){propertyName=propertyNames[this.name]||this.name;void 0!==node[propertyName]&&(this.propertyName=propertyName);(this.isBoolean||this.isTwoway)&&(this.useProperty=!0);"value"===propertyName&&(node._ractive.value=this.value)}this.rendered=!0;this.update()}function Attribute$toString(){var _ref=this,name=_ref.name,namespacePrefix=_ref.namespacePrefix,value=_ref.value,interpolator=_ref.interpolator,fragment=_ref.fragment;if(("value"!==name||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==name||void 0===this.element.getAttribute("contenteditable"))){if("name"===name&&"input"===this.element.name&&interpolator)return"name={{"+(interpolator.keypath.str||interpolator.ref)+"}}";if(this.isBoolean)return value?name:"";if(fragment){if(1===fragment.items.length&&null==fragment.items[0].value)return"";value=fragment.toString()}namespacePrefix&&(name=namespacePrefix+":"+name);return value?name+'="'+Attribute_prototype_toString__escape(value)+'"':name}}function Attribute_prototype_toString__escape(value){return value.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Attribute$unbind(){this.fragment&&this.fragment.unbind();"id"===this.name&&delete this.root.nodes[this.value]}function Attribute$updateSelect(){var options,option,optionValue,i,value=this.value;if(!this.locked){this.node._ractive.value=value;options=this.node.options;i=options.length;for(;i--;){option=options[i];optionValue=option._ractive?option._ractive.value:option.value;if(optionValue==value){option.selected=!0;break}}}}function Attribute$updateMultipleSelect(){var options,i,option,optionValue,value=this.value;isArray(value)||(value=[value]);options=this.node.options;i=options.length;for(;i--;){option=options[i];optionValue=option._ractive?option._ractive.value:option.value;option.selected=arrayContains(value,optionValue)}}function Attribute$updateRadioName(){var _ref=this,node=_ref.node,value=_ref.value;node.checked=value==node._ractive.value}function Attribute$updateRadioValue(){var wasChecked,binding,bindings,i,node=this.node;wasChecked=node.checked;node.value=this.element.getAttribute("value");node.checked=this.element.getAttribute("value")===this.element.getAttribute("name");if(wasChecked&&!node.checked&&this.element.binding){bindings=this.element.binding.siblings;if(i=bindings.length){for(;i--;){binding=bindings[i];if(!binding.element.node)return;if(binding.element.node.checked){global_runloop.addRactive(binding.root);return binding.handleChange()}}this.root.viewmodel.set(binding.keypath,void 0)}}}function Attribute$updateCheckboxName(){var valueAttribute,i,_ref=this,element=_ref.element,node=_ref.node,value=_ref.value,binding=element.binding;valueAttribute=element.getAttribute("value");if(isArray(value)){i=value.length;for(;i--;)if(valueAttribute==value[i]){binding.isChecked=node.checked=!0;return}binding.isChecked=node.checked=!1}else binding.isChecked=node.checked=value==valueAttribute}function Attribute$updateClassName(){this.node.className=safeToStringValue(this.value)}function Attribute$updateIdAttribute(){var _ref=this,node=_ref.node,value=_ref.value;this.root.nodes[value]=node;node.id=value}function Attribute$updateIEStyleAttribute(){var node,value;node=this.node;value=this.value;void 0===value&&(value="");node.style.setAttribute("cssText",value)}function Attribute$updateContentEditableValue(){var value=this.value;void 0===value&&(value="");this.locked||(this.node.innerHTML=value)}function Attribute$updateValue(){var _ref=this,node=_ref.node,value=_ref.value;node._ractive.value=value;this.locked||(node.value=void 0==value?"":value)}function Attribute$updateBooleanAttribute(){this.locked||(this.node[this.propertyName]=this.value)}function Attribute$updateEverythingElse(){var _ref=this,node=_ref.node,namespace=_ref.namespace,name=_ref.name,value=_ref.value,fragment=_ref.fragment;namespace?node.setAttributeNS(namespace,name,(fragment||value).toString()):this.isBoolean?value?node.setAttribute(name,""):node.removeAttribute(name):null==value?node.removeAttribute(name):node.setAttribute(name,(fragment||value).toString())}function Attribute$update(){var type,updateMethod,_ref=this,name=_ref.name,element=_ref.element,node=_ref.node;if("id"===name)updateMethod=updateIdAttribute;else if("value"===name){if("select"===element.name&&"value"===name)updateMethod=element.getAttribute("multiple")?updateMultipleSelectValue:updateSelectValue;else if("textarea"===element.name)updateMethod=updateValue;else if(null!=element.getAttribute("contenteditable"))updateMethod=updateContentEditableValue;else if("input"===element.name){type=element.getAttribute("type");updateMethod="file"===type?noop:"radio"===type&&element.binding&&"name"===element.binding.name?updateRadioValue:updateValue}}else this.isTwoway&&"name"===name?"radio"===node.type?updateMethod=updateRadioName:"checkbox"===node.type&&(updateMethod=updateCheckboxName):"style"===name&&node.style.setAttribute?updateMethod=updateIEStyleAttribute:"class"!==name||node.namespaceURI&&node.namespaceURI!==namespaces.html?this.useProperty&&(updateMethod=updateBoolean):updateMethod=updateClassName;updateMethod||(updateMethod=updateEverythingElse);this.update=updateMethod;this.update()}function parseAttributes(str,isSvg){var tag=isSvg?"svg":"div";_ConditionalAttribute__div.innerHTML="<"+tag+" "+str+"></"+tag+">";return toArray(_ConditionalAttribute__div.childNodes[0].attributes)}function notIn(haystack,needle){for(var i=haystack.length;i--;)if(haystack[i].name===needle.name)return!1;return!0}function findParentForm(element){for(;element=element.parent;)if("form"===element.name)return element}function handleChange(){this._ractive.binding.handleChange()}function handleBlur(){var value;handleDomEvent.call(this);value=this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value=void 0==value?"":value}function handleDelay(){var binding=this._ractive.binding,el=this;binding._timeout&&clearTimeout(binding._timeout);binding._timeout=setTimeout(function(){binding.rendered&&handleDomEvent.call(el);binding._timeout=void 0},binding.element.lazy)}function getSiblings(id,group,keypath){var hash=id+group+keypath;return sets[hash]||(sets[hash]=[])}function isChecked(binding){return binding.isChecked}function Binding_CheckboxNameBinding__getValue(binding){return binding.element.getAttribute("value")}function createTwowayBinding(element){var type,Binding,bindName,bindChecked,binding,attributes=element.attributes;if(element.binding){element.binding.teardown();element.binding=null}if((element.getAttribute("contenteditable")||attributes.contenteditable&&isBindable(attributes.contenteditable))&&isBindable(attributes.value))Binding=Binding_ContentEditableBinding;else if("input"===element.name){type=element.getAttribute("type");if("radio"===type||"checkbox"===type){bindName=isBindable(attributes.name);bindChecked=isBindable(attributes.checked);bindName&&bindChecked&&warnIfDebug("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:element.root});bindName?Binding="radio"===type?Binding_RadioNameBinding:Binding_CheckboxNameBinding:bindChecked&&(Binding="radio"===type?Binding_RadioBinding:Binding_CheckboxBinding)}else"file"===type&&isBindable(attributes.value)?Binding=Binding_FileListBinding:isBindable(attributes.value)&&(Binding="number"===type||"range"===type?NumericBinding:Binding_GenericBinding)}else"select"===element.name&&isBindable(attributes.value)?Binding=element.getAttribute("multiple")?Binding_MultipleSelectBinding:Binding_SelectBinding:"textarea"===element.name&&isBindable(attributes.value)&&(Binding=Binding_GenericBinding);return Binding&&(binding=new Binding(element))&&binding.keypath?binding:void 0}function isBindable(attribute){return attribute&&attribute.isBindable}function EventHandler$bubble(){var hasAction=this.getAction();hasAction&&!this.hasListener?this.listen():!hasAction&&this.hasListener&&this.unrender()}function EventHandler$fire(event){shared_fireEvent(this.root,this.getAction(),{event:event})}function EventHandler$getAction(){return this.action.toString().trim()}function EventHandler$init(element,name,template){var action,refs,ractive,_this=this;
this.element=element;this.root=element.root;this.parentFragment=element.parentFragment;this.name=name;if(-1!==name.indexOf("*")){fatal('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',element.name,name);this.invalid=!0}if(template.m){refs=template.a.r;this.method=template.m;this.keypaths=[];this.fn=shared_getFunctionFromString(template.a.s,refs.length);this.parentFragment=element.parentFragment;ractive=this.root;this.refResolvers=[];refs.forEach(function(ref,i){var match=void 0;(match=eventPattern.exec(ref))?_this.keypaths[i]={eventObject:!0,refinements:match[1]?match[1].split("."):[]}:_this.refResolvers.push(Resolvers_createReferenceResolver(_this,ref,function(keypath){return _this.resolve(i,keypath)}))});this.fire=fireMethodCall}else{action=template.n||template;"string"!=typeof action&&(action=new virtualdom_Fragment({template:action,root:this.root,owner:this}));this.action=action;if(template.d){this.dynamicParams=new virtualdom_Fragment({template:template.d,root:this.root,owner:this.element});this.fire=fireEventWithDynamicParams}else if(template.a){this.params=template.a;this.fire=fireEventWithParams}}}function fireMethodCall(event){var ractive,values,args;ractive=this.root;if("function"!=typeof ractive[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');values=this.keypaths.map(function(keypath){var value,len,i;if(void 0!==keypath){if(keypath.eventObject){value=event;if(len=keypath.refinements.length)for(i=0;len>i;i+=1)value=value[keypath.refinements[i]]}else value=ractive.viewmodel.get(keypath);return value}});shared_eventStack.enqueue(ractive,event);args=this.fn.apply(null,values);ractive[this.method].apply(ractive,args);shared_eventStack.dequeue(ractive)}function fireEventWithParams(event){shared_fireEvent(this.root,this.getAction(),{event:event,args:this.params})}function fireEventWithDynamicParams(event){var args=this.dynamicParams.getArgsList();"string"==typeof args&&(args=args.substr(1,args.length-2));shared_fireEvent(this.root,this.getAction(),{event:event,args:args})}function genericHandler(event){var storage,handler,indices,index={};storage=this._ractive;handler=storage.events[event.type];(indices=Resolvers_findIndexRefs(handler.element.parentFragment))&&(index=Resolvers_findIndexRefs.resolve(indices));handler.fire({node:this,original:event,index:index,keypath:storage.keypath.str,context:storage.root.viewmodel.get(storage.keypath)})}function EventHandler$listen(){var definition,name=this.name;if(!this.invalid){if(definition=findInViewHierarchy("events",this.root,name))this.custom=definition(this.node,getCustomHandler(name));else{if(!("on"+name in this.node||window&&"on"+name in window||isJsdom)){touchEvents[name]||warnOnceIfDebug(missingPlugin(name,"event"),{node:this.node});return}this.node.addEventListener(name,shared_genericHandler,!1)}this.hasListener=!0}}function getCustomHandler(name){customHandlers[name]||(customHandlers[name]=function(event){var storage=event.node._ractive;event.index=storage.index;event.keypath=storage.keypath.str;event.context=storage.root.viewmodel.get(storage.keypath);storage.events[name].fire(event)});return customHandlers[name]}function EventHandler$rebind(oldKeypath,newKeypath){function rebind(thing){thing&&thing.rebind(oldKeypath,newKeypath)}var fragment;if(this.method){fragment=this.element.parentFragment;this.refResolvers.forEach(rebind)}else{"string"!=typeof this.action&&rebind(this.action);this.dynamicParams&&rebind(this.dynamicParams)}}function EventHandler$render(){this.node=this.element.node;this.node._ractive.events[this.name]=this;(this.method||this.getAction())&&this.listen()}function EventHandler$resolve(index,keypath){this.keypaths[index]=keypath}function EventHandler$unbind(){if(this.method)this.refResolvers.forEach(methodCallers__unbind);else{"string"!=typeof this.action&&this.action.unbind();this.dynamicParams&&this.dynamicParams.unbind()}}function EventHandler$unrender(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,shared_genericHandler,!1);this.hasListener=!1}function select__bubble(){var _this=this;if(!this.dirty){this.dirty=!0;global_runloop.scheduleTask(function(){sync(_this);_this.dirty=!1})}this.parentFragment.bubble()}function sync(selectElement){var selectNode,selectValue,isMultiple,options,optionWasSelected;selectNode=selectElement.node;if(selectNode){options=toArray(selectNode.options);selectValue=selectElement.getAttribute("value");isMultiple=selectElement.getAttribute("multiple");if(void 0!==selectValue){options.forEach(function(o){var optionValue,shouldSelect;optionValue=o._ractive?o._ractive.value:o.value;shouldSelect=isMultiple?valueContains(selectValue,optionValue):selectValue==optionValue;shouldSelect&&(optionWasSelected=!0);o.selected=shouldSelect});if(!optionWasSelected){options[0]&&(options[0].selected=!0);selectElement.binding&&selectElement.binding.forceUpdate()}}else selectElement.binding&&selectElement.binding.forceUpdate()}}function valueContains(selectValue,optionValue){for(var i=selectValue.length;i--;)if(selectValue[i]==optionValue)return!0}function special_option__init(option,template){option.select=findParentSelect(option.parent);if(option.select){option.select.options.push(option);template.a||(template.a={});void 0!==template.a.value||template.a.hasOwnProperty("disabled")||(template.a.value=template.f);"selected"in template.a&&void 0!==option.select.getAttribute("value")&&delete template.a.selected}}function special_option__unbind(option){option.select&&removeFromArray(option.select.options,option)}function findParentSelect(element){if(element)do if("select"===element.name)return element;while(element=element.parent)}function Element$init(options){var parentFragment,template,ractive,binding,bindings,twoway,bindingAttrs;this.type=ELEMENT;parentFragment=this.parentFragment=options.parentFragment;template=this.template=options.template;this.parent=options.pElement||parentFragment.pElement;this.root=ractive=parentFragment.root;this.index=options.index;this.key=options.key;this.name=enforceCase(template.e);"option"===this.name&&special_option__init(this,template);if("select"===this.name){this.options=[];this.bubble=select__bubble}"form"===this.name&&(this.formBindings=[]);bindingAttrs=processBindingAttributes(this,template);this.attributes=createAttributes(this,template.a);this.conditionalAttributes=createConditionalAttributes(this,template.m);template.f&&(this.fragment=new virtualdom_Fragment({template:template.f,root:ractive,owner:this,pElement:this,cssIds:null}));twoway=ractive.twoway;bindingAttrs.twoway===!1?twoway=!1:bindingAttrs.twoway===!0&&(twoway=!0);this.twoway=twoway;this.lazy=bindingAttrs.lazy;if(twoway&&(binding=init_createTwowayBinding(this,template.a))){this.binding=binding;bindings=this.root._twowayBindings[binding.keypath.str]||(this.root._twowayBindings[binding.keypath.str]=[]);bindings.push(binding)}template.v&&(this.eventHandlers=createEventHandlers(this,template.v));template.o&&(this.decorator=new _Decorator(this,template.o));this.intro=template.t0||template.t1;this.outro=template.t0||template.t2}function Element$rebind(oldKeypath,newKeypath){function rebind(thing){thing.rebind(oldKeypath,newKeypath)}var i,storage,liveQueries,ractive;this.attributes&&this.attributes.forEach(rebind);this.conditionalAttributes&&this.conditionalAttributes.forEach(rebind);this.eventHandlers&&this.eventHandlers.forEach(rebind);this.decorator&&rebind(this.decorator);this.fragment&&rebind(this.fragment);if(liveQueries=this.liveQueries){ractive=this.root;i=liveQueries.length;for(;i--;)liveQueries[i]._makeDirty()}this.node&&(storage=this.node._ractive)&&assignNewKeypath(storage,"keypath",oldKeypath,newKeypath)}function special_img__render(img){var loadHandler;(img.attributes.width||img.attributes.height)&&img.node.addEventListener("load",loadHandler=function(){var width=img.getAttribute("width"),height=img.getAttribute("height");void 0!==width&&img.node.setAttribute("width",width);void 0!==height&&img.node.setAttribute("height",height);img.node.removeEventListener("load",loadHandler,!1)},!1)}function form__render(element){element.node.addEventListener("reset",handleReset,!1)}function form__unrender(element){element.node.removeEventListener("reset",handleReset,!1)}function handleReset(){var element=this._ractive.proxy;global_runloop.start();element.formBindings.forEach(updateModel);global_runloop.end()}function updateModel(binding){binding.root.viewmodel.set(binding.keypath,binding.resetValue)}function Transition$init(element,template,isIntro){var ractive,name,fragment;this.element=element;this.root=ractive=element.root;this.isIntro=isIntro;name=template.n||template;if("string"!=typeof name){fragment=new virtualdom_Fragment({template:name,root:ractive,owner:element});name=fragment.toString();fragment.unbind();if(""===name)return}this.name=name;if(template.a)this.params=template.a;else if(template.d){fragment=new virtualdom_Fragment({template:template.d,root:ractive,owner:element});this.params=fragment.getArgsList();fragment.unbind()}this._fn=findInViewHierarchy("transitions",ractive,name);this._fn||warnOnceIfDebug(missingPlugin(name,"transition"),{ractive:this.root})}function linear(t){return t}function onChange(){visibility.hidden=document[hidden]}function onHide(){visibility.hidden=!0}function onShow(){visibility.hidden=!1}function Transition$start(){var node,originalStyle,completed,_this=this;node=this.node=this.element.node;originalStyle=node.getAttribute("style");this.complete=function(noReset){if(!completed){!noReset&&_this.isIntro&&resetStyle(node,originalStyle);node._ractive.transition=null;_this._manager.remove(_this);completed=!0}};this._fn?this._fn.apply(this.root,[this].concat(this.params)):this.complete()}function resetStyle(node,style){if(style)node.setAttribute("style",style);else{node.getAttribute("style");node.removeAttribute("style")}}function Element$render(){var namespace,node,transition,_this=this,root=this.root;namespace=getNamespace(this);node=this.node=createElement(this.name,namespace);this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(x){return"{"+x+"}"}).join(" "));defineProperty(this.node,"_ractive",{value:{proxy:this,keypath:getInnerContext(this.parentFragment),events:create(null),root:root}});this.attributes.forEach(function(a){return a.render(node)});this.conditionalAttributes.forEach(function(a){return a.render(node)});if(this.fragment)if("script"===this.name){this.bubble=updateScript;this.node.text=this.fragment.toString(!1);this.fragment.unrender=noop}else if("style"===this.name){this.bubble=updateCss;this.bubble();this.fragment.unrender=noop}else this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=noop:this.node.appendChild(this.fragment.render());if(this.binding){this.binding.render();this.node._ractive.binding=this.binding}this.eventHandlers&&this.eventHandlers.forEach(function(h){return h.render()});"option"===this.name&&processOption(this);"img"===this.name?special_img__render(this):"form"===this.name?form__render(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected);this.decorator&&this.decorator.fn&&global_runloop.scheduleTask(function(){_this.decorator.torndown||_this.decorator.init()},!0);if(root.transitionsEnabled&&this.intro){transition=new _Transition(this,this.intro,!0);global_runloop.registerTransition(transition);global_runloop.scheduleTask(function(){return transition.start()},!0);this.transition=transition}this.node.autofocus&&global_runloop.scheduleTask(function(){return _this.node.focus()},!0);updateLiveQueries(this);return this.node}function getNamespace(element){var namespace,xmlns,parent;namespace=(xmlns=element.getAttribute("xmlns"))?xmlns:"svg"===element.name?namespaces.svg:(parent=element.parent)?"foreignObject"===parent.name?namespaces.html:parent.node.namespaceURI:element.root.el.namespaceURI;return namespace}function processOption(option){var optionValue,selectValue,i;if(option.select){selectValue=option.select.getAttribute("value");if(void 0!==selectValue){optionValue=option.getAttribute("value");if(option.select.node.multiple&&isArray(selectValue)){i=selectValue.length;for(;i--;)if(optionValue==selectValue[i]){option.node.selected=!0;break}}else option.node.selected=optionValue==selectValue}}}function updateLiveQueries(element){var instance,liveQueries,i,selector,query;instance=element.root;do{liveQueries=instance._liveQueries;i=liveQueries.length;for(;i--;){selector=liveQueries[i];query=liveQueries["_"+selector];query._test(element)&&(element.liveQueries||(element.liveQueries=[])).push(query)}}while(instance=instance.parent)}function optionIsSelected(element){var optionValue,selectValue,i;optionValue=element.getAttribute("value");if(void 0===optionValue||!element.select)return!1;selectValue=element.select.getAttribute("value");if(selectValue==optionValue)return!0;if(element.select.getAttribute("multiple")&&isArray(selectValue)){i=selectValue.length;for(;i--;)if(selectValue[i]==optionValue)return!0}}function inputIsCheckedRadio(element){var attributes,typeAttribute,valueAttribute,nameAttribute;attributes=element.attributes;typeAttribute=attributes.type;valueAttribute=attributes.value;nameAttribute=attributes.name;return typeAttribute&&"radio"===typeAttribute.value&&valueAttribute&&nameAttribute.interpolator&&valueAttribute.value===nameAttribute.interpolator.value?!0:void 0}function stringifyAttribute(attribute){var str=attribute.toString();return str?" "+str:""}function Element$unbind(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(methodCallers__unbind);"option"===this.name&&special_option__unbind(this);this.attributes.forEach(methodCallers__unbind);this.conditionalAttributes.forEach(methodCallers__unbind)}function Element$unrender(shouldDestroy){var binding,bindings,transition;(transition=this.transition)&&transition.complete();"option"===this.name?this.detach():shouldDestroy&&global_runloop.detachWhenReady(this);this.fragment&&this.fragment.unrender(!1);if(binding=this.binding){this.binding.unrender();this.node._ractive.binding=null;bindings=this.root._twowayBindings[binding.keypath.str];bindings.splice(bindings.indexOf(binding),1)}this.eventHandlers&&this.eventHandlers.forEach(methodCallers__unrender);this.decorator&&global_runloop.registerDecorator(this.decorator);if(this.root.transitionsEnabled&&this.outro){transition=new _Transition(this,this.outro,!1);global_runloop.registerTransition(transition);global_runloop.scheduleTask(function(){return transition.start()})}this.liveQueries&&removeFromLiveQueries(this);"form"===this.name&&form__unrender(this)}function removeFromLiveQueries(element){var query,selector,i;i=element.liveQueries.length;for(;i--;){query=element.liveQueries[i];selector=query.selector;query._remove(element.node)}}function reducer(previous,line){var lineIndent=deIndent__leadingWhitespace.exec(line)[0];return null===previous||lineIndent.length<previous.length?lineIndent:previous}function getPartialTemplate(ractive,name,parentFragment){var partial;if(partial=getPartialFromRegistry(ractive,name,parentFragment||{}))return partial;partial=template_parser.fromId(name,{noThrow:!0});if(partial){partial=deIndent(partial);var parsed=template_parser.parse(partial,template_parser.getParseOptions(ractive));return ractive.partials[name]=parsed.t}}function getPartialFromRegistry(ractive,name,parentFragment){var fn=void 0,partial=findParentPartial(name,parentFragment.owner);if(partial)return partial;var instance=findInstance("partials",ractive,name);if(instance){partial=instance.partials[name];if("function"==typeof partial){fn=partial.bind(instance);fn.isOwner=instance.partials.hasOwnProperty(name);partial=fn.call(ractive,template_parser)}if(partial||""===partial){if(!template_parser.isParsed(partial)){var parsed=template_parser.parse(partial,template_parser.getParseOptions(instance));parsed.p&&warnIfDebug("Partials ({{>%s}}) cannot contain nested inline partials",name,{ractive:ractive});var target=fn?instance:findOwner(instance,name);target.partials[name]=partial=parsed.t}fn&&(partial._fn=fn);return partial.v?partial.t:partial}warnIfDebug(noRegistryFunctionReturn,name,"partial","partial",{ractive:ractive})}}function findOwner(ractive,key){return ractive.partials.hasOwnProperty(key)?ractive:findConstructor(ractive.constructor,key)}function findConstructor(constructor,key){return constructor?constructor.partials.hasOwnProperty(key)?constructor:findConstructor(constructor._Parent,key):void 0}function findParentPartial(name,parent){if(parent){if(parent.template&&parent.template.p&&parent.template.p[name])return parent.template.p[name];if(parent.parentFragment&&parent.parentFragment.owner)return findParentPartial(name,parent.parentFragment.owner)}}function getComponent(ractive,name){var Component,instance=findInstance("components",ractive,name);if(instance){Component=instance.components[name];if(!Component._Parent){var fn=Component.bind(instance);fn.isOwner=instance.components.hasOwnProperty(name);Component=fn();if(!Component){warnIfDebug(noRegistryFunctionReturn,name,"component","component",{ractive:ractive});return}"string"==typeof Component&&(Component=getComponent(ractive,Component));Component._fn=fn;instance.components[name]=Component}}return Component}function Component$detach(){var detached=this.instance.fragment.detach();Component_prototype_detach__detachHook.fire(this.instance);return detached}function Component$find(selector){return this.instance.fragment.find(selector)}function Component$findAll(selector,query){return this.instance.fragment.findAll(selector,query)}function Component$findAllComponents(selector,query){query._test(this,!0);this.instance.fragment&&this.instance.fragment.findAllComponents(selector,query)}function Component$findComponent(selector){return selector&&selector!==this.name?this.instance.fragment?this.instance.fragment.findComponent(selector):null:this.instance}function Component$findNextNode(){return this.parentFragment.findNextNode(this)}function Component$firstNode(){return this.rendered?this.instance.fragment.firstNode():null}function createAccessors(originalWrapper,value,template){function updateWrapper(wrapper){var keypath,ractive;wrapper.value=value;if(!wrapper.updating){ractive=wrapper.ractive;keypath=wrapper.keypath;wrapper.updating=!0;global_runloop.start(ractive);ractive.viewmodel.mark(keypath);global_runloop.end();wrapper.updating=!1}}var object,property,oldGet,oldSet,get,set;object=originalWrapper.obj;property=originalWrapper.prop;if(template&&!template.configurable){if("length"===property)return;throw new Error('Cannot use magic mode with property "'+property+'" - object is not configurable')}if(template){oldGet=template.get;oldSet=template.set}get=oldGet||function(){return value};set=function(v){oldSet&&oldSet(v);value=oldGet?oldGet():v;set._ractiveWrappers.forEach(updateWrapper)};set._ractiveWrappers=[originalWrapper];Object.defineProperty(object,property,{get:get,set:set,enumerable:!0,configurable:!0})}function Viewmodel$adapt(keypath,value){var len,i,adaptor,wrapped;if(this.adaptors){len=this.adaptors.length;for(i=0;len>i;i+=1){adaptor=this.adaptors[i];if(adaptor.filter(value,keypath,this.ractive)){wrapped=this.wrapped[keypath]=adaptor.wrap(this.ractive,value,keypath,getPrefixer(keypath));wrapped.value=value;return}}}}function prefixKeypath(obj,prefix){var key,prefixed={};if(!prefix)return obj;prefix+=".";for(key in obj)obj.hasOwnProperty(key)&&(prefixed[prefix+key]=obj[key]);return prefixed}function getPrefixer(rootKeypath){var rootDot;if(!prefixers[rootKeypath]){rootDot=rootKeypath?rootKeypath+".":"";prefixers[rootKeypath]=function(relativeKeypath,value){var obj;if("string"==typeof relativeKeypath){obj={};obj[rootDot+relativeKeypath]=value;return obj}return"object"==typeof relativeKeypath?rootDot?prefixKeypath(relativeKeypath,rootKeypath):relativeKeypath:void 0}}return prefixers[rootKeypath]}function getUpstreamChanges(changes){var i,keypath,upstreamChanges=[rootKeypath];i=changes.length;for(;i--;){keypath=changes[i].parent;for(;keypath&&!keypath.isRoot;){-1===changes.indexOf(keypath)&&addToArray(upstreamChanges,keypath);keypath=keypath.parent}}return upstreamChanges}function notifyPatternObservers(viewmodel,keypath,onlyDirect){var potentialWildcardMatches;updateMatchingPatternObservers(viewmodel,keypath);if(!onlyDirect){potentialWildcardMatches=keypath.wildcardMatches();potentialWildcardMatches.forEach(function(upstreamPattern){cascade(viewmodel,upstreamPattern,keypath)})}}function cascade(viewmodel,upstreamPattern,keypath){var group,map,actualChildKeypath;upstreamPattern=upstreamPattern.str||upstreamPattern;group=viewmodel.depsMap.patternObservers;map=group&&group[upstreamPattern];map&&map.forEach(function(childKeypath){actualChildKeypath=keypath.join(childKeypath.lastKey);updateMatchingPatternObservers(viewmodel,actualChildKeypath);cascade(viewmodel,childKeypath,actualChildKeypath)})}function updateMatchingPatternObservers(viewmodel,keypath){viewmodel.patternObservers.forEach(function(observer){observer.regex.test(keypath.str)&&observer.update(keypath)})}function Viewmodel$applyChanges(){function invalidateComputation(computation){var key=computation.key;if(computation.viewmodel===self){self.clearCache(key.str);computation.invalidate();changes.push(key);cascade(key)}else computation.viewmodel.mark(key)}function cascade(keypath){var map,computations;if(!self.noCascade.hasOwnProperty(keypath.str)){(computations=self.deps.computed[keypath.str])&&computations.forEach(invalidateComputation);(map=self.depsMap.computed[keypath.str])&&map.forEach(cascade)}}var changes,upstreamChanges,bindings,_this=this,self=this,hash={};changes=this.changes;if(changes.length){changes.slice().forEach(cascade);upstreamChanges=helpers_getUpstreamChanges(changes);upstreamChanges.forEach(function(keypath){var computations;-1===changes.indexOf(keypath)&&(computations=self.deps.computed[keypath.str])&&computations.forEach(invalidateComputation)});this.changes=[];if(this.patternObservers.length){upstreamChanges.forEach(function(keypath){return applyChanges_notifyPatternObservers(_this,keypath,!0)});changes.forEach(function(keypath){return applyChanges_notifyPatternObservers(_this,keypath)})}if(this.deps.observers){upstreamChanges.forEach(function(keypath){return notifyUpstreamDependants(_this,null,keypath,"observers")});notifyAllDependants(this,changes,"observers")}if(this.deps["default"]){bindings=[];upstreamChanges.forEach(function(keypath){return notifyUpstreamDependants(_this,bindings,keypath,"default")});bindings.length&&notifyBindings(this,bindings,changes);notifyAllDependants(this,changes,"default")}changes.forEach(function(keypath){hash[keypath.str]=_this.get(keypath)});this.implicitChanges={};this.noCascade={};return hash}}function notifyUpstreamDependants(viewmodel,bindings,keypath,groupName){var dependants,value;if(dependants=findDependants(viewmodel,keypath,groupName)){value=viewmodel.get(keypath);dependants.forEach(function(d){bindings&&d.refineValue?bindings.push(d):d.setValue(value)})}}function notifyBindings(viewmodel,bindings,changes){bindings.forEach(function(binding){for(var useSet=!1,i=0,length=changes.length,refinements=[];length>i;){var keypath=changes[i];if(keypath===binding.keypath){useSet=!0;break}keypath.slice(0,binding.keypath.length)===binding.keypath&&refinements.push(keypath);i++}useSet&&binding.setValue(viewmodel.get(binding.keypath));refinements.length&&binding.refineValue(refinements)})}function notifyAllDependants(viewmodel,keypaths,groupName){function addKeypaths(keypaths){keypaths.forEach(addKeypath);keypaths.forEach(cascade)}function addKeypath(keypath){var deps=findDependants(viewmodel,keypath,groupName);deps&&queue.push({keypath:keypath,deps:deps})}function cascade(keypath){var childDeps;(childDeps=viewmodel.depsMap[groupName][keypath.str])&&addKeypaths(childDeps)}function dispatch(set){var value=viewmodel.get(set.keypath);set.deps.forEach(function(d){return d.setValue(value)})}var queue=[];addKeypaths(keypaths);queue.forEach(dispatch)}function findDependants(viewmodel,keypath,groupName){var group=viewmodel.deps[groupName];return group?group[keypath.str]:null}function Viewmodel$capture(){this.captureGroups.push([])}function Viewmodel$clearCache(keypath,keepExistingWrapper){var cacheMap,wrapper;keepExistingWrapper||(wrapper=this.wrapped[keypath])&&wrapper.teardown()!==!1&&(this.wrapped[keypath]=null);this.cache[keypath]=void 0;if(cacheMap=this.cacheMap[keypath])for(;cacheMap.length;)this.clearCache(cacheMap.pop())}function isUnresolved(viewmodel,keypath){var key=keypath.firstKey;return!(key in viewmodel.data||key in viewmodel.computations||key in viewmodel.mappings)}function Viewmodel$compute(key,signature){var computation=new Computation_Computation(key,signature);this.ready&&computation.init(this);return this.computations[key.str]=computation}function Viewmodel$get(keypath,options){var value,computation,wrapped,captureGroup,key,cache=this.cache,keypathStr=keypath.str;options=options||viewmodel_prototype_get__empty;options.capture&&(captureGroup=lastItem(this.captureGroups))&&(~captureGroup.indexOf(keypath)||captureGroup.push(keypath));if(hasOwn.call(this.mappings,keypath.firstKey))return this.mappings[keypath.firstKey].get(keypath,options);if(keypath.isSpecial)return keypath.value;if(void 0===cache[keypathStr]){if((computation=this.computations[keypathStr])&&!computation.bypass){value=computation.get();this.adapt(keypathStr,value)}else if(wrapped=this.wrapped[keypathStr])value=wrapped.value;else if(keypath.isRoot){this.adapt("",this.data);value=this.data}else value=retrieve(this,keypath);cache[keypathStr]=value}else value=cache[keypathStr];!options.noUnwrap&&(wrapped=this.wrapped[keypathStr])&&(value=wrapped.get());if(keypath.isRoot&&options.fullRootGet)for(key in this.mappings)value[key]=this.mappings[key].getValue();return value===FAILED_LOOKUP?void 0:value}function retrieve(viewmodel,keypath){var parentValue,cacheMap,value,wrapped;parentValue=viewmodel.get(keypath.parent);(wrapped=viewmodel.wrapped[keypath.parent.str])&&(parentValue=wrapped.get());if(null!==parentValue&&void 0!==parentValue){(cacheMap=viewmodel.cacheMap[keypath.parent.str])?-1===cacheMap.indexOf(keypath.str)&&cacheMap.push(keypath.str):viewmodel.cacheMap[keypath.parent.str]=[keypath.str];if("object"==typeof parentValue&&!(keypath.lastKey in parentValue))return viewmodel.cache[keypath.str]=FAILED_LOOKUP;value=parentValue[keypath.lastKey];viewmodel.adapt(keypath.str,value,!1);viewmodel.cache[keypath.str]=value;return value}}function Viewmodel$init(){var key;for(key in this.computations)this.computations[key].init(this)}function Viewmodel$map(key,options){var mapping=this.mappings[key.str]=new Mapping(key,options);mapping.initViewmodel(this);return mapping}function Viewmodel$mark(keypath,options){var computation,keypathStr=keypath.str;if(options){options.implicit&&(this.implicitChanges[keypathStr]=!0);options.noCascade&&(this.noCascade[keypathStr]=!0)}(computation=this.computations[keypathStr])&&computation.invalidate();-1===this.changes.indexOf(keypath)&&this.changes.push(keypath);var keepExistingWrapper=options?options.keepExistingWrapper:!1;this.clearCache(keypathStr,keepExistingWrapper);this.ready&&this.onchange()}function Viewmodel$merge(keypath,currentArray,array,options){var oldArray,newArray,comparator,newIndices;this.mark(keypath);if(options&&options.compare){comparator=getComparatorFunction(options.compare);try{oldArray=currentArray.map(comparator);newArray=array.map(comparator)}catch(err){warnIfDebug('merge(): "%s" comparison failed. Falling back to identity checking',keypath);oldArray=currentArray;newArray=array}}else{oldArray=currentArray;newArray=array}newIndices=mapOldToNewIndex(oldArray,newArray);this.smartUpdate(keypath,array,newIndices,currentArray.length!==array.length)}function stringify(item){return JSON.stringify(item)}function getComparatorFunction(comparator){if(comparator===!0)return stringify;if("string"==typeof comparator){comparators[comparator]||(comparators[comparator]=function(item){return item[comparator]});return comparators[comparator]}if("function"==typeof comparator)return comparator;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Viewmodel$register(keypath,dependant){var mapping,depsByKeypath,deps,group=void 0===arguments[2]?"default":arguments[2];if(!dependant.isStatic)if(mapping=this.mappings[keypath.firstKey])mapping.register(keypath,dependant,group);else{depsByKeypath=this.deps[group]||(this.deps[group]={});deps=depsByKeypath[keypath.str]||(depsByKeypath[keypath.str]=[]);deps.push(dependant);this.depsMap[group]||(this.depsMap[group]={});keypath.isRoot||register__updateDependantsMap(this,keypath,group)}}function register__updateDependantsMap(viewmodel,keypath,group){for(var map,parent,keypathStr;!keypath.isRoot;){map=viewmodel.depsMap[group];parent=map[keypath.parent.str]||(map[keypath.parent.str]=[]);keypathStr=keypath.str;if(void 0===parent["_"+keypathStr]){parent["_"+keypathStr]=0;parent.push(keypath)}parent["_"+keypathStr]+=1;keypath=keypath.parent}}function Viewmodel$release(){return this.captureGroups.pop()}function Viewmodel$reset(data){this.data=data;this.clearCache("")}function Viewmodel$set(keypath,value){var mapping,computation,wrapper,keepExistingWrapper,options=void 0===arguments[2]?{}:arguments[2];if(!options.noMapping&&(mapping=this.mappings[keypath.firstKey]))return mapping.set(keypath,value);computation=this.computations[keypath.str];if(computation){if(computation.setting)return;computation.set(value);value=computation.get()}if(!isEqual(this.cache[keypath.str],value)){wrapper=this.wrapped[keypath.str];if(wrapper&&wrapper.reset){keepExistingWrapper=wrapper.reset(value)!==!1;keepExistingWrapper&&(value=wrapper.get())}computation||keepExistingWrapper||resolveSet(this,keypath,value);options.silent?this.clearCache(keypath.str):this.mark(keypath)}}function resolveSet(viewmodel,keypath,value){var wrapper,parentValue,wrapperSet,valueSet;wrapperSet=function(){if(wrapper.set)wrapper.set(keypath.lastKey,value);else{parentValue=wrapper.get();valueSet()}};valueSet=function(){if(!parentValue){parentValue=createBranch(keypath.lastKey);viewmodel.set(keypath.parent,parentValue,{silent:!0})}parentValue[keypath.lastKey]=value};wrapper=viewmodel.wrapped[keypath.parent.str];if(wrapper)wrapperSet();else{parentValue=viewmodel.get(keypath.parent);(wrapper=viewmodel.wrapped[keypath.parent.str])?wrapperSet():valueSet()}}function Viewmodel$smartUpdate(keypath,array,newIndices){var dependants,oldLength,i,_this=this;oldLength=newIndices.length;newIndices.forEach(function(newIndex,oldIndex){-1===newIndex&&_this.mark(keypath.join(oldIndex),noCascadeOption)});this.set(keypath,array,{silent:!0});(dependants=this.deps["default"][keypath.str])&&dependants.filter(canShuffle).forEach(function(d){return d.shuffle(newIndices,array)});if(oldLength!==array.length){this.mark(keypath.join("length"),implicitOption);for(i=newIndices.touchedFrom;i<array.length;i+=1)this.mark(keypath.join(i));for(i=array.length;oldLength>i;i+=1)this.mark(keypath.join(i),noCascadeOption)}}function canShuffle(dependant){return"function"==typeof dependant.shuffle}function Viewmodel$teardown(){var unresolvedImplicitDependency,_this=this;Object.keys(this.cache).forEach(function(keypath){return _this.clearCache(keypath)});for(;unresolvedImplicitDependency=this.unresolvedImplicitDependencies.pop();)unresolvedImplicitDependency.teardown()}function Viewmodel$unregister(keypath,dependant){var mapping,deps,index,group=void 0===arguments[2]?"default":arguments[2];if(!dependant.isStatic){if(mapping=this.mappings[keypath.firstKey])return mapping.unregister(keypath,dependant,group);
deps=this.deps[group][keypath.str];index=deps.indexOf(dependant);if(-1===index)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");deps.splice(index,1);keypath.isRoot||unregister__updateDependantsMap(this,keypath,group)}}function unregister__updateDependantsMap(viewmodel,keypath,group){for(var map,parent;!keypath.isRoot;){map=viewmodel.depsMap[group];parent=map[keypath.parent.str];parent["_"+keypath.str]-=1;if(!parent["_"+keypath.str]){removeFromArray(parent,keypath);parent["_"+keypath.str]=void 0}keypath=keypath.parent}}function HookQueue(event){this.hook=new hooks_Hook(event);this.inProcess={};this.queue={}}function getChildQueue(queue,ractive){return queue[ractive._guid]||(queue[ractive._guid]=[])}function fire(hookQueue,ractive){var childQueue=getChildQueue(hookQueue.queue,ractive);hookQueue.hook.fire(ractive);for(;childQueue.length;)fire(hookQueue,childQueue.shift());delete hookQueue.queue[ractive._guid]}function getComputationSignatures(ractive,computed){var key,signatures={};for(key in computed)signatures[key]=getComputationSignature(ractive,key,computed[key]);return signatures}function getComputationSignature(ractive,key,signature){var getter,setter;"function"==typeof signature&&(getter=helpers_getComputationSignatures__bind(signature,ractive));"string"==typeof signature&&(getter=createFunctionFromString(ractive,signature));if("object"==typeof signature){"string"==typeof signature.get?getter=createFunctionFromString(ractive,signature.get):"function"==typeof signature.get?getter=helpers_getComputationSignatures__bind(signature.get,ractive):fatal("`%s` computation must have a `get()` method",key);"function"==typeof signature.set&&(setter=helpers_getComputationSignatures__bind(signature.set,ractive))}return{getter:getter,setter:setter}}function createFunctionFromString(ractive,str){var functionBody,hasThis,fn;functionBody="return ("+str.replace(pattern,function(match,keypath){hasThis=!0;return'__ractive.get("'+keypath+'")'})+");";hasThis&&(functionBody="var __ractive = this; "+functionBody);fn=new Function(functionBody);return hasThis?fn.bind(ractive):fn}function helpers_getComputationSignatures__bind(fn,context){return/this/.test(fn.toString())?fn.bind(context):fn}function initialiseRactiveInstance(ractive){var el,viewmodel,userOptions=void 0===arguments[1]?{}:arguments[1],options=void 0===arguments[2]?{}:arguments[2];_Ractive.DEBUG&&welcome();initialiseProperties(ractive,options);defineProperty(ractive,"data",{get:deprecateRactiveData});constructHook.fire(ractive,userOptions);initialise__registryNames.forEach(function(name){ractive[name]=utils_object__extend(create(ractive.constructor[name]||null),userOptions[name])});viewmodel=new viewmodel_Viewmodel({adapt:getAdaptors(ractive,ractive.adapt,userOptions),data:custom_data.init(ractive.constructor,ractive,userOptions),computed:helpers_getComputationSignatures(ractive,utils_object__extend(create(ractive.constructor.prototype.computed),userOptions.computed)),mappings:options.mappings,ractive:ractive,onchange:function(){return global_runloop.addRactive(ractive)}});ractive.viewmodel=viewmodel;viewmodel.init();config_config.init(ractive.constructor,ractive,userOptions);configHook.fire(ractive);initHook.begin(ractive);if(ractive.template){var cssIds=void 0;if(options.cssIds||ractive.cssId){cssIds=options.cssIds?options.cssIds.slice():[];ractive.cssId&&cssIds.push(ractive.cssId)}ractive.fragment=new virtualdom_Fragment({template:ractive.template,root:ractive,owner:ractive,cssIds:cssIds})}initHook.end(ractive);if(el=getElement(ractive.el)){var promise=ractive.render(el,ractive.append);_Ractive.DEBUG_PROMISES&&promise["catch"](function(err){warnOnceIfDebug("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");warnIfDebug("An error happened during rendering",{ractive:ractive});err.stack&&logIfDebug(err.stack);throw err})}}function getAdaptors(ractive,protoAdapt,userOptions){function lookup(adaptor){if("string"==typeof adaptor){adaptor=findInViewHierarchy("adaptors",ractive,adaptor);adaptor||fatal(missingPlugin(adaptor,"adaptor"))}return adaptor}var adapt,magic,modifyArrays;protoAdapt=protoAdapt.map(lookup);adapt=ensureArray(userOptions.adapt).map(lookup);adapt=initialise__combine(protoAdapt,adapt);magic="magic"in userOptions?userOptions.magic:ractive.magic;modifyArrays="modifyArrays"in userOptions?userOptions.modifyArrays:ractive.modifyArrays;if(magic){if(!environment__magic)throw new Error("Getters and setters (magic mode) are not supported in this browser");modifyArrays&&adapt.push(magicArray);adapt.push(adaptors_magic)}modifyArrays&&adapt.push(array_index);return adapt}function initialise__combine(a,b){for(var c=a.slice(),i=b.length;i--;)~c.indexOf(b[i])||c.push(b[i]);return c}function initialiseProperties(ractive,options){ractive._guid="r-"+initialise__uid++;ractive._subs=create(null);ractive._config={};ractive._twowayBindings=create(null);ractive._animations=[];ractive.nodes={};ractive._liveQueries=[];ractive._liveComponentQueries=[];ractive._boundFunctions=[];ractive._observers=[];if(options.component){ractive.parent=options.parent;ractive.container=options.container||null;ractive.root=ractive.parent.root;ractive.component=options.component;options.component.instance=ractive;ractive._inlinePartials=options.inlinePartials}else{ractive.root=ractive;ractive.parent=ractive.container=null}}function deprecateRactiveData(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function ComplexParameter(component,template,callback){this.parentFragment=component.parentFragment;this.callback=callback;this.fragment=new virtualdom_Fragment({template:template,root:component.root,owner:this});this.update()}function createResolver(component,template,callback){var resolver;template.r?resolver=Resolvers_createReferenceResolver(component,template.r,callback):template.x?resolver=new Resolvers_ExpressionResolver(component,component.parentFragment,template.x,callback):template.rx&&(resolver=new ReferenceExpressionResolver_ReferenceExpressionResolver(component,template.rx,callback));return resolver}function isSingleInterpolator(template){return 1===template.length&&template[0].t===INTERPOLATOR}function propagateEvents(component,eventsDescriptor){var eventName;for(eventName in eventsDescriptor)eventsDescriptor.hasOwnProperty(eventName)&&propagateEvent(component.instance,component.root,eventName,eventsDescriptor[eventName])}function propagateEvent(childInstance,parentInstance,eventName,proxyEventName){"string"!=typeof proxyEventName&&fatal("Components currently only support simple events - you cannot include arguments. Sorry!");childInstance.on(eventName,function(){var event,args;arguments.length&&arguments[0]&&arguments[0].node&&(event=Array.prototype.shift.call(arguments));args=Array.prototype.slice.call(arguments);shared_fireEvent(parentInstance,proxyEventName,{event:event,args:args});return!1})}function Component$init(options,Component){var parentFragment,root;if(!Component)throw new Error('Component "'+this.name+'" not found');parentFragment=this.parentFragment=options.parentFragment;root=parentFragment.root;this.root=root;this.type=COMPONENT;this.name=options.template.e;this.index=options.index;this.indexRefBindings={};this.yielders={};this.resolvers=[];createInstance(this,Component,options.template.a,options.template.f,options.template.p);initialise_propagateEvents(this,options.template.v);(options.template.t0||options.template.t1||options.template.t2||options.template.o)&&warnIfDebug('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});initialise_updateLiveQueries(this)}function Component$rebind(oldKeypath,newKeypath){function rebind(x){x.rebind(oldKeypath,newKeypath)}var query;this.resolvers.forEach(rebind);for(var k in this.yielders)this.yielders[k][0]&&rebind(this.yielders[k][0]);(query=this.root._liveComponentQueries["_"+this.name])&&query._makeDirty()}function Component$render(){var instance=this.instance;instance.render(this.parentFragment.getNode());this.rendered=!0;return instance.fragment.detach()}function Component$toString(){return this.instance.fragment.toString()}function Component$unbind(){var instance=this.instance;this.resolvers.forEach(methodCallers__unbind);removeFromLiveComponentQueries(this);instance._observers.forEach(cancel);instance.fragment.unbind();instance.viewmodel.teardown();instance.fragment.rendered&&instance.el.__ractive_instances__&&removeFromArray(instance.el.__ractive_instances__,instance);Component_prototype_unbind__teardownHook.fire(instance)}function removeFromLiveComponentQueries(component){var instance,query;instance=component.root;do(query=instance._liveComponentQueries["_"+component.name])&&query._remove(component);while(instance=instance.parent)}function Component$unrender(shouldDestroy){this.shouldDestroy=shouldDestroy;this.instance.unrender()}function Fragment$init(options){var _this=this;this.owner=options.owner;this.parent=this.owner.parentFragment;this.root=options.root;this.pElement=options.pElement;this.context=options.context;this.index=options.index;this.key=options.key;this.registeredIndexRefs=[];this.cssIds="cssIds"in options?options.cssIds:this.parent?this.parent.cssIds:null;this.items=options.template.map(function(template,i){return createItem({parentFragment:_this,pElement:options.pElement,template:template,index:i})});this.value=this.argsList=null;this.dirtyArgs=this.dirtyValue=!0;this.bound=!0}function createItem(options){if("string"==typeof options.template)return new items_Text(options);switch(options.template.t){case YIELDER:return new items_Yielder(options);case INTERPOLATOR:return new items_Interpolator(options);case SECTION:return new _Section(options);case TRIPLE:return new _Triple(options);case ELEMENT:var constructor=void 0;return(constructor=Component_getComponent(options.parentFragment.root,options.template.e))?new _Component(options,constructor):new _Element(options);case PARTIAL:return new _Partial(options);case COMMENT:return new items_Comment(options);case DOCTYPE:return new items_Doctype(options);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Fragment$rebind(oldKeypath,newKeypath){(!this.owner||this.owner.hasContext)&&assignNewKeypath(this,"context",oldKeypath,newKeypath);this.items.forEach(function(item){item.rebind&&item.rebind(oldKeypath,newKeypath)})}function Fragment$render(){var result;if(1===this.items.length)result=this.items[0].render();else{result=document.createDocumentFragment();this.items.forEach(function(item){result.appendChild(item.render())})}this.rendered=!0;return result}function Fragment$toString(escape){return this.items?this.items.map(escape?toEscapedString:Fragment_prototype_toString__toString).join(""):""}function Fragment_prototype_toString__toString(item){return item.toString()}function toEscapedString(item){return item.toString(!0)}function Fragment$unbind(){if(this.bound){this.items.forEach(unbindItem);this.bound=!1}}function unbindItem(item){item.unbind&&item.unbind()}function Fragment$unrender(shouldDestroy){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(i){return i.unrender(shouldDestroy)});this.rendered=!1}function Ractive$reset(data){var promise,wrapper,changes,i,rerender;data=data||{};if("object"!=typeof data)throw new Error("The reset method takes either no arguments, or an object containing new data");(wrapper=this.viewmodel.wrapped[""])&&wrapper.reset?wrapper.reset(data)===!1&&this.viewmodel.reset(data):this.viewmodel.reset(data);changes=config_config.reset(this);i=changes.length;for(;i--;)if(shouldRerender.indexOf(changes[i])>-1){rerender=!0;break}if(rerender){var component=void 0;this.viewmodel.mark(rootKeypath);(component=this.component)&&(component.shouldDestroy=!0);this.unrender();component&&(component.shouldDestroy=!1);if(this.fragment.template!==this.template){this.fragment.unbind();this.fragment=new virtualdom_Fragment({template:this.template,root:this,owner:this})}promise=this.render(this.el,this.anchor)}else{promise=global_runloop.start(this,!0);this.viewmodel.mark(rootKeypath);global_runloop.end()}resetHook.fire(this,data);return promise}function Ractive$resetTemplate(template){var transitionsEnabled,component;template_template.init(null,this,{template:template});transitionsEnabled=this.transitionsEnabled;this.transitionsEnabled=!1;(component=this.component)&&(component.shouldDestroy=!0);this.unrender();component&&(component.shouldDestroy=!1);this.fragment.unbind();this.fragment=new virtualdom_Fragment({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=transitionsEnabled}function Ractive$set(keypath,value){var map,promise;promise=global_runloop.start(this,!0);if(isObject(keypath)){map=keypath;for(keypath in map)if(map.hasOwnProperty(keypath)){value=map[keypath];set(this,keypath,value)}}else set(this,keypath,value);global_runloop.end();return promise}function set(ractive,keypath,value){keypath=getKeypath(normalise(keypath));keypath.isPattern?getMatchingKeypaths(ractive,keypath).forEach(function(keypath){ractive.viewmodel.set(keypath,value)}):ractive.viewmodel.set(keypath,value)}function Ractive$subtract(keypath,d){return shared_add(this,keypath,void 0===d?-1:-d)}function Ractive$teardown(){var promise;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(cancel);this.fragment.rendered&&this.el.__ractive_instances__&&removeFromArray(this.el.__ractive_instances__,this);this.shouldDestroy=!0;promise=this.fragment.rendered?this.unrender():utils_Promise.resolve();Ractive_prototype_teardown__teardownHook.fire(this);this._boundFunctions.forEach(deleteFunctionCopy);return promise}function deleteFunctionCopy(bound){delete bound.fn[bound.prop]}function Ractive$toggle(keypath){var _this=this;if("string"!=typeof keypath)throw new TypeError(badArguments);var changes=void 0;if(/\*/.test(keypath)){changes={};getMatchingKeypaths(this,getKeypath(normalise(keypath))).forEach(function(keypath){changes[keypath.str]=!_this.viewmodel.get(keypath)});return this.set(changes)}return this.set(keypath,!this.get(keypath))}function Ractive$toHTML(){return this.fragment.toString(!0)}function Ractive$unrender(){var promise,shouldDestroy;if(!this.fragment.rendered){warnIfDebug("ractive.unrender() was called on a Ractive instance that was not rendered");return utils_Promise.resolve()}promise=global_runloop.start(this,!0);shouldDestroy=!this.component||this.component.shouldDestroy||this.shouldDestroy;for(;this._animations[0];)this._animations[0].stop();this.fragment.unrender(shouldDestroy);removeFromArray(this.el.__ractive_instances__,this);unrenderHook.fire(this);global_runloop.end();return promise}function Ractive$update(keypath){var promise;keypath=getKeypath(keypath)||rootKeypath;promise=global_runloop.start(this,!0);this.viewmodel.mark(keypath);global_runloop.end();updateHook.fire(this,keypath);return promise}function Ractive$updateModel(keypath,cascade){var values,key,bindings;if("string"!=typeof keypath||cascade){bindings=[];for(key in this._twowayBindings)(!keypath||getKeypath(key).equalsOrStartsWith(keypath))&&bindings.push.apply(bindings,this._twowayBindings[key])}else bindings=this._twowayBindings[keypath];values=consolidate(this,bindings);return this.set(values)}function consolidate(ractive,bindings){var values={},checkboxGroups=[];bindings.forEach(function(b){var oldValue,newValue;if(!b.radioName||b.element.node.checked)if(b.checkboxName){if(!checkboxGroups[b.keypath.str]&&!b.changed()){checkboxGroups.push(b.keypath);checkboxGroups[b.keypath.str]=b}}else{oldValue=b.attribute.value;newValue=b.getValue();arrayContentsMatch(oldValue,newValue)||isEqual(oldValue,newValue)||(values[b.keypath.str]=newValue)}});checkboxGroups.length&&checkboxGroups.forEach(function(keypath){var binding,oldValue,newValue;binding=checkboxGroups[keypath.str];oldValue=binding.attribute.value;newValue=binding.getValue();arrayContentsMatch(oldValue,newValue)||(values[keypath.str]=newValue)});return values}function needsSuper(method,superMethod){return"function"==typeof superMethod&&/_super/.test(method)}function unwrap(Child){for(var options={};Child;){addRegistries(Child,options);addOtherOptions(Child,options);Child=Child._Parent!==_Ractive?Child._Parent:!1}return options}function addRegistries(Child,options){config_registries.forEach(function(r){addRegistry(r.useDefaults?Child.prototype:Child,options,r.name)})}function addRegistry(target,options,name){var registry,keys=Object.keys(target[name]);if(keys.length){(registry=options[name])||(registry=options[name]={});keys.filter(function(key){return!(key in registry)}).forEach(function(key){return registry[key]=target[name][key]})}}function addOtherOptions(Child,options){Object.keys(Child.prototype).forEach(function(key){if("computed"!==key){var value=Child.prototype[key];if(key in options){if("function"==typeof options[key]&&"function"==typeof value&&options[key]._method){var result=void 0,needsSuper=value._method;needsSuper&&(value=value._method);result=wrapMethod(options[key]._method,value);needsSuper&&(result._method=result);options[key]=result}}else options[key]=value._method?value._method:value}})}function _extend__extend(){for(var _len=arguments.length,options=Array(_len),_key=0;_len>_key;_key++)options[_key]=arguments[_key];return options.length?options.reduce(extendOne,this):extendOne(this)}function extendOne(Parent){var Child,proto,options=void 0===arguments[1]?{}:arguments[1];options.prototype instanceof _Ractive&&(options=unwrapExtended(options));Child=function(options){if(!(this instanceof Child))return new Child(options);initialise(this,options)};proto=create(Parent.prototype);proto.constructor=Child;defineProperties(Child,{defaults:{value:proto},extend:{value:_extend__extend,writable:!0,configurable:!0},_Parent:{value:Parent}});config_config.extend(Parent,proto,options);custom_data.extend(Parent,proto,options);options.computed&&(proto.computed=utils_object__extend(create(Parent.prototype.computed),options.computed));Child.prototype=proto;return Child}var isClient,isJsdom,hasConsole,environment__magic,namespaces,svg,vendors,TEMPLATE_VERSION=3,defaultOptions={el:void 0,append:!1,template:{v:TEMPLATE_VERSION,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},config_defaults=defaultOptions,static_easing={linear:function(pos){return pos},easeIn:function(pos){return Math.pow(pos,3)},easeOut:function(pos){return Math.pow(pos-1,3)+1},easeInOut:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)}};isClient="object"==typeof document;isJsdom="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName);hasConsole="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0});environment__magic=!0}catch(e){environment__magic=!1}namespaces={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};svg="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");vendors=["o","ms","moz","webkit"];var createElement,matches,dom__div,methodNames,unprefixed,prefixed,dom__i,j,makeFunction;createElement=svg?function(type,ns){return ns&&ns!==namespaces.html?document.createElementNS(ns,type):document.createElement(type)}:function(type,ns){if(ns&&ns!==namespaces.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(type)};if(isClient){dom__div=createElement("div");methodNames=["matches","matchesSelector"];makeFunction=function(methodName){return function(node,selector){return node[methodName](selector)}};dom__i=methodNames.length;for(;dom__i--&&!matches;){unprefixed=methodNames[dom__i];if(dom__div[unprefixed])matches=makeFunction(unprefixed);else{j=vendors.length;for(;j--;){prefixed=vendors[dom__i]+unprefixed.substr(0,1).toUpperCase()+unprefixed.substring(1);if(dom__div[prefixed]){matches=makeFunction(prefixed);break}}}}matches||(matches=function(node,selector){var nodes,parentNode,i;parentNode=node.parentNode;if(!parentNode){dom__div.innerHTML="";parentNode=dom__div;node=node.cloneNode();dom__div.appendChild(node)}nodes=parentNode.querySelectorAll(selector);i=nodes.length;for(;i--;)if(nodes[i]===node)return!0;return!1})}else matches=null;var create,defineProperty,defineProperties,legacy=null;try{Object.defineProperty({},"test",{value:0});isClient&&Object.defineProperty(document.createElement("div"),"test",{value:0});defineProperty=Object.defineProperty}catch(err){defineProperty=function(obj,prop,desc){obj[prop]=desc.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(err){throw err}isClient&&Object.defineProperties(createElement("div"),{test:{value:0}});defineProperties=Object.defineProperties}catch(err){defineProperties=function(obj,props){var prop;for(prop in props)props.hasOwnProperty(prop)&&defineProperty(obj,prop,props[prop])}}try{Object.create(null);create=Object.create}catch(err){create=function(){var F=function(){};return function(proto,props){var obj;if(null===proto)return{};F.prototype=proto;obj=new F;props&&Object.defineProperties(obj,props);return obj}}()}var log,printWarning,welcome,hasOwn=Object.prototype.hasOwnProperty,is__toString=Object.prototype.toString,arrayLikePattern=/^\[object (?:Array|FileList)\]$/,noop=function(){},alreadyWarned={};hasConsole?!function(){var welcomeIntro=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],welcomeMessage="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";welcome=function(){var hasGroup=!!console.groupCollapsed;console[hasGroup?"groupCollapsed":"log"].apply(console,welcomeIntro);console.log(welcomeMessage);hasGroup&&console.groupEnd(welcomeIntro);welcome=noop};printWarning=function(message,args){welcome();if("object"==typeof args[args.length-1]){var options=args.pop(),ractive=options?options.ractive:null;if(ractive){var _name=void 0;ractive.component&&(_name=ractive.component.name)&&(message="<"+_name+"> "+message);var node=void 0;(node=options.node||ractive.fragment&&ractive.fragment.rendered&&ractive.find("*"))&&args.push(node)}}console.warn.apply(console,["%cRactive.js: %c"+message,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(args))};log=function(){console.log.apply(console,arguments)}}():printWarning=log=welcome=noop;var badArguments="Bad arguments",noRegistryFunctionReturn='A function was specified for "%s" %s, but no %s was returned',missingPlugin=function(name,type){return'Missing "'+name+'" '+type+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+type+"s"},interpolate=function(from,to,ractive,type){if(from===to)return snap(to);if(type){var interpol=findInViewHierarchy("interpolators",ractive,type);if(interpol)return interpol(from,to)||snap(to);fatal(missingPlugin(type,"interpolator"))}return static_interpolators.number(from,to)||static_interpolators.array(from,to)||static_interpolators.object(from,to)||snap(to)},shared_interpolate=interpolate,interpolators={number:function(from,to){var delta;if(!is__isNumeric(from)||!is__isNumeric(to))return null;from=+from;to=+to;delta=to-from;return delta?function(t){return from+t*delta}:function(){return from}},array:function(from,to){var intermediate,interpolators,len,i;if(!isArray(from)||!isArray(to))return null;intermediate=[];interpolators=[];i=len=Math.min(from.length,to.length);for(;i--;)interpolators[i]=shared_interpolate(from[i],to[i]);for(i=len;i<from.length;i+=1)intermediate[i]=from[i];for(i=len;i<to.length;i+=1)intermediate[i]=to[i];return function(t){for(var i=len;i--;)intermediate[i]=interpolators[i](t);return intermediate}},object:function(from,to){var properties,len,interpolators,intermediate,prop;if(!isObject(from)||!isObject(to))return null;properties=[];intermediate={};interpolators={};for(prop in from)if(hasOwn.call(from,prop))if(hasOwn.call(to,prop)){properties.push(prop);interpolators[prop]=shared_interpolate(from[prop],to[prop])}else intermediate[prop]=from[prop];for(prop in to)hasOwn.call(to,prop)&&!hasOwn.call(from,prop)&&(intermediate[prop]=to[prop]);len=properties.length;return function(t){for(var prop,i=len;i--;){prop=properties[i];intermediate[prop]=interpolators[prop](t)}return intermediate}}},static_interpolators=interpolators,utils_getPotentialWildcardMatches=getPotentialWildcardMatches,starMaps={},refPattern=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,patternPattern=/\*/,keypathCache={},Keypath=function(str){var keys=str.split(".");this.str=str;if("@"===str[0]){this.isSpecial=!0;this.value=decodeKeypath(str)}this.firstKey=keys[0];this.lastKey=keys.pop();this.isPattern=patternPattern.test(str);this.parent=""===str?null:getKeypath(keys.join("."));this.isRoot=!str};Keypath.prototype={equalsOrStartsWith:function(keypath){return keypath===this||this.startsWith(keypath)},join:function(str){return getKeypath(this.isRoot?String(str):this.str+"."+str)},replace:function(oldKeypath,newKeypath){return this===oldKeypath?newKeypath:this.startsWith(oldKeypath)?null===newKeypath?newKeypath:getKeypath(this.str.replace(oldKeypath.str+".",newKeypath.str+".")):void 0},startsWith:function(keypath){return keypath?keypath&&this.str.substr(0,keypath.str.length+1)===keypath.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=utils_getPotentialWildcardMatches(this.str))}};var requestAnimationFrame,rootKeypath=getKeypath(""),shared_add=add,shared_add__errorMessage="Cannot add to a non-numeric value",prototype_add=Ractive$add;if("undefined"==typeof window)requestAnimationFrame=null;else{!function(vendors,lastTime,window){var x,setTimeout;if(!window.requestAnimationFrame){for(x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){setTimeout=window.setTimeout;window.requestAnimationFrame=function(callback){var currTime,timeToCall,id;currTime=Date.now();timeToCall=Math.max(0,16-(currTime-lastTime));id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}}}(vendors,0,window);requestAnimationFrame=window.requestAnimationFrame}var getTime,rAF=requestAnimationFrame;getTime="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var utils_getTime=getTime,deprecations={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};Hook.prototype.fire=function(ractive,arg){function call(method){if(ractive[method]){arg?ractive[method](arg):ractive[method]();return!0}}call(this.method);!ractive[this.method]&&this.deprecate&&call(this.deprecate.deprecated)&&(this.deprecate.message?warnIfDebug(this.deprecate.message):warnIfDebug('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));arg?ractive.fire(this.event,arg):ractive.fire(this.event)};var _Promise,hooks_Hook=Hook,PENDING={},FULFILLED={},REJECTED={};if("function"==typeof Promise)_Promise=Promise;else{_Promise=function(callback){var result,dispatchHandlers,makeResolver,fulfil,reject,promise,fulfilledHandlers=[],rejectedHandlers=[],state=PENDING;makeResolver=function(newState){return function(value){if(state===PENDING){result=value;state=newState;dispatchHandlers=makeDispatcher(state===FULFILLED?fulfilledHandlers:rejectedHandlers,result);wait(dispatchHandlers)}}};fulfil=makeResolver(FULFILLED);reject=makeResolver(REJECTED);try{callback(fulfil,reject)}catch(err){reject(err)}promise={then:function(onFulfilled,onRejected){var promise2=new _Promise(function(fulfil,reject){var processResolutionHandler=function(handler,handlers,forward){"function"==typeof handler?handlers.push(function(p1result){var x;try{x=handler(p1result);utils_Promise__resolve(promise2,x,fulfil,reject)}catch(err){reject(err)}}):handlers.push(forward)};processResolutionHandler(onFulfilled,fulfilledHandlers,fulfil);processResolutionHandler(onRejected,rejectedHandlers,reject);state!==PENDING&&wait(dispatchHandlers)});return promise2}};promise["catch"]=function(onRejected){return this.then(null,onRejected)};return promise};_Promise.all=function(promises){return new _Promise(function(fulfil,reject){var pending,i,processPromise,result=[];if(promises.length){processPromise=function(promise,i){if(promise&&"function"==typeof promise.then)promise.then(function(value){result[i]=value;--pending||fulfil(result)},reject);else{result[i]=promise;--pending||fulfil(result)}};pending=i=promises.length;for(;i--;)processPromise(promises[i],i)}else fulfil(result)})};_Promise.resolve=function(value){return new _Promise(function(fulfil){fulfil(value)})};_Promise.reject=function(reason){return new _Promise(function(fulfil,reject){reject(reason)})}}var utils_Promise=_Promise,getInnerContext=function(fragment){do if(void 0!==fragment.context)return fragment.context;while(fragment=fragment.parent);return rootKeypath},shared_resolveRef=resolveRef,TransitionManager=function(callback,parent){this.callback=callback;this.parent=parent;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.decoratorQueue=[];this.outrosComplete=!1;parent&&parent.addChild(this)};TransitionManager.prototype={addChild:function(child){this.children.push(child);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1;
check(this)},decrementTotal:function(){this.totalChildren-=1;check(this)},add:function(transition){var list=transition.isIntro?this.intros:this.outros;list.push(transition)},addDecorator:function(decorator){this.decoratorQueue.push(decorator)},remove:function(transition){var list=transition.isIntro?this.intros:this.outros;removeFromArray(list,transition);check(this)},init:function(){this.ready=!0;check(this)},detachNodes:function(){this.decoratorQueue.forEach(teardown);this.detachQueue.forEach(detach);this.children.forEach(detachNodes)}};var batch,runloop,global_TransitionManager=TransitionManager,unresolved=[],changeHook=new hooks_Hook("change");runloop={start:function(instance,returnPromise){var promise,fulfilPromise;returnPromise&&(promise=new utils_Promise(function(f){return fulfilPromise=f}));batch={previousBatch:batch,transitionManager:new global_TransitionManager(fulfilPromise,batch&&batch.transitionManager),views:[],tasks:[],ractives:[],instance:instance};instance&&batch.ractives.push(instance);return promise},end:function(){flushChanges();batch.transitionManager.init();!batch.previousBatch&&batch.instance&&(batch.instance.viewmodel.changes=[]);batch=batch.previousBatch},addRactive:function(ractive){batch&&addToArray(batch.ractives,ractive)},registerTransition:function(transition){transition._manager=batch.transitionManager;batch.transitionManager.add(transition)},registerDecorator:function(decorator){batch.transitionManager.addDecorator(decorator)},addView:function(view){batch.views.push(view)},addUnresolved:function(thing){unresolved.push(thing)},removeUnresolved:function(thing){removeFromArray(unresolved,thing)},detachWhenReady:function(thing){batch.transitionManager.detachQueue.push(thing)},scheduleTask:function(task,postRender){var _batch;if(batch){_batch=batch;for(;postRender&&_batch.previousBatch;)_batch=_batch.previousBatch;_batch.tasks.push(task)}else task()}};var global_runloop=runloop,queue=[],animations={tick:function(){var i,animation,now;now=utils_getTime();global_runloop.start();for(i=0;i<queue.length;i+=1){animation=queue[i];animation.tick(now)||queue.splice(i--,1)}global_runloop.end();queue.length?rAF(animations.tick):animations.running=!1},add:function(animation){queue.push(animation);if(!animations.running){animations.running=!0;rAF(animations.tick)}},abort:function(keypath,root){for(var animation,i=queue.length;i--;){animation=queue[i];animation.root===root&&animation.keypath===keypath&&animation.stop()}}},shared_animations=animations,Animation=function(options){var key;this.startTime=Date.now();for(key in options)options.hasOwnProperty(key)&&(this[key]=options[key]);this.interpolator=shared_interpolate(this.from,this.to,this.root,this.interpolator);this.running=!0;this.tick()};Animation.prototype={tick:function(){var elapsed,t,value,timeNow,index,keypath;keypath=this.keypath;if(this.running){timeNow=Date.now();elapsed=timeNow-this.startTime;if(elapsed>=this.duration){if(null!==keypath){global_runloop.start(this.root);this.root.viewmodel.set(keypath,this.to);global_runloop.end()}this.step&&this.step(1,this.to);this.complete(this.to);index=this.root._animations.indexOf(this);-1===index&&warnIfDebug("Animation was not found");this.root._animations.splice(index,1);this.running=!1;return!1}t=this.easing?this.easing(elapsed/this.duration):elapsed/this.duration;if(null!==keypath){value=this.interpolator(t);global_runloop.start(this.root);this.root.viewmodel.set(keypath,value);global_runloop.end()}this.step&&this.step(t,value);return!0}return!1},stop:function(){var index;this.running=!1;index=this.root._animations.indexOf(this);-1===index&&warnIfDebug("Animation was not found");this.root._animations.splice(index,1)}};var animate_Animation=Animation,prototype_animate=Ractive$animate,noAnimation={stop:noop},prototype_detach=Ractive$detach,prototype_detach__detachHook=new hooks_Hook("detach"),prototype_find=Ractive$find,test=Query$test,makeQuery_cancel=function(){var liveQueries,selector,index;liveQueries=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];selector=this.selector;index=liveQueries.indexOf(selector);if(-1!==index){liveQueries.splice(index,1);liveQueries[selector]=null}},sortByItemPosition=function(a,b){var ancestryA,ancestryB,oldestA,oldestB,mutualAncestor,indexA,indexB,fragments,fragmentA,fragmentB;ancestryA=getAncestry(a.component||a._ractive.proxy);ancestryB=getAncestry(b.component||b._ractive.proxy);oldestA=lastItem(ancestryA);oldestB=lastItem(ancestryB);for(;oldestA&&oldestA===oldestB;){ancestryA.pop();ancestryB.pop();mutualAncestor=oldestA;oldestA=lastItem(ancestryA);oldestB=lastItem(ancestryB)}oldestA=oldestA.component||oldestA;oldestB=oldestB.component||oldestB;fragmentA=oldestA.parentFragment;fragmentB=oldestB.parentFragment;if(fragmentA===fragmentB){indexA=fragmentA.items.indexOf(oldestA);indexB=fragmentB.items.indexOf(oldestB);return indexA-indexB||ancestryA.length-ancestryB.length}if(fragments=mutualAncestor.fragments){indexA=fragments.indexOf(fragmentA);indexB=fragments.indexOf(fragmentB);return indexA-indexB||ancestryA.length-ancestryB.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},sortByDocumentPosition=function(node,otherNode){var bitmask;if(node.compareDocumentPosition){bitmask=node.compareDocumentPosition(otherNode);return 2&bitmask?1:-1}return sortByItemPosition(node,otherNode)},sort=function(){this.sort(this._isComponentQuery?sortByItemPosition:sortByDocumentPosition);this._dirty=!1},makeQuery_dirty=function(){var _this=this;if(!this._dirty){this._dirty=!0;global_runloop.scheduleTask(function(){_this._sort()})}},remove=function(nodeOrComponent){var index=this.indexOf(this._isComponentQuery?nodeOrComponent.instance:nodeOrComponent);-1!==index&&this.splice(index,1)},_makeQuery=makeQuery,prototype_findAll=Ractive$findAll,prototype_findAllComponents=Ractive$findAllComponents,prototype_findComponent=Ractive$findComponent,findContainer=Ractive$findContainer,findParent=Ractive$findParent,eventStack={enqueue:function(ractive,event){if(ractive.event){ractive._eventQueue=ractive._eventQueue||[];ractive._eventQueue.push(ractive.event)}ractive.event=event},dequeue:function(ractive){ractive._eventQueue&&ractive._eventQueue.length?ractive.event=ractive._eventQueue.pop():delete ractive.event}},shared_eventStack=eventStack,shared_fireEvent=fireEvent,prototype_fire=Ractive$fire,prototype_get=Ractive$get,options={capture:!0,noUnwrap:!0,fullRootGet:!0},insert=Ractive$insert,insertHook=new hooks_Hook("insert"),prototype_merge=Ractive$merge,Observer=function(ractive,keypath,callback,options){this.root=ractive;this.keypath=keypath;this.callback=callback;this.defer=options.defer;this.context=options&&options.context?options.context:ractive};Observer.prototype={init:function(immediate){this.value=this.root.get(this.keypath.str);immediate!==!1?this.update():this.oldValue=this.value},setValue:function(value){var _this=this;if(!isEqual(value,this.value)){this.value=value;this.defer&&this.ready?global_runloop.scheduleTask(function(){return _this.update()}):this.update()}},update:function(){if(!this.updating){this.updating=!0;this.callback.call(this.context,this.value,this.oldValue,this.keypath.str);this.oldValue=this.value;this.updating=!1}}};var PatternObserver,observe_Observer=Observer,observe_getPattern=getPattern,slice=Array.prototype.slice;PatternObserver=function(ractive,keypath,callback,options){this.root=ractive;this.callback=callback;this.defer=options.defer;this.keypath=keypath;this.regex=new RegExp("^"+keypath.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};this.defer&&(this.proxies=[]);this.context=options&&options.context?options.context:ractive};PatternObserver.prototype={init:function(immediate){var values,keypath;values=observe_getPattern(this.root,this.keypath);if(immediate!==!1)for(keypath in values)values.hasOwnProperty(keypath)&&this.update(getKeypath(keypath));else this.values=values},update:function(keypath){var values,_this=this;if(keypath.isPattern){values=observe_getPattern(this.root,keypath);for(keypath in values)values.hasOwnProperty(keypath)&&this.update(getKeypath(keypath))}else this.root.viewmodel.implicitChanges[keypath.str]||(this.defer&&this.ready?global_runloop.scheduleTask(function(){return _this.getProxy(keypath).update()}):this.reallyUpdate(keypath))},reallyUpdate:function(keypath){var keypathStr,value,keys,args;keypathStr=keypath.str;value=this.root.viewmodel.get(keypath);if(this.updating)this.values[keypathStr]=value;else{this.updating=!0;if(!isEqual(value,this.values[keypathStr])||!this.ready){keys=slice.call(this.regex.exec(keypathStr),1);args=[value,this.values[keypathStr],keypathStr].concat(keys);this.values[keypathStr]=value;this.callback.apply(this.context,args)}this.updating=!1}},getProxy:function(keypath){var _this=this;this.proxies[keypath.str]||(this.proxies[keypath.str]={update:function(){return _this.reallyUpdate(keypath)}});return this.proxies[keypath.str]}};var css,update,styleElement,head,styleSheet,inDom,observe_PatternObserver=PatternObserver,observe_getObserverFacade=getObserverFacade,emptyObject={},observe=Ractive$observe,observeOnce=Ractive$observeOnce,shared_trim=function(str){return str.trim()},notEmptyString=function(str){return""!==str},off=Ractive$off,on=Ractive$on,once=Ractive$once,shared_getNewIndices=getNewIndices,arrayProto=Array.prototype,makeArrayMethod=function(methodName){return function(keypath){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];var array,len,promise,result,newIndices=[];keypath=getKeypath(normalise(keypath));array=this.viewmodel.get(keypath);len=array.length;if(!isArray(array))throw new Error("Called ractive."+methodName+"('"+keypath.str+"'), but '"+keypath.str+"' does not refer to an array");newIndices=shared_getNewIndices(array,methodName,args);result=arrayProto[methodName].apply(array,args);promise=global_runloop.start(this,!0).then(function(){return result});newIndices?this.viewmodel.smartUpdate(keypath,array,newIndices):this.viewmodel.mark(keypath);global_runloop.end();return promise}},pop=makeArrayMethod("pop"),push=makeArrayMethod("push"),global_css__prefix="/* Ractive.js component styles */\n",styles=[],dirty=!1;if(isClient){styleElement=document.createElement("style");styleElement.type="text/css";head=document.getElementsByTagName("head")[0];inDom=!1;styleSheet=styleElement.styleSheet;update=function(){var css=global_css__prefix+styles.map(function(s){return"\n/* {"+s.id+"} */\n"+s.styles}).join("\n");styleSheet?styleSheet.cssText=css:styleElement.innerHTML=css;if(!inDom){head.appendChild(styleElement);inDom=!0}};css={add:function(s){styles.push(s);dirty=!0},apply:function(){if(dirty){update();dirty=!1}}}}else css={add:noop,apply:noop};var config_registries__registryNames,Registry,registries,global_css=css,prototype_render=Ractive$render,renderHook=new hooks_Hook("render"),completeHook=new hooks_Hook("complete"),adaptConfigurator={extend:function(Parent,proto,options){proto.adapt=custom_adapt__combine(proto.adapt,ensureArray(options.adapt))},init:function(){}},custom_adapt=adaptConfigurator,transform=transformCss,selectorsPattern=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,commentsPattern=/\/\*.*?\*\//g,selectorUnitPattern=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,mediaQueryPattern=/^@media/,dataRvcGuidPattern=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,css_css__uid=1,cssConfigurator={name:"css",extend:function(Parent,proto,options){if(options.css){var id=css_css__uid++,styles=options.noCssTransform?options.css:transform(options.css,id);proto.cssId=id;global_css.add({id:id,styles:styles})}},init:function(){}},css_css=cssConfigurator,dataConfigurator={name:"data",extend:function(Parent,proto,options){var key=void 0,value=void 0;if(options.data&&isObject(options.data))for(key in options.data){value=options.data[key];value&&"object"==typeof value&&(isObject(value)||isArray(value))&&warnIfDebug("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }")}proto.data=custom_data__combine(proto.data,options.data)},init:function(Parent,ractive,options){var result=custom_data__combine(Parent.prototype.data,options.data);"function"==typeof result&&(result=result.call(ractive));return result||{}},reset:function(ractive){var result=this.init(ractive.constructor,ractive,ractive.viewmodel);ractive.viewmodel.reset(result);return!0}},custom_data=dataConfigurator,parse=null,parseOptions=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],parser={fromId:fromId,isHashedId:isHashedId,isParsed:isParsed,getParseOptions:getParseOptions,createHelper:template_parser__createHelper,parse:doParse},template_parser=parser,templateConfigurator={name:"template",extend:function(Parent,proto,options){var template;if("template"in options){template=options.template;"function"==typeof template?proto.template=template:proto.template=parseIfString(template,proto)}},init:function(Parent,ractive,options){var template,fn;template="template"in options?options.template:Parent.prototype.template;if("function"==typeof template){fn=template;template=getDynamicTemplate(ractive,fn);ractive._config.template={fn:fn,result:template}}template=parseIfString(template,ractive);ractive.template=template.t;template.p&&extendPartials(ractive.partials,template.p)},reset:function(ractive){var parsed,result=resetValue(ractive);if(result){parsed=parseIfString(result,ractive);ractive.template=parsed.t;extendPartials(ractive.partials,parsed.p,!0);return!0}}},template_template=templateConfigurator;config_registries__registryNames=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"];Registry=function(name,useDefaults){this.name=name;this.useDefaults=useDefaults};Registry.prototype={constructor:Registry,extend:function(Parent,proto,options){this.configure(this.useDefaults?Parent.defaults:Parent,this.useDefaults?proto:proto.constructor,options)},init:function(){},configure:function(Parent,target,options){var registry,name=this.name,option=options[name];registry=create(Parent[name]);for(var key in option)registry[key]=option[key];target[name]=registry},reset:function(ractive){var registry=ractive[this.name],changed=!1;Object.keys(registry).forEach(function(key){var item=registry[key];if(item._fn){item._fn.isOwner?registry[key]=item._fn:delete registry[key];changed=!0}});return changed}};registries=config_registries__registryNames.map(function(name){return new Registry(name,"computed"===name)});var config,order,defaultKeys,custom,isBlacklisted,isStandardKey,config_registries=registries,wrapPrototype=wrap,config_deprecate=deprecate;custom={adapt:custom_adapt,css:css_css,data:custom_data,template:template_template};defaultKeys=Object.keys(config_defaults);isStandardKey=makeObj(defaultKeys.filter(function(key){return!custom[key]}));isBlacklisted=makeObj(defaultKeys.concat(config_registries.map(function(r){return r.name})));order=[].concat(defaultKeys.filter(function(key){return!config_registries[key]&&!custom[key]}),config_registries,custom.data,custom.template,custom.css);config={extend:function(Parent,proto,options){return configure("extend",Parent,proto,options)},init:function(Parent,ractive,options){return configure("init",Parent,ractive,options)},reset:function(ractive){return order.filter(function(c){return c.reset&&c.reset(ractive)}).map(function(c){return c.name})},order:order};var Parser,ParseError,config_config=config,prototype_bubble=Fragment$bubble,Fragment_prototype_detach=Fragment$detach,Fragment_prototype_find=Fragment$find,Fragment_prototype_findAll=Fragment$findAll,Fragment_prototype_findAllComponents=Fragment$findAllComponents,Fragment_prototype_findComponent=Fragment$findComponent,prototype_findNextNode=Fragment$findNextNode,prototype_firstNode=Fragment$firstNode,parse_Parser__leadingWhitespace=/^\s+/;ParseError=function(message){this.name="ParseError";this.message=message;try{throw new Error(message)}catch(e){this.stack=e.stack}};ParseError.prototype=Error.prototype;Parser=function(str,options){var items,item,lineStart=0;this.str=str;this.options=options||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(line){var lineEnd=lineStart+line.length+1;lineStart=lineEnd;return lineEnd},0);this.init&&this.init(str,options);items=[];for(;this.pos<this.str.length&&(item=this.read());)items.push(item);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(items,options):items};Parser.prototype={read:function(converters){var pos,i,len,item;converters||(converters=this.converters);pos=this.pos;len=converters.length;for(i=0;len>i;i+=1){this.pos=pos;if(item=converters[i](this))return item}return null},getLinePos:function(char){for(var columnNum,lineNum=0,lineStart=0;char>=this.lineEnds[lineNum];){lineStart=this.lineEnds[lineNum];lineNum+=1}columnNum=char-lineStart;return[lineNum+1,columnNum+1,char]},error:function(message){var pos=this.getLinePos(this.pos),lineNum=pos[0],columnNum=pos[1],line=this.lines[pos[0]-1],numTabs=0,annotation=line.replace(/\t/g,function(match,char){char<pos[1]&&(numTabs+=1);return"  "})+"\n"+new Array(pos[1]+numTabs).join(" ")+"^----",error=new ParseError(""+message+" at line "+lineNum+" character "+columnNum+":\n"+annotation);error.line=pos[0];error.character=pos[1];error.shortMessage=message;throw error},matchString:function(string){if(this.str.substr(this.pos,string.length)===string){this.pos+=string.length;return string}},matchPattern:function(pattern){var match;if(match=pattern.exec(this.remaining())){this.pos+=match[0].length;return match[1]||match[0]}},allowWhitespace:function(){this.matchPattern(parse_Parser__leadingWhitespace)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};Parser.extend=function(proto){var Child,key,Parent=this;Child=function(str,options){Parser.call(this,str,options)};Child.prototype=create(Parent.prototype);for(key in proto)hasOwn.call(proto,key)&&(Child.prototype[key]=proto[key]);Child.extend=Parser.extend;return Child};var stringMiddlePattern,escapeSequencePattern,lineContinuationPattern,parse_Parser=Parser,TEXT=1,INTERPOLATOR=2,TRIPLE=3,SECTION=4,ELEMENT=7,PARTIAL=8,COMMENT=9,ATTRIBUTE=13,COMPONENT=15,YIELDER=16,DOCTYPE=18,NUMBER_LITERAL=20,STRING_LITERAL=21,REFERENCE=30,SECTION_IF=50,SECTION_UNLESS=51,SECTION_EACH=52,SECTION_WITH=53,SECTION_IF_WITH=54;stringMiddlePattern=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;escapeSequencePattern=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;lineContinuationPattern=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var JsonParser,specials,specialsPattern,parseJSON__numberPattern,placeholderPattern,placeholderAtStartPattern,onlyWhitespace,makeQuotedStringMatcher=function(okQuote){return function(parser){var start,literal,done,next;start=parser.pos;literal='"';done=!1;for(;!done;){next=parser.matchPattern(stringMiddlePattern)||parser.matchPattern(escapeSequencePattern)||parser.matchString(okQuote);if(next)literal+='"'===next?'\\"':"\\'"===next?"'":next;else{next=parser.matchPattern(lineContinuationPattern);next?literal+="\\u"+("000"+next.charCodeAt(1).toString(16)).slice(-4):done=!0}}literal+='"';return JSON.parse(literal)}},getSingleQuotedString=makeQuotedStringMatcher('"'),getDoubleQuotedString=makeQuotedStringMatcher("'"),readStringLiteral=function(parser){var start,string;start=parser.pos;if(parser.matchString('"')){string=getDoubleQuotedString(parser);if(!parser.matchString('"')){parser.pos=start;return null}return{t:STRING_LITERAL,v:string}}if(parser.matchString("'")){string=getSingleQuotedString(parser);if(!parser.matchString("'")){parser.pos=start;return null}return{t:STRING_LITERAL,v:string}}return null},literal_readNumberLiteral=readNumberLiteral,literal_readNumberLiteral__numberPattern=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,patterns__name=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,shared_readKey=readKey,identifier=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;specials={"true":!0,"false":!1,undefined:void 0,"null":null};specialsPattern=new RegExp("^(?:"+Object.keys(specials).join("|")+")");parseJSON__numberPattern=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;placeholderPattern=/\$\{([^\}]+)\}/g;placeholderAtStartPattern=/^\$\{([^\}]+)\}/;onlyWhitespace=/^\s*$/;JsonParser=parse_Parser.extend({init:function(str,options){this.values=options.values;this.allowWhitespace()},postProcess:function(result){return 1===result.length&&onlyWhitespace.test(this.leftover)?{value:result[0].v}:null},converters:[function(parser){var placeholder;if(!parser.values)return null;placeholder=parser.matchPattern(placeholderAtStartPattern);return placeholder&&parser.values.hasOwnProperty(placeholder)?{v:parser.values[placeholder]}:void 0},function(parser){var special;return(special=parser.matchPattern(specialsPattern))?{v:specials[special]}:void 0},function(parser){var number;return(number=parser.matchPattern(parseJSON__numberPattern))?{v:+number}:void 0},function(parser){var values,stringLiteral=readStringLiteral(parser);return stringLiteral&&(values=parser.values)?{v:stringLiteral.v.replace(placeholderPattern,function(match,$1){return $1 in values?values[$1]:$1})}:stringLiteral},function(parser){var result,pair;if(!parser.matchString("{"))return null;result={};parser.allowWhitespace();if(parser.matchString("}"))return{v:result};for(;pair=getKeyValuePair(parser);){result[pair.key]=pair.value;parser.allowWhitespace();if(parser.matchString("}"))return{v:result};if(!parser.matchString(","))return null}return null},function(parser){var result,valueToken;if(!parser.matchString("["))return null;result=[];parser.allowWhitespace();if(parser.matchString("]"))return{v:result};for(;valueToken=parser.read();){result.push(valueToken.v);parser.allowWhitespace();if(parser.matchString("]"))return{v:result};if(!parser.matchString(","))return null;parser.allowWhitespace()}return null}]});var booleanAttributes,voidElementNames,htmlEntities,controlCharacters,entityPattern,lessThan,greaterThan,amp,parseJSON=function(str,values){var parser=new JsonParser(str,{values:values});return parser.result},shared_processItems=processItems,getArgsList=Fragment$getArgsList,getNode=Fragment$getNode,prototype_getValue=Fragment$getValue;booleanAttributes=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;voidElementNames=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;htmlEntities={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};controlCharacters=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];entityPattern=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(htmlEntities).join("|")+"));?","g");lessThan=/</g;greaterThan=/>/g;amp=/&/g;var shared_detach=function(){return detachNode(this.node)},Text=function(options){this.type=TEXT;this.text=options.template};Text.prototype={detach:shared_detach,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createTextNode(this.text));return this.node},toString:function(escape){return escape?escapeHtml(this.text):this.text},unrender:function(shouldDestroy){return shouldDestroy?this.detach():void 0}};var items_Text=Text,shared_unbind=shared_unbind__unbind,Mustache_getValue=Mustache$getValue,ReferenceResolver=function(owner,ref,callback){var keypath;this.ref=ref;this.resolved=!1;this.root=owner.root;this.parentFragment=owner.parentFragment;this.callback=callback;keypath=shared_resolveRef(owner.root,ref,owner.parentFragment);void 0!=keypath?this.resolve(keypath):global_runloop.addUnresolved(this)};ReferenceResolver.prototype={resolve:function(keypath){this.keypath&&!keypath&&global_runloop.addUnresolved(this);this.resolved=!0;this.keypath=keypath;this.callback(keypath)},forceResolution:function(){this.resolve(getKeypath(this.ref))},rebind:function(oldKeypath,newKeypath){var keypath;if(void 0!=this.keypath){keypath=this.keypath.replace(oldKeypath,newKeypath);void 0!==keypath&&this.resolve(keypath)}},unbind:function(){this.resolved||global_runloop.removeUnresolved(this)}};var Resolvers_ReferenceResolver=ReferenceResolver,SpecialResolver=function(owner,ref,callback){this.parentFragment=owner.parentFragment;this.ref=ref;this.callback=callback;this.rebind()},props={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};SpecialResolver.prototype={rebind:function(){var value,ref=this.ref,fragment=this.parentFragment,prop=props[ref];if(!prop)throw new Error('Unknown special reference "'+ref+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(getKeypath("@"+prop.prefix+getProp(this.cached,prop)));if(-1!==prop.prop.indexOf("index")||-1!==prop.prop.indexOf("key"))for(;fragment;){if(fragment.owner.currentSubtype===SECTION_EACH&&void 0!==(value=getProp(fragment,prop))){this.cached=fragment;fragment.registerIndexRef(this);return this.callback(getKeypath("@"+prop.prefix+value))}fragment=!fragment.parent&&fragment.owner&&fragment.owner.component&&fragment.owner.component.parentFragment&&!fragment.owner.component.instance.isolated?fragment.owner.component.parentFragment:fragment.parent}else for(;fragment;){if(void 0!==(value=getProp(fragment,prop)))return this.callback(getKeypath("@"+prop.prefix+value.str));fragment=fragment.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Resolvers_SpecialResolver=SpecialResolver,IndexResolver=function(owner,ref,callback){this.parentFragment=owner.parentFragment;this.ref=ref;this.callback=callback;ref.ref.fragment.registerIndexRef(this);this.rebind()};IndexResolver.prototype={rebind:function(){var index,ref=this.ref.ref;index="k"===ref.ref.t?"k"+ref.fragment.key:"i"+ref.fragment.index;void 0!==index&&this.callback(getKeypath("@"+index))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Resolvers_IndexResolver=IndexResolver,Resolvers_findIndexRefs=findIndexRefs;findIndexRefs.resolve=function(indices){var k,ref,refs={};for(k in indices.refs){ref=indices.refs[k];refs[ref.ref.n]="k"===ref.ref.t?ref.fragment.key:ref.fragment.index}return refs};var ExpressionResolver,Resolvers_createReferenceResolver=createReferenceResolver,shared_getFunctionFromString=getFunctionFromString,cache={},Resolvers_ExpressionResolver__bind=Function.prototype.bind;ExpressionResolver=function(owner,parentFragment,expression,callback){var ractive,_this=this;ractive=owner.root;this.root=ractive;this.parentFragment=parentFragment;this.callback=callback;this.owner=owner;this.str=expression.s;this.keypaths=[];this.pending=expression.r.length;this.refResolvers=expression.r.map(function(ref,i){return Resolvers_createReferenceResolver(_this,ref,function(keypath){_this.resolve(i,keypath)})});this.ready=!0;this.bubble()};ExpressionResolver.prototype={bubble:function(){if(this.ready){this.uniqueString=getUniqueString(this.str,this.keypaths);this.keypath=createExpressionKeypath(this.uniqueString);this.createEvaluator();this.callback(this.keypath)}},unbind:function(){for(var resolver;resolver=this.refResolvers.pop();)resolver.unbind()},resolve:function(index,keypath){this.keypaths[index]=keypath;this.bubble()},createEvaluator:function(){var computation,valueGetters,signature,keypath,fn,_this=this;keypath=this.keypath;computation=this.root.viewmodel.computations[keypath.str];if(computation)this.root.viewmodel.mark(keypath);else{fn=shared_getFunctionFromString(this.str,this.refResolvers.length);valueGetters=this.keypaths.map(function(keypath){var value;if("undefined"===keypath)return function(){};if(keypath.isSpecial){value=keypath.value;return function(){return value}}return function(){var value=_this.root.viewmodel.get(keypath,{noUnwrap:!0,fullRootGet:!0});"function"==typeof value&&(value=wrapFunction(value,_this.root));return value}});signature={deps:this.keypaths.filter(isValidDependency),getter:function(){var args=valueGetters.map(call);return fn.apply(null,args)}};computation=this.root.viewmodel.compute(keypath,signature)}},rebind:function(oldKeypath,newKeypath){this.refResolvers.forEach(function(r){return r.rebind(oldKeypath,newKeypath)})}};var Resolvers_ExpressionResolver=ExpressionResolver,MemberResolver=function(template,resolver,parentFragment){var _this=this;this.resolver=resolver;this.root=resolver.root;this.parentFragment=parentFragment;this.viewmodel=resolver.root.viewmodel;"string"==typeof template?this.value=template:template.t===REFERENCE?this.refResolver=Resolvers_createReferenceResolver(this,template.n,function(keypath){
_this.resolve(keypath)}):new Resolvers_ExpressionResolver(resolver,parentFragment,template,function(keypath){_this.resolve(keypath)})};MemberResolver.prototype={resolve:function(keypath){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.keypath=keypath;this.value=this.viewmodel.get(keypath);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(oldKeypath,newKeypath){this.refResolver&&this.refResolver.rebind(oldKeypath,newKeypath)},setValue:function(value){this.value=value;this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var ReferenceExpressionResolver_MemberResolver=MemberResolver,ReferenceExpressionResolver=function(mustache,template,callback){var ractive,ref,keypath,parentFragment,_this=this;this.parentFragment=parentFragment=mustache.parentFragment;this.root=ractive=mustache.root;this.mustache=mustache;this.ref=ref=template.r;this.callback=callback;this.unresolved=[];(keypath=shared_resolveRef(ractive,ref,parentFragment))?this.base=keypath:this.baseResolver=new Resolvers_ReferenceResolver(this,ref,function(keypath){_this.base=keypath;_this.baseResolver=null;_this.bubble()});this.members=template.m.map(function(template){return new ReferenceExpressionResolver_MemberResolver(template,_this,parentFragment)});this.ready=!0;this.bubble()};ReferenceExpressionResolver.prototype={getKeypath:function(){var values=this.members.map(ReferenceExpressionResolver_ReferenceExpressionResolver__getValue);return!values.every(isDefined)||this.baseResolver?null:this.base.join(values.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(methodCallers__unbind)},rebind:function(oldKeypath,newKeypath){var changed;if(this.base){var newBase=this.base.replace(oldKeypath,newKeypath);if(newBase&&newBase!==this.base){this.base=newBase;changed=!0}}this.members.forEach(function(members){members.rebind(oldKeypath,newKeypath)&&(changed=!0)});changed&&this.bubble()},forceResolution:function(){if(this.baseResolver){this.base=getKeypath(this.ref);this.baseResolver.unbind();this.baseResolver=null}this.members.forEach(forceResolution);this.bubble()}};var ReferenceExpressionResolver_ReferenceExpressionResolver=ReferenceExpressionResolver,Mustache_initialise=Mustache$init,Mustache_resolve=Mustache$resolve,Mustache_rebind=Mustache$rebind,Mustache={getValue:Mustache_getValue,init:Mustache_initialise,resolve:Mustache_resolve,rebind:Mustache_rebind},Interpolator=function(options){this.type=INTERPOLATOR;Mustache.init(this,options)};Interpolator.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Mustache.resolve,rebind:Mustache.rebind,detach:shared_detach,unbind:shared_unbind,render:function(){this.node||(this.node=document.createTextNode(safeToStringValue(this.value)));return this.node},unrender:function(shouldDestroy){shouldDestroy&&detachNode(this.node)},getValue:Mustache.getValue,setValue:function(value){var wrapper;this.keypath&&(wrapper=this.root.viewmodel.wrapped[this.keypath.str])&&(value=wrapper.get());if(!isEqual(value,this.value)){this.value=value;this.parentFragment.bubble();this.node&&global_runloop.addView(this)}},firstNode:function(){return this.node},toString:function(escape){var string=""+safeToStringValue(this.value);return escape?escapeHtml(string):string}};var items_Interpolator=Interpolator,Section_prototype_bubble=Section$bubble,Section_prototype_detach=Section$detach,find=Section$find,findAll=Section$findAll,findAllComponents=Section$findAllComponents,findComponent=Section$findComponent,findNextNode=Section$findNextNode,firstNode=Section$firstNode,shuffle=Section$shuffle,prototype_rebind=function(oldKeypath,newKeypath){Mustache.rebind.call(this,oldKeypath,newKeypath)},Section_prototype_render=Section$render,setValue=Section$setValue,prototype_toString=Section$toString,prototype_unbind=Section$unbind,prototype_unrender=Section$unrender,prototype_update=Section$update,Section=function(options){this.type=SECTION;this.subtype=this.currentSubtype=options.template.n;this.inverted=this.subtype===SECTION_UNLESS;this.pElement=options.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];options.template.i&&(this.indexRefs=options.template.i.split(",").map(function(k,i){return{n:k,t:0===i?"k":"i"}}));this.renderedFragments=[];this.length=0;Mustache.init(this,options)};Section.prototype={bubble:Section_prototype_bubble,detach:Section_prototype_detach,find:find,findAll:findAll,findAllComponents:findAllComponents,findComponent:findComponent,findNextNode:findNextNode,firstNode:firstNode,getIndexRef:function(name){if(this.indexRefs)for(var i=this.indexRefs.length;i--;){var ref=this.indexRefs[i];if(ref.n===name)return ref}},getValue:Mustache.getValue,shuffle:shuffle,rebind:prototype_rebind,render:Section_prototype_render,resolve:Mustache.resolve,setValue:setValue,toString:prototype_toString,unbind:prototype_unbind,unrender:prototype_unrender,update:prototype_update};var ieBug,ieBlacklist,_Section=Section,Triple_prototype_detach=Triple$detach,Triple_prototype_find=Triple$find,Triple_prototype_findAll=Triple$findAll,Triple_prototype_firstNode=Triple$firstNode,elementCache={};try{createElement("table").innerHTML="foo"}catch(err){ieBug=!0;ieBlacklist={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var insertHtml=function(html,node,docFrag){var container,wrapper,selectedOption,child,i,nodes=[];if(null!=html&&""!==html){if(ieBug&&(wrapper=ieBlacklist[node.tagName])){container=element("DIV");container.innerHTML=wrapper[0]+html+wrapper[1];container=container.querySelector(".x");"SELECT"===container.tagName&&(selectedOption=container.options[container.selectedIndex])}else if(node.namespaceURI===namespaces.svg){container=element("DIV");container.innerHTML='<svg class="x">'+html+"</svg>";container=container.querySelector(".x")}else{container=element(node.tagName);container.innerHTML=html;"SELECT"===container.tagName&&(selectedOption=container.options[container.selectedIndex])}for(;child=container.firstChild;){nodes.push(child);docFrag.appendChild(child)}if("SELECT"===node.tagName){i=nodes.length;for(;i--;)nodes[i]!==selectedOption&&(nodes[i].selected=!1)}}return nodes},helpers_updateSelect=updateSelect,Triple_prototype_render=Triple$render,prototype_setValue=Triple$setValue,Triple_prototype_toString=Triple$toString,Triple_prototype_unrender=Triple$unrender,Triple_prototype_update=Triple$update,Triple=function(options){this.type=TRIPLE;Mustache.init(this,options)};Triple.prototype={detach:Triple_prototype_detach,find:Triple_prototype_find,findAll:Triple_prototype_findAll,firstNode:Triple_prototype_firstNode,getValue:Mustache.getValue,rebind:Mustache.rebind,render:Triple_prototype_render,resolve:Mustache.resolve,setValue:prototype_setValue,toString:Triple_prototype_toString,unbind:shared_unbind,unrender:Triple_prototype_unrender,update:Triple_prototype_update};var svgCamelCaseElements,svgCamelCaseAttributes,createMap,map,_Triple=Triple,Element_prototype_bubble=function(){this.parentFragment.bubble()},Element_prototype_detach=Element$detach,Element_prototype_find=function(selector){return this.node?matches(this.node,selector)?this.node:this.fragment&&this.fragment.find?this.fragment.find(selector):void 0:null},Element_prototype_findAll=function(selector,query){query._test(this,!0)&&query.live&&(this.liveQueries||(this.liveQueries=[])).push(query);this.fragment&&this.fragment.findAll(selector,query)},Element_prototype_findAllComponents=function(selector,query){this.fragment&&this.fragment.findAllComponents(selector,query)},Element_prototype_findComponent=function(selector){return this.fragment?this.fragment.findComponent(selector):void 0},Element_prototype_findNextNode=Element$findNextNode,Element_prototype_firstNode=Element$firstNode,getAttribute=Element$getAttribute,truthy=/^true|on|yes|1$/i,processBindingAttributes__isNumeric=/^[0-9]+$/,processBindingAttributes=function(element,template){var val,attrs,attributes;attributes=template.a||{};attrs={};val=attributes.twoway;void 0!==val&&(attrs.twoway=0===val||truthy.test(val));val=attributes.lazy;void 0!==val&&(0!==val&&processBindingAttributes__isNumeric.test(val)?attrs.lazy=parseInt(val):attrs.lazy=0===val||truthy.test(val));return attrs},Attribute_prototype_bubble=Attribute$bubble;svgCamelCaseElements="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ");svgCamelCaseAttributes="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ");createMap=function(items){for(var map={},i=items.length;i--;)map[items[i].toLowerCase()]=items[i];return map};map=createMap(svgCamelCaseElements.concat(svgCamelCaseAttributes));var enforceCase=function(elementName){var lowerCaseElementName=elementName.toLowerCase();return map[lowerCaseElementName]||lowerCaseElementName},determineNameAndNamespace=function(attribute,name){var colonIndex,namespacePrefix;colonIndex=name.indexOf(":");if(-1!==colonIndex){namespacePrefix=name.substr(0,colonIndex);if("xmlns"!==namespacePrefix){name=name.substring(colonIndex+1);attribute.name=enforceCase(name);attribute.namespace=namespaces[namespacePrefix.toLowerCase()];attribute.namespacePrefix=namespacePrefix;if(!attribute.namespace)throw'Unknown namespace ("'+namespacePrefix+'")';return}}attribute.name=attribute.element.namespace!==namespaces.html?enforceCase(name):name},helpers_getInterpolator=getInterpolator,prototype_init=Attribute$init,Attribute_prototype_rebind=Attribute$rebind,Attribute_prototype_render=Attribute$render,propertyNames={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Attribute_prototype_toString=Attribute$toString,Attribute_prototype_unbind=Attribute$unbind,updateSelectValue=Attribute$updateSelect,updateMultipleSelectValue=Attribute$updateMultipleSelect,updateRadioName=Attribute$updateRadioName,updateRadioValue=Attribute$updateRadioValue,updateCheckboxName=Attribute$updateCheckboxName,updateClassName=Attribute$updateClassName,updateIdAttribute=Attribute$updateIdAttribute,updateIEStyleAttribute=Attribute$updateIEStyleAttribute,updateContentEditableValue=Attribute$updateContentEditableValue,updateValue=Attribute$updateValue,updateBoolean=Attribute$updateBooleanAttribute,updateEverythingElse=Attribute$updateEverythingElse,Attribute_prototype_update=Attribute$update,Attribute=function(options){this.init(options)};Attribute.prototype={bubble:Attribute_prototype_bubble,init:prototype_init,rebind:Attribute_prototype_rebind,render:Attribute_prototype_render,toString:Attribute_prototype_toString,unbind:Attribute_prototype_unbind,update:Attribute_prototype_update};var _ConditionalAttribute__div,_Attribute=Attribute,createAttributes=function(element,attributes){var name,attribute,result=[];for(name in attributes)if("twoway"!==name&&"lazy"!==name&&attributes.hasOwnProperty(name)){attribute=new _Attribute({element:element,name:name,value:attributes[name],root:element.root});result[name]=attribute;"value"!==name&&result.push(attribute)}(attribute=result.value)&&result.push(attribute);return result};"undefined"!=typeof document&&(_ConditionalAttribute__div=createElement("div"));var ConditionalAttribute=function(element,template){this.element=element;this.root=element.root;this.parentFragment=element.parentFragment;this.attributes=[];this.fragment=new virtualdom_Fragment({root:element.root,owner:this,template:[template]})};ConditionalAttribute.prototype={bubble:function(){this.node&&this.update();this.element.bubble()},rebind:function(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath)},render:function(node){this.node=node;this.isSvg=node.namespaceURI===namespaces.svg;this.update()},unbind:function(){this.fragment.unbind()},update:function(){var str,attrs,_this=this;str=this.fragment.toString();attrs=parseAttributes(str,this.isSvg);this.attributes.filter(function(a){return notIn(attrs,a)}).forEach(function(a){_this.node.removeAttribute(a.name)});attrs.forEach(function(a){_this.node.setAttribute(a.name,a.value)});this.attributes=attrs},toString:function(){return this.fragment.toString()}};var _ConditionalAttribute=ConditionalAttribute,createConditionalAttributes=function(element,attributes){return attributes?attributes.map(function(a){return new _ConditionalAttribute(element,a)}):[]},Binding=function(element){var interpolator,keypath,value,parentForm;this.element=element;this.root=element.root;this.attribute=element.attributes[this.name||"value"];interpolator=this.attribute.interpolator;interpolator.twowayBinding=this;if(keypath=interpolator.keypath){if("}"===keypath.str.slice(-1)){warnOnceIfDebug("Two-way binding does not work with expressions (`%s` on <%s>)",interpolator.resolver.uniqueString,element.name,{ractive:this.root});return!1}if(keypath.isSpecial){warnOnceIfDebug("Two-way binding does not work with %s",interpolator.resolver.ref,{ractive:this.root});return!1}}else{var ref=interpolator.template.r?"'"+interpolator.template.r+"' reference":"expression";warnIfDebug("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",ref,{ractive:this.root});interpolator.resolver.forceResolution();keypath=interpolator.keypath}this.attribute.isTwoway=!0;this.keypath=keypath;value=this.root.viewmodel.get(keypath);if(void 0===value&&this.getInitialValue){value=this.getInitialValue();void 0!==value&&this.root.viewmodel.set(keypath,value)}if(parentForm=findParentForm(element)){this.resetValue=value;parentForm.formBindings.push(this)}};Binding.prototype={handleChange:function(){var _this=this;global_runloop.start(this.root);this.attribute.locked=!0;this.root.viewmodel.set(this.keypath,this.getValue());global_runloop.scheduleTask(function(){return _this.attribute.locked=!1});global_runloop.end()},rebound:function(){var bindings,oldKeypath,newKeypath;oldKeypath=this.keypath;newKeypath=this.attribute.interpolator.keypath;if(oldKeypath!==newKeypath){removeFromArray(this.root._twowayBindings[oldKeypath.str],this);this.keypath=newKeypath;bindings=this.root._twowayBindings[newKeypath.str]||(this.root._twowayBindings[newKeypath.str]=[]);bindings.push(this)}},unbind:function(){}};Binding.extend=function(properties){var SpecialisedBinding,Parent=this;SpecialisedBinding=function(element){Binding.call(this,element);this.init&&this.init()};SpecialisedBinding.prototype=create(Parent.prototype);utils_object__extend(SpecialisedBinding.prototype,properties);SpecialisedBinding.extend=Binding.extend;return SpecialisedBinding};var GenericBinding,Binding_Binding=Binding,handleDomEvent=handleChange;GenericBinding=Binding_Binding.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var lazy,node=this.element.node,timeout=!1;this.rendered=!0;lazy=this.root.lazy;if(this.element.lazy===!0)lazy=!0;else if(this.element.lazy===!1)lazy=!1;else if(is__isNumeric(this.element.lazy)){lazy=!1;timeout=+this.element.lazy}else if(is__isNumeric(lazy||"")){timeout=+lazy;lazy=!1;this.element.lazy=timeout}this.handler=timeout?handleDelay:handleDomEvent;node.addEventListener("change",handleDomEvent,!1);if(!lazy){node.addEventListener("input",this.handler,!1);node.attachEvent&&node.addEventListener("keyup",this.handler,!1)}node.addEventListener("blur",handleBlur,!1)},unrender:function(){var node=this.element.node;this.rendered=!1;node.removeEventListener("change",handleDomEvent,!1);node.removeEventListener("input",this.handler,!1);node.removeEventListener("keyup",this.handler,!1);node.removeEventListener("blur",handleBlur,!1)}});var Binding_GenericBinding=GenericBinding,ContentEditableBinding=Binding_GenericBinding.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Binding_ContentEditableBinding=ContentEditableBinding,shared_getSiblings=getSiblings,sets={},RadioBinding=Binding_Binding.extend({name:"checked",init:function(){this.siblings=shared_getSiblings(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var node=this.element.node;node.addEventListener("change",handleDomEvent,!1);node.attachEvent&&node.addEventListener("click",handleDomEvent,!1)},unrender:function(){var node=this.element.node;node.removeEventListener("change",handleDomEvent,!1);node.removeEventListener("click",handleDomEvent,!1)},handleChange:function(){global_runloop.start(this.root);this.siblings.forEach(function(binding){binding.root.viewmodel.set(binding.keypath,binding.getValue())});global_runloop.end()},getValue:function(){return this.element.node.checked},unbind:function(){removeFromArray(this.siblings,this)}}),Binding_RadioBinding=RadioBinding,RadioNameBinding=Binding_Binding.extend({name:"name",init:function(){this.siblings=shared_getSiblings(this.root._guid,"radioname",this.keypath.str);this.siblings.push(this);this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var node=this.element.node;node.name="{{"+this.keypath.str+"}}";node.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");node.addEventListener("change",handleDomEvent,!1);node.attachEvent&&node.addEventListener("click",handleDomEvent,!1)},unrender:function(){var node=this.element.node;node.removeEventListener("change",handleDomEvent,!1);node.removeEventListener("click",handleDomEvent,!1)},getValue:function(){var node=this.element.node;return node._ractive?node._ractive.value:node.value},handleChange:function(){this.element.node.checked&&Binding_Binding.prototype.handleChange.call(this)},rebound:function(oldKeypath,newKeypath){var node;Binding_Binding.prototype.rebound.call(this,oldKeypath,newKeypath);(node=this.element.node)&&(node.name="{{"+this.keypath.str+"}}")},unbind:function(){removeFromArray(this.siblings,this)}}),Binding_RadioNameBinding=RadioNameBinding,CheckboxNameBinding=Binding_Binding.extend({name:"name",getInitialValue:function(){this.noInitialValue=!0;return[]},init:function(){var existingValue,bindingValue;this.checkboxName=!0;this.siblings=shared_getSiblings(this.root._guid,"checkboxes",this.keypath.str);this.siblings.push(this);this.noInitialValue&&(this.siblings.noInitialValue=!0);if(this.siblings.noInitialValue&&this.element.getAttribute("checked")){existingValue=this.root.viewmodel.get(this.keypath);bindingValue=this.element.getAttribute("value");existingValue.push(bindingValue)}},unbind:function(){removeFromArray(this.siblings,this)},render:function(){var existingValue,bindingValue,node=this.element.node;existingValue=this.root.viewmodel.get(this.keypath);bindingValue=this.element.getAttribute("value");isArray(existingValue)?this.isChecked=arrayContains(existingValue,bindingValue):this.isChecked=existingValue==bindingValue;node.name="{{"+this.keypath.str+"}}";node.checked=this.isChecked;node.addEventListener("change",handleDomEvent,!1);node.attachEvent&&node.addEventListener("click",handleDomEvent,!1)},unrender:function(){var node=this.element.node;node.removeEventListener("change",handleDomEvent,!1);node.removeEventListener("click",handleDomEvent,!1)},changed:function(){var wasChecked=!!this.isChecked;this.isChecked=this.element.node.checked;return this.isChecked===wasChecked},handleChange:function(){this.isChecked=this.element.node.checked;Binding_Binding.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(isChecked).map(Binding_CheckboxNameBinding__getValue)}}),Binding_CheckboxNameBinding=CheckboxNameBinding,CheckboxBinding=Binding_Binding.extend({name:"checked",render:function(){var node=this.element.node;node.addEventListener("change",handleDomEvent,!1);node.attachEvent&&node.addEventListener("click",handleDomEvent,!1)},unrender:function(){var node=this.element.node;node.removeEventListener("change",handleDomEvent,!1);node.removeEventListener("click",handleDomEvent,!1)},getValue:function(){return this.element.node.checked}}),Binding_CheckboxBinding=CheckboxBinding,SelectBinding=Binding_Binding.extend({getInitialValue:function(){var len,i,value,optionWasSelected,options=this.element.options;if(void 0===this.element.getAttribute("value")){i=len=options.length;if(len){for(;i--;)if(options[i].getAttribute("selected")){value=options[i].getAttribute("value");optionWasSelected=!0;break}if(!optionWasSelected)for(;++i<len;)if(!options[i].getAttribute("disabled")){value=options[i].getAttribute("value");break}void 0!==value&&(this.element.attributes.value.value=value);return value}}},render:function(){this.element.node.addEventListener("change",handleDomEvent,!1)},unrender:function(){this.element.node.removeEventListener("change",handleDomEvent,!1)},setValue:function(value){this.root.viewmodel.set(this.keypath,value)},getValue:function(){var options,i,len,option,optionValue;options=this.element.node.options;len=options.length;for(i=0;len>i;i+=1){option=options[i];if(options[i].selected){optionValue=option._ractive?option._ractive.value:option.value;return optionValue}}},forceUpdate:function(){var _this=this,value=this.getValue();if(void 0!==value){this.attribute.locked=!0;global_runloop.scheduleTask(function(){return _this.attribute.locked=!1});this.root.viewmodel.set(this.keypath,value)}}}),Binding_SelectBinding=SelectBinding,MultipleSelectBinding=Binding_SelectBinding.extend({getInitialValue:function(){return this.element.options.filter(function(option){return option.getAttribute("selected")}).map(function(option){return option.getAttribute("value")})},render:function(){var valueFromModel;this.element.node.addEventListener("change",handleDomEvent,!1);valueFromModel=this.root.viewmodel.get(this.keypath);void 0===valueFromModel&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",handleDomEvent,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var selectedValues,options,i,len,option,optionValue;selectedValues=[];options=this.element.node.options;len=options.length;for(i=0;len>i;i+=1){option=options[i];if(option.selected){optionValue=option._ractive?option._ractive.value:option.value;selectedValues.push(optionValue)}}return selectedValues},handleChange:function(){var attribute,previousValue,value;attribute=this.attribute;previousValue=attribute.value;value=this.getValue();void 0!==previousValue&&arrayContentsMatch(value,previousValue)||Binding_SelectBinding.prototype.handleChange.call(this);return this},forceUpdate:function(){var _this=this,value=this.getValue();if(void 0!==value){this.attribute.locked=!0;global_runloop.scheduleTask(function(){return _this.attribute.locked=!1});this.root.viewmodel.set(this.keypath,value)}},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Binding_MultipleSelectBinding=MultipleSelectBinding,FileListBinding=Binding_Binding.extend({render:function(){this.element.node.addEventListener("change",handleDomEvent,!1)},unrender:function(){this.element.node.removeEventListener("change",handleDomEvent,!1)},getValue:function(){return this.element.node.files}}),Binding_FileListBinding=FileListBinding,NumericBinding=Binding_GenericBinding.extend({getInitialValue:function(){},getValue:function(){var value=parseFloat(this.element.node.value);return isNaN(value)?void 0:value}}),init_createTwowayBinding=createTwowayBinding,EventHandler_prototype_bubble=EventHandler$bubble,EventHandler_prototype_fire=EventHandler$fire,getAction=EventHandler$getAction,EventHandler_prototype_init=EventHandler$init,eventPattern=/^event(?:\.(.+))?/,shared_genericHandler=genericHandler,listen=EventHandler$listen,customHandlers={},touchEvents={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},EventHandler_prototype_rebind=EventHandler$rebind,EventHandler_prototype_render=EventHandler$render,prototype_resolve=EventHandler$resolve,EventHandler_prototype_unbind=EventHandler$unbind,EventHandler_prototype_unrender=EventHandler$unrender,EventHandler=function(element,name,template){this.init(element,name,template)};EventHandler.prototype={bubble:EventHandler_prototype_bubble,fire:EventHandler_prototype_fire,getAction:getAction,init:EventHandler_prototype_init,listen:listen,rebind:EventHandler_prototype_rebind,render:EventHandler_prototype_render,resolve:prototype_resolve,unbind:EventHandler_prototype_unbind,unrender:EventHandler_prototype_unrender};var _EventHandler=EventHandler,createEventHandlers=function(element,template){var i,name,names,handler,result=[];for(name in template)if(template.hasOwnProperty(name)){names=name.split("-");i=names.length;for(;i--;){handler=new _EventHandler(element,names[i],template[name]);result.push(handler)}}return result},Decorator=function(element,template){var ractive,name,fragment,self=this;this.element=element;this.root=ractive=element.root;name=template.n||template;if("string"!=typeof name){fragment=new virtualdom_Fragment({template:name,root:ractive,owner:element});name=fragment.toString();fragment.unbind();if(""===name)return}if(template.a)this.params=template.a;else if(template.d){this.fragment=new virtualdom_Fragment({template:template.d,root:ractive,owner:element});this.params=this.fragment.getArgsList();this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;self.params=this.getArgsList();self.ready&&self.update()}}this.fn=findInViewHierarchy("decorators",ractive,name);this.fn||fatal(missingPlugin(name,"decorator"))};Decorator.prototype={init:function(){var node,result,args;node=this.element.node;if(this.params){args=[node].concat(this.params);result=this.fn.apply(this.root,args)}else result=this.fn.call(this.root,node);if(!result||!result.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=result;this.ready=!0},update:function(){if(this.actual.update)this.actual.update.apply(this.root,this.params);else{this.actual.teardown(!0);this.init()}},rebind:function(oldKeypath,newKeypath){this.fragment&&this.fragment.rebind(oldKeypath,newKeypath)},teardown:function(updating){this.torndown=!0;this.ready&&this.actual.teardown();!updating&&this.fragment&&this.fragment.unbind()}};var helpers_prefix__prefix,prefixCache,helpers_prefix__testStyle,_Decorator=Decorator,Element_prototype_init=Element$init,Element_prototype_rebind=Element$rebind,Transition_prototype_init=Transition$init,camelCase=function(hyphenatedStr){return hyphenatedStr.replace(/-([a-zA-Z])/g,function(match,$1){return $1.toUpperCase()})};if(isClient){prefixCache={};helpers_prefix__testStyle=createElement("div").style;helpers_prefix__prefix=function(prop){var i,vendor,capped;prop=camelCase(prop);if(!prefixCache[prop])if(void 0!==helpers_prefix__testStyle[prop])prefixCache[prop]=prop;else{capped=prop.charAt(0).toUpperCase()+prop.substring(1);i=vendors.length;for(;i--;){vendor=vendors[i];if(void 0!==helpers_prefix__testStyle[vendor+capped]){prefixCache[prop]=vendor+capped;break}}}return prefixCache[prop]}}else helpers_prefix__prefix=null;var getStyle,prototype_getStyle__getComputedStyle,helpers_prefix=helpers_prefix__prefix;if(isClient){prototype_getStyle__getComputedStyle=window.getComputedStyle||legacy.getComputedStyle;getStyle=function(props){var computedStyle,styles,i,prop,value;computedStyle=prototype_getStyle__getComputedStyle(this.node);if("string"==typeof props){value=computedStyle[helpers_prefix(props)];"0px"===value&&(value=0);return value}if(!isArray(props))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");styles={};i=props.length;for(;i--;){prop=props[i];value=computedStyle[helpers_prefix(prop)];"0px"===value&&(value=0);styles[prop]=value}return styles}}else getStyle=null;var prototype_getStyle=getStyle,setStyle=function(style,value){var prop;if("string"==typeof style)this.node.style[helpers_prefix(style)]=value;else for(prop in style)style.hasOwnProperty(prop)&&(this.node.style[helpers_prefix(prop)]=style[prop]);return this},Ticker=function(options){var easing;this.duration=options.duration;this.step=options.step;this.complete=options.complete;if("string"==typeof options.easing){easing=options.root.easing[options.easing];if(!easing){warnOnceIfDebug(missingPlugin(options.easing,"easing"));easing=linear}}else easing="function"==typeof options.easing?options.easing:linear;this.easing=easing;this.start=utils_getTime();this.end=this.start+this.duration;this.running=!0;shared_animations.add(this)};Ticker.prototype={tick:function(now){var elapsed,eased;if(!this.running)return!1;if(now>this.end){this.step&&this.step(1);this.complete&&this.complete(1);return!1}elapsed=now-this.start;eased=this.easing(elapsed/this.duration);this.step&&this.step(eased);return!0},stop:function(){this.abort&&this.abort();this.running=!1}};var createTransitions,animateStyle_createTransitions__testStyle,TRANSITION,TRANSITIONEND,CSS_TRANSITIONS_ENABLED,TRANSITION_DURATION,TRANSITION_PROPERTY,TRANSITION_TIMING_FUNCTION,shared_Ticker=Ticker,unprefixPattern=new RegExp("^-(?:"+vendors.join("|")+")-"),unprefix=function(prop){return prop.replace(unprefixPattern,"")},vendorPattern=new RegExp("^(?:"+vendors.join("|")+")([A-Z])"),hyphenate=function(str){var hyphenated;if(!str)return"";vendorPattern.test(str)&&(str="-"+str);hyphenated=str.replace(/[A-Z]/g,function(match){return"-"+match.toLowerCase()});return hyphenated},canUseCssTransitions={},cannotUseCssTransitions={};if(isClient){animateStyle_createTransitions__testStyle=createElement("div").style;!function(){if(void 0!==animateStyle_createTransitions__testStyle.transition){TRANSITION="transition";TRANSITIONEND="transitionend";CSS_TRANSITIONS_ENABLED=!0}else if(void 0!==animateStyle_createTransitions__testStyle.webkitTransition){TRANSITION="webkitTransition";TRANSITIONEND="webkitTransitionEnd";CSS_TRANSITIONS_ENABLED=!0}else CSS_TRANSITIONS_ENABLED=!1}();if(TRANSITION){TRANSITION_DURATION=TRANSITION+"Duration";TRANSITION_PROPERTY=TRANSITION+"Property";TRANSITION_TIMING_FUNCTION=TRANSITION+"TimingFunction";
}createTransitions=function(t,to,options,changedProperties,resolve){setTimeout(function(){var hashPrefix,jsTransitionsComplete,cssTransitionsComplete,checkComplete,transitionEndHandler;checkComplete=function(){if(jsTransitionsComplete&&cssTransitionsComplete){t.root.fire(t.name+":end",t.node,t.isIntro);resolve()}};hashPrefix=(t.node.namespaceURI||"")+t.node.tagName;t.node.style[TRANSITION_PROPERTY]=changedProperties.map(helpers_prefix).map(hyphenate).join(",");t.node.style[TRANSITION_TIMING_FUNCTION]=hyphenate(options.easing||"linear");t.node.style[TRANSITION_DURATION]=options.duration/1e3+"s";transitionEndHandler=function(event){var index;index=changedProperties.indexOf(camelCase(unprefix(event.propertyName)));-1!==index&&changedProperties.splice(index,1);if(!changedProperties.length){t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,!1);cssTransitionsComplete=!0;checkComplete()}};t.node.addEventListener(TRANSITIONEND,transitionEndHandler,!1);setTimeout(function(){for(var hash,originalValue,index,prop,suffix,i=changedProperties.length,propertiesToTransitionInJs=[];i--;){prop=changedProperties[i];hash=hashPrefix+prop;if(CSS_TRANSITIONS_ENABLED&&!cannotUseCssTransitions[hash]){t.node.style[helpers_prefix(prop)]=to[prop];if(!canUseCssTransitions[hash]){originalValue=t.getStyle(prop);canUseCssTransitions[hash]=t.getStyle(prop)!=to[prop];cannotUseCssTransitions[hash]=!canUseCssTransitions[hash];cannotUseCssTransitions[hash]&&(t.node.style[helpers_prefix(prop)]=originalValue)}}if(!CSS_TRANSITIONS_ENABLED||cannotUseCssTransitions[hash]){void 0===originalValue&&(originalValue=t.getStyle(prop));index=changedProperties.indexOf(prop);-1===index?warnIfDebug("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):changedProperties.splice(index,1);suffix=/[^\d]*$/.exec(to[prop])[0];propertiesToTransitionInJs.push({name:helpers_prefix(prop),interpolator:shared_interpolate(parseFloat(originalValue),parseFloat(to[prop])),suffix:suffix})}}propertiesToTransitionInJs.length?new shared_Ticker({root:t.root,duration:options.duration,easing:camelCase(options.easing||""),step:function(pos){var prop,i;i=propertiesToTransitionInJs.length;for(;i--;){prop=propertiesToTransitionInJs[i];t.node.style[prop.name]=prop.interpolator(pos)+prop.suffix}},complete:function(){jsTransitionsComplete=!0;checkComplete()}}):jsTransitionsComplete=!0;if(!changedProperties.length){t.node.removeEventListener(TRANSITIONEND,transitionEndHandler,!1);cssTransitionsComplete=!0;checkComplete()}},0)},options.delay||0)}}else createTransitions=null;var hidden,vendor,animateStyle_visibility__prefix,animateStyle_visibility__i,visibility,animateStyle_createTransitions=createTransitions;if("undefined"!=typeof document){hidden="hidden";visibility={};if(hidden in document)animateStyle_visibility__prefix="";else{animateStyle_visibility__i=vendors.length;for(;animateStyle_visibility__i--;){vendor=vendors[animateStyle_visibility__i];hidden=vendor+"Hidden";hidden in document&&(animateStyle_visibility__prefix=vendor)}}if(void 0!==animateStyle_visibility__prefix){document.addEventListener(animateStyle_visibility__prefix+"visibilitychange",onChange);onChange()}else{if("onfocusout"in document){document.addEventListener("focusout",onHide);document.addEventListener("focusin",onShow)}else{window.addEventListener("pagehide",onHide);window.addEventListener("blur",onHide);window.addEventListener("pageshow",onShow);window.addEventListener("focus",onShow)}visibility.hidden=!1}}var animateStyle,_animateStyle__getComputedStyle,resolved,animateStyle_visibility=visibility;if(isClient){_animateStyle__getComputedStyle=window.getComputedStyle||legacy.getComputedStyle;animateStyle=function(style,value,options){var to,_this=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(animateStyle_visibility.hidden){this.setStyle(style,value);return resolved||(resolved=utils_Promise.resolve())}if("string"==typeof style){to={};to[style]=value}else{to=style;options=value}if(!options){warnOnceIfDebug('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name);options=this}var promise=new utils_Promise(function(resolve){var propertyNames,changedProperties,computedStyle,current,from,i,prop;if(options.duration){propertyNames=Object.keys(to);changedProperties=[];computedStyle=_animateStyle__getComputedStyle(_this.node);from={};i=propertyNames.length;for(;i--;){prop=propertyNames[i];current=computedStyle[helpers_prefix(prop)];"0px"===current&&(current=0);if(current!=to[prop]){changedProperties.push(prop);_this.node.style[helpers_prefix(prop)]=current}}changedProperties.length?animateStyle_createTransitions(_this,to,options,changedProperties,resolve):resolve()}else{_this.setStyle(to);resolve()}});return promise}}else animateStyle=null;var _animateStyle=animateStyle,processParams=function(params,defaults){"number"==typeof params?params={duration:params}:"string"==typeof params?params="slow"===params?{duration:600}:"fast"===params?{duration:200}:{duration:400}:params||(params={});return fillGaps({},params,defaults)},prototype_start=Transition$start,Transition=function(owner,template,isIntro){this.init(owner,template,isIntro)};Transition.prototype={init:Transition_prototype_init,start:prototype_start,getStyle:prototype_getStyle,setStyle:setStyle,animateStyle:_animateStyle,processParams:processParams};var updateCss,updateScript,_Transition=Transition,Element_prototype_render=Element$render;updateCss=function(){var node=this.node,content=this.fragment.toString(!1);window&&window.appearsToBeIELessEqual8&&(node.type="text/css");if(node.styleSheet)node.styleSheet.cssText=content;else{for(;node.hasChildNodes();)node.removeChild(node.firstChild);node.appendChild(document.createTextNode(content))}};updateScript=function(){this.node.type&&"text/javascript"!==this.node.type||warnIfDebug("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};var Element_prototype_toString=function(){var str,escape;if(this.template.y)return"<!DOCTYPE"+this.template.dd+">";str="<"+this.template.e;str+=this.attributes.map(stringifyAttribute).join("")+this.conditionalAttributes.map(stringifyAttribute).join("");"option"===this.name&&optionIsSelected(this)&&(str+=" selected");"input"===this.name&&inputIsCheckedRadio(this)&&(str+=" checked");str+=">";"textarea"===this.name&&void 0!==this.getAttribute("value")?str+=escapeHtml(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(str+=this.getAttribute("value")||"");if(this.fragment){escape="script"!==this.name&&"style"!==this.name;str+=this.fragment.toString(escape)}voidElementNames.test(this.template.e)||(str+="</"+this.template.e+">");return str},Element_prototype_unbind=Element$unbind,Element_prototype_unrender=Element$unrender,Element=function(options){this.init(options)};Element.prototype={bubble:Element_prototype_bubble,detach:Element_prototype_detach,find:Element_prototype_find,findAll:Element_prototype_findAll,findAllComponents:Element_prototype_findAllComponents,findComponent:Element_prototype_findComponent,findNextNode:Element_prototype_findNextNode,firstNode:Element_prototype_firstNode,getAttribute:getAttribute,init:Element_prototype_init,rebind:Element_prototype_rebind,render:Element_prototype_render,toString:Element_prototype_toString,unbind:Element_prototype_unbind,unrender:Element_prototype_unrender};var _Element=Element,deIndent__empty=/^\s*$/,deIndent__leadingWhitespace=/^\s*/,deIndent=function(str){var lines,firstLine,lastLine,minIndent;lines=str.split("\n");firstLine=lines[0];void 0!==firstLine&&deIndent__empty.test(firstLine)&&lines.shift();lastLine=lastItem(lines);void 0!==lastLine&&deIndent__empty.test(lastLine)&&lines.pop();minIndent=lines.reduce(reducer,null);minIndent&&(str=lines.map(function(line){return line.replace(minIndent,"")}).join("\n"));return str},Partial_getPartialTemplate=getPartialTemplate,applyIndent=function(string,indent){var indented;if(!indent)return string;indented=string.split("\n").map(function(line,notFirstLine){return notFirstLine?indent+line:line}).join("\n");return indented},missingPartialMessage='Could not find template for partial "%s"',Partial=function(options){var parentFragment,template;parentFragment=this.parentFragment=options.parentFragment;this.root=parentFragment.root;this.type=PARTIAL;this.index=options.index;this.name=options.template.r;this.rendered=!1;this.fragment=this.fragmentToRender=this.fragmentToUnrender=null;Mustache.init(this,options);if(!this.keypath)if(template=Partial_getPartialTemplate(this.root,this.name,parentFragment)){shared_unbind.call(this);this.isNamed=!0;this.setTemplate(template)}else warnOnceIfDebug(missingPartialMessage,this.name)};Partial.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(selector){return this.fragment.find(selector)},findAll:function(selector,query){return this.fragment.findAll(selector,query)},findComponent:function(selector){return this.fragment.findComponent(selector)},findAllComponents:function(selector,query){return this.fragment.findAllComponents(selector,query)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(oldKeypath,newKeypath){this.isNamed||Mustache_rebind.call(this,oldKeypath,newKeypath);this.fragment&&this.fragment.rebind(oldKeypath,newKeypath)},render:function(){this.docFrag=document.createDocumentFragment();this.update();this.rendered=!0;return this.docFrag},resolve:Mustache.resolve,setValue:function(value){var template;if(void 0===value||value!==this.value){void 0!==value&&(template=Partial_getPartialTemplate(this.root,""+value,this.parentFragment));if(!template&&this.name&&(template=Partial_getPartialTemplate(this.root,this.name,this.parentFragment))){shared_unbind.call(this);this.isNamed=!0}template||warnOnceIfDebug(missingPartialMessage,this.name,{ractive:this.root});this.value=value;this.setTemplate(template||[]);this.bubble();this.rendered&&global_runloop.addView(this)}},setTemplate:function(template){if(this.fragment){this.fragment.unbind();this.rendered&&(this.fragmentToUnrender=this.fragment)}this.fragment=new virtualdom_Fragment({template:template,root:this.root,owner:this,pElement:this.parentFragment.pElement});this.fragmentToRender=this.fragment},toString:function(toString){var string,previousItem,lastLine,match;string=this.fragment.toString(toString);previousItem=this.parentFragment.items[this.index-1];if(!previousItem||previousItem.type!==TEXT)return string;lastLine=previousItem.text.split("\n").pop();return(match=/^\s+$/.exec(lastLine))?applyIndent(string,match[0]):string},unbind:function(){this.isNamed||shared_unbind.call(this);this.fragment&&this.fragment.unbind()},unrender:function(shouldDestroy){if(this.rendered){this.fragment&&this.fragment.unrender(shouldDestroy);this.rendered=!1}},update:function(){var target,anchor;if(this.fragmentToUnrender){this.fragmentToUnrender.unrender(!0);this.fragmentToUnrender=null}if(this.fragmentToRender){this.docFrag.appendChild(this.fragmentToRender.render());this.fragmentToRender=null}if(this.rendered){target=this.parentFragment.getNode();anchor=this.parentFragment.findNextNode(this);target.insertBefore(this.docFrag,anchor)}}};var testObj,patchArrayMethods,unpatchArrayMethods,_Partial=Partial,Component_getComponent=getComponent,Component_prototype_detach=Component$detach,Component_prototype_detach__detachHook=new hooks_Hook("detach"),Component_prototype_find=Component$find,Component_prototype_findAll=Component$findAll,Component_prototype_findAllComponents=Component$findAllComponents,Component_prototype_findComponent=Component$findComponent,Component_prototype_findNextNode=Component$findNextNode,Component_prototype_firstNode=Component$firstNode,processWrapper=function(wrapper,array,methodName,newIndices){var root=wrapper.root,keypath=wrapper.keypath;newIndices?root.viewmodel.smartUpdate(keypath,array,newIndices):root.viewmodel.mark(keypath)},patchedArrayProto=[],mutatorMethods=["pop","push","reverse","shift","sort","splice","unshift"];mutatorMethods.forEach(function(methodName){var method=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_len>_key;_key++)args[_key]=arguments[_key];var newIndices,result,wrapper,i;newIndices=shared_getNewIndices(this,methodName,args);result=Array.prototype[methodName].apply(this,arguments);global_runloop.start();this._ractive.setting=!0;i=this._ractive.wrappers.length;for(;i--;){wrapper=this._ractive.wrappers[i];global_runloop.addRactive(wrapper.root);processWrapper(wrapper,this,methodName,newIndices)}global_runloop.end();this._ractive.setting=!1;return result};defineProperty(patchedArrayProto,methodName,{value:method})});testObj={};if(testObj.__proto__){patchArrayMethods=function(array){array.__proto__=patchedArrayProto};unpatchArrayMethods=function(array){array.__proto__=Array.prototype}}else{patchArrayMethods=function(array){var i,methodName;i=mutatorMethods.length;for(;i--;){methodName=mutatorMethods[i];defineProperty(array,methodName,{value:patchedArrayProto[methodName],configurable:!0})}};unpatchArrayMethods=function(array){var i;i=mutatorMethods.length;for(;i--;)delete array[mutatorMethods[i]]}}patchArrayMethods.unpatch=unpatchArrayMethods;var arrayAdaptor,ArrayWrapper,array_index__errorMessage,patch=patchArrayMethods;arrayAdaptor={filter:function(object){return isArray(object)&&(!object._ractive||!object._ractive.setting)},wrap:function(ractive,array,keypath){return new ArrayWrapper(ractive,array,keypath)}};ArrayWrapper=function(ractive,array,keypath){this.root=ractive;this.value=array;this.keypath=getKeypath(keypath);if(!array._ractive){defineProperty(array,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0});patch(array)}if(!array._ractive.instances[ractive._guid]){array._ractive.instances[ractive._guid]=0;array._ractive.instances.push(ractive)}array._ractive.instances[ractive._guid]+=1;array._ractive.wrappers.push(this)};ArrayWrapper.prototype={get:function(){return this.value},teardown:function(){var array,storage,wrappers,instances,index;array=this.value;storage=array._ractive;wrappers=storage.wrappers;instances=storage.instances;if(storage.setting)return!1;index=wrappers.indexOf(this);if(-1===index)throw new Error(array_index__errorMessage);wrappers.splice(index,1);if(wrappers.length){instances[this.root._guid]-=1;if(!instances[this.root._guid]){index=instances.indexOf(this.root);if(-1===index)throw new Error(array_index__errorMessage);instances.splice(index,1)}}else{delete array._ractive;patch.unpatch(this.value)}}};array_index__errorMessage="Something went wrong in a rather interesting way";var magicAdaptor,MagicWrapper,array_index=arrayAdaptor,numeric=/^\s*[0-9]+\s*$/,createBranch=function(key){return numeric.test(key)?[]:{}};try{Object.defineProperty({},"test",{value:0});magicAdaptor={filter:function(object,keypath,ractive){var parentWrapper,parentValue;if(!keypath)return!1;keypath=getKeypath(keypath);if((parentWrapper=ractive.viewmodel.wrapped[keypath.parent.str])&&!parentWrapper.magic)return!1;parentValue=ractive.viewmodel.get(keypath.parent);return isArray(parentValue)&&/^[0-9]+$/.test(keypath.lastKey)?!1:parentValue&&("object"==typeof parentValue||"function"==typeof parentValue)},wrap:function(ractive,property,keypath){return new MagicWrapper(ractive,property,keypath)}};MagicWrapper=function(ractive,value,keypath){var objKeypath,template,siblings;keypath=getKeypath(keypath);this.magic=!0;this.ractive=ractive;this.keypath=keypath;this.value=value;this.prop=keypath.lastKey;objKeypath=keypath.parent;this.obj=objKeypath.isRoot?ractive.viewmodel.data:ractive.viewmodel.get(objKeypath);template=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);template&&template.set&&(siblings=template.set._ractiveWrappers)?-1===siblings.indexOf(this)&&siblings.push(this):createAccessors(this,value,template)};MagicWrapper.prototype={get:function(){return this.value},reset:function(value){if(!this.updating){this.updating=!0;this.obj[this.prop]=value;global_runloop.addRactive(this.ractive);this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0});this.updating=!1;return!0}},set:function(key,value){if(!this.updating){if(!this.obj[this.prop]){this.updating=!0;this.obj[this.prop]=createBranch(key);this.updating=!1}this.obj[this.prop][key]=value}},teardown:function(){var template,set,value,wrappers,index;if(this.updating)return!1;template=Object.getOwnPropertyDescriptor(this.obj,this.prop);set=template&&template.set;if(set){wrappers=set._ractiveWrappers;index=wrappers.indexOf(this);-1!==index&&wrappers.splice(index,1);if(!wrappers.length){value=this.obj[this.prop];Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0});this.obj[this.prop]=value}}}}}catch(err){magicAdaptor=!1}var magicArrayAdaptor,MagicArrayWrapper,adaptors_magic=magicAdaptor;if(adaptors_magic){magicArrayAdaptor={filter:function(object,keypath,ractive){return adaptors_magic.filter(object,keypath,ractive)&&array_index.filter(object)},wrap:function(ractive,array,keypath){return new MagicArrayWrapper(ractive,array,keypath)}};MagicArrayWrapper=function(ractive,array,keypath){this.value=array;this.magic=!0;this.magicWrapper=adaptors_magic.wrap(ractive,array,keypath);this.arrayWrapper=array_index.wrap(ractive,array,keypath)};MagicArrayWrapper.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(value){return this.magicWrapper.reset(value)}}}var magicArray=magicArrayAdaptor,prototype_adapt=Viewmodel$adapt,prefixers={},helpers_getUpstreamChanges=getUpstreamChanges,applyChanges_notifyPatternObservers=notifyPatternObservers,applyChanges=Viewmodel$applyChanges,capture=Viewmodel$capture,clearCache=Viewmodel$clearCache,UnresolvedDependency=function(computation,ref){this.computation=computation;this.viewmodel=computation.viewmodel;this.ref=ref;this.root=this.viewmodel.ractive;this.parentFragment=this.root.component&&this.root.component.parentFragment};UnresolvedDependency.prototype={resolve:function(keypath){this.computation.softDeps.push(keypath);this.computation.unresolvedDeps[keypath.str]=null;this.viewmodel.register(keypath,this.computation,"computed")}};var Computation_UnresolvedDependency=UnresolvedDependency,Computation=function(key,signature){this.key=key;this.getter=signature.getter;this.setter=signature.setter;this.hardDeps=signature.deps||[];this.softDeps=[];this.unresolvedDeps={};this.depValues={};this._dirty=this._firstRun=!0};Computation.prototype={constructor:Computation,init:function(viewmodel){var initial,_this=this;this.viewmodel=viewmodel;this.bypass=!0;initial=viewmodel.get(this.key);viewmodel.clearCache(this.key.str);this.bypass=!1;this.setter&&void 0!==initial&&this.set(initial);this.hardDeps&&this.hardDeps.forEach(function(d){return viewmodel.register(d,_this,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var newDeps,dependenciesChanged,_this=this,dependencyValuesChanged=!1;if(this.getting){var msg="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";warnOnce(msg);return this.value}this.getting=!0;if(this._dirty){this._firstRun||!this.hardDeps.length&&!this.softDeps.length?dependencyValuesChanged=!0:[this.hardDeps,this.softDeps].forEach(function(deps){var keypath,value,i;if(!dependencyValuesChanged){i=deps.length;for(;i--;){keypath=deps[i];value=_this.viewmodel.get(keypath);if(!isEqual(value,_this.depValues[keypath.str])){_this.depValues[keypath.str]=value;dependencyValuesChanged=!0;return}}}});if(dependencyValuesChanged){this.viewmodel.capture();try{this.value=this.getter()}catch(err){warnIfDebug('Failed to compute "%s"',this.key.str);logIfDebug(err.stack||err);this.value=void 0}newDeps=this.viewmodel.release();dependenciesChanged=this.updateDependencies(newDeps);dependenciesChanged&&[this.hardDeps,this.softDeps].forEach(function(deps){deps.forEach(function(keypath){_this.depValues[keypath.str]=_this.viewmodel.get(keypath)})})}this._dirty=!1}this.getting=this._firstRun=!1;return this.value},set:function(value){if(this.setting)this.value=value;else{if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(value)}},updateDependencies:function(newDeps){var i,oldDeps,keypath,dependenciesChanged,unresolved;oldDeps=this.softDeps;i=oldDeps.length;for(;i--;){keypath=oldDeps[i];if(-1===newDeps.indexOf(keypath)){dependenciesChanged=!0;this.viewmodel.unregister(keypath,this,"computed")}}i=newDeps.length;for(;i--;){keypath=newDeps[i];if(-1===oldDeps.indexOf(keypath)&&(!this.hardDeps||-1===this.hardDeps.indexOf(keypath))){dependenciesChanged=!0;if(isUnresolved(this.viewmodel,keypath)&&!this.unresolvedDeps[keypath.str]){unresolved=new Computation_UnresolvedDependency(this,keypath.str);newDeps.splice(i,1);this.unresolvedDeps[keypath.str]=unresolved;global_runloop.addUnresolved(unresolved)}else this.viewmodel.register(keypath,this,"computed")}}dependenciesChanged&&(this.softDeps=newDeps.slice());return dependenciesChanged}};var Computation_Computation=Computation,compute=Viewmodel$compute,FAILED_LOOKUP={FAILED_LOOKUP:!0},viewmodel_prototype_get=Viewmodel$get,viewmodel_prototype_get__empty={},viewmodel_prototype_init=Viewmodel$init,prototype_map=Viewmodel$map,Mapping=function(localKey,options){this.localKey=localKey;this.keypath=options.keypath;this.origin=options.origin;this.deps=[];this.unresolved=[];this.resolved=!1};Mapping.prototype={forceResolution:function(){this.keypath=this.localKey;this.setup()},get:function(keypath,options){return this.resolved?this.origin.get(this.map(keypath),options):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(viewmodel){this.local=viewmodel;this.setup()},map:function(keypath){return void 0===typeof this.keypath?this.localKey:keypath.replace(this.localKey,this.keypath)},register:function(keypath,dependant,group){this.deps.push({keypath:keypath,dep:dependant,group:group});this.resolved&&this.origin.register(this.map(keypath),dependant,group)},resolve:function(keypath){void 0!==this.keypath&&this.unbind(!0);this.keypath=keypath;this.setup()},set:function(keypath,value){this.resolved||this.forceResolution();this.origin.set(this.map(keypath),value)},setup:function(){var _this=this;if(void 0!==this.keypath){this.resolved=!0;if(this.deps.length){this.deps.forEach(function(d){var keypath=_this.map(d.keypath);_this.origin.register(keypath,d.dep,d.group);if(d.dep.setValue)d.dep.setValue(_this.origin.get(keypath));else{if(!d.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");d.dep.invalidate()}});this.origin.mark(this.keypath)}}},setValue:function(value){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,value)},unbind:function(keepLocal){var _this=this;keepLocal||delete this.local.mappings[this.localKey];if(this.resolved){this.deps.forEach(function(d){_this.origin.unregister(_this.map(d.keypath),d.dep,d.group)});this.tracker&&this.origin.unregister(this.keypath,this.tracker)}},unregister:function(keypath,dependant,group){var deps,i;if(this.resolved){deps=this.deps;i=deps.length;for(;i--;)if(deps[i].dep===dependant){deps.splice(i,1);break}this.origin.unregister(this.map(keypath),dependant,group)}}};var mark=Viewmodel$mark,mapOldToNewIndex=function(oldArray,newArray){var usedIndices,firstUnusedIndex,newIndices,changed;usedIndices={};firstUnusedIndex=0;newIndices=oldArray.map(function(item,i){var index,start,len;start=firstUnusedIndex;len=newArray.length;do{index=newArray.indexOf(item,start);if(-1===index){changed=!0;return-1}start=index+1}while(usedIndices[index]&&len>start);index===firstUnusedIndex&&(firstUnusedIndex+=1);index!==i&&(changed=!0);usedIndices[index]=!0;return index});return newIndices},merge=Viewmodel$merge,comparators={},register=Viewmodel$register,release=Viewmodel$release,reset=Viewmodel$reset,prototype_set=Viewmodel$set,smartUpdate=Viewmodel$smartUpdate,implicitOption={implicit:!0},noCascadeOption={noCascade:!0},prototype_teardown=Viewmodel$teardown,unregister=Viewmodel$unregister,Viewmodel=function(options){var key,mapping,adapt=options.adapt,data=options.data,ractive=options.ractive,computed=options.computed,mappings=options.mappings;this.ractive=ractive;this.adaptors=adapt;this.onchange=options.onchange;this.cache={};this.cacheMap=create(null);this.deps={computed:create(null),"default":create(null)};this.depsMap={computed:create(null),"default":create(null)};this.patternObservers=[];this.specials=create(null);this.wrapped=create(null);this.computations=create(null);this.captureGroups=[];this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={};this.noCascade={};this.data=data;this.mappings=create(null);for(key in mappings)this.map(getKeypath(key),mappings[key]);if(data)for(key in data)(mapping=this.mappings[key])&&void 0===mapping.getValue()&&mapping.setValue(data[key]);for(key in computed){mappings&&key in mappings&&fatal("Cannot map to a computed property ('%s')",key);this.compute(getKeypath(key),computed[key])}this.ready=!0};Viewmodel.prototype={adapt:prototype_adapt,applyChanges:applyChanges,capture:capture,clearCache:clearCache,compute:compute,get:viewmodel_prototype_get,init:viewmodel_prototype_init,map:prototype_map,mark:mark,merge:merge,register:register,release:release,reset:reset,set:prototype_set,smartUpdate:smartUpdate,teardown:prototype_teardown,unregister:unregister};var viewmodel_Viewmodel=Viewmodel;HookQueue.prototype={constructor:HookQueue,begin:function(ractive){this.inProcess[ractive._guid]=!0},end:function(ractive){var parent=ractive.parent;parent&&this.inProcess[parent._guid]?getChildQueue(this.queue,parent).push(ractive):fire(this,ractive);delete this.inProcess[ractive._guid]}};var hooks_HookQueue=HookQueue,helpers_getComputationSignatures=getComputationSignatures,pattern=/\$\{([^\}]+)\}/g,constructHook=new hooks_Hook("construct"),configHook=new hooks_Hook("config"),initHook=new hooks_HookQueue("init"),initialise__uid=0,initialise__registryNames=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],initialise=initialiseRactiveInstance,initialise_ComplexParameter=ComplexParameter;ComplexParameter.prototype={bubble:function(){if(!this.dirty){this.dirty=!0;global_runloop.addView(this)}},update:function(){this.callback(this.fragment.getValue());this.dirty=!1},rebind:function(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath)},unbind:function(){this.fragment.unbind()}};var createInstance=function(component,Component,attributes,yieldTemplate,partials){var instance,parentFragment,ractive,fragment,container,ready,inlinePartials={},data={},mappings={},resolvers=[];parentFragment=component.parentFragment;ractive=component.root;partials=partials||{};utils_object__extend(inlinePartials,partials);partials.content=yieldTemplate||[];inlinePartials[""]=partials.content;Component.defaults.el&&warnIfDebug("The <%s/> component has a default `el` property; it has been disregarded",component.name);fragment=parentFragment;for(;fragment;){if(fragment.owner.type===YIELDER){container=fragment.owner.container;break}fragment=fragment.parent}attributes&&Object.keys(attributes).forEach(function(key){var parsed,resolver,attribute=attributes[key];if("string"==typeof attribute){parsed=parseJSON(attribute);data[key]=parsed?parsed.value:attribute}else if(0===attribute)data[key]=!0;else{if(!isArray(attribute))throw new Error("erm wut");if(isSingleInterpolator(attribute)){mappings[key]={origin:component.root.viewmodel,keypath:void 0};resolver=createResolver(component,attribute[0],function(keypath){if(keypath.isSpecial)if(ready)instance.set(key,keypath.value);else{data[key]=keypath.value;delete mappings[key]}else ready?instance.viewmodel.mappings[key].resolve(keypath):mappings[key].keypath=keypath})}else resolver=new initialise_ComplexParameter(component,attribute,function(value){ready?instance.set(key,value):data[key]=value});resolvers.push(resolver)}});instance=create(Component.prototype);initialise(instance,{el:null,append:!0,data:data,partials:partials,magic:ractive.magic||Component.defaults.magic,modifyArrays:ractive.modifyArrays,adapt:ractive.adapt},{parent:ractive,component:component,container:container,mappings:mappings,inlinePartials:inlinePartials,cssIds:parentFragment.cssIds});ready=!0;component.resolvers=resolvers;return instance},initialise_propagateEvents=propagateEvents,initialise_updateLiveQueries=function(component){var ancestor,query;ancestor=component.root;for(;ancestor;){(query=ancestor._liveComponentQueries["_"+component.name])&&query.push(component.instance);ancestor=ancestor.parent}},Component_prototype_init=Component$init,Component_prototype_rebind=Component$rebind,Component_prototype_render=Component$render,Component_prototype_toString=Component$toString,Component_prototype_unbind=Component$unbind,Component_prototype_unbind__teardownHook=new hooks_Hook("teardown"),Component_prototype_unrender=Component$unrender,Component=function(options,Constructor){this.init(options,Constructor)};Component.prototype={detach:Component_prototype_detach,find:Component_prototype_find,findAll:Component_prototype_findAll,findAllComponents:Component_prototype_findAllComponents,findComponent:Component_prototype_findComponent,findNextNode:Component_prototype_findNextNode,firstNode:Component_prototype_firstNode,init:Component_prototype_init,rebind:Component_prototype_rebind,render:Component_prototype_render,toString:Component_prototype_toString,unbind:Component_prototype_unbind,unrender:Component_prototype_unrender};var _Component=Component,Comment=function(options){this.type=COMMENT;this.value=options.template.c};Comment.prototype={detach:shared_detach,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createComment(this.value));return this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(shouldDestroy){shouldDestroy&&this.node.parentNode.removeChild(this.node)}};var items_Comment=Comment,Yielder=function(options){var container,component;this.type=YIELDER;this.container=container=options.parentFragment.root;this.component=component=container.component;this.container=container;this.containerFragment=options.parentFragment;this.parentFragment=component.parentFragment;var name=this.name=options.template.n||"",template=container._inlinePartials[name];if(!template){warnIfDebug('Could not find template for partial "'+name+'"',{ractive:options.root});template=[]}this.fragment=new virtualdom_Fragment({owner:this,root:container.parent,template:template,pElement:this.containerFragment.pElement});isArray(component.yielders[name])?component.yielders[name].push(this):component.yielders[name]=[this];global_runloop.scheduleTask(function(){if(component.yielders[name].length>1)throw new Error("A component template can only have one {{yield"+(name?" "+name:"")+"}} declaration at a time")})};Yielder.prototype={detach:function(){return this.fragment.detach();
},find:function(selector){return this.fragment.find(selector)},findAll:function(selector,query){return this.fragment.findAll(selector,query)},findComponent:function(selector){return this.fragment.findComponent(selector)},findAllComponents:function(selector,query){return this.fragment.findAllComponents(selector,query)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(options){return this.fragment.getValue(options)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(shouldDestroy){this.fragment.unrender(shouldDestroy);removeFromArray(this.component.yielders[this.name],this)},rebind:function(oldKeypath,newKeypath){this.fragment.rebind(oldKeypath,newKeypath)},toString:function(){return this.fragment.toString()}};var items_Yielder=Yielder,Doctype=function(options){this.declaration=options.template.a};Doctype.prototype={init:noop,render:noop,unrender:noop,teardown:noop,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var items_Doctype=Doctype,Fragment_prototype_init=Fragment$init,Fragment_prototype_rebind=Fragment$rebind,Fragment_prototype_render=Fragment$render,Fragment_prototype_toString=Fragment$toString,Fragment_prototype_unbind=Fragment$unbind,Fragment_prototype_unrender=Fragment$unrender,Fragment=function(options){this.init(options)};Fragment.prototype={bubble:prototype_bubble,detach:Fragment_prototype_detach,find:Fragment_prototype_find,findAll:Fragment_prototype_findAll,findAllComponents:Fragment_prototype_findAllComponents,findComponent:Fragment_prototype_findComponent,findNextNode:prototype_findNextNode,firstNode:prototype_firstNode,getArgsList:getArgsList,getNode:getNode,getValue:prototype_getValue,init:Fragment_prototype_init,rebind:Fragment_prototype_rebind,registerIndexRef:function(idx){var idxs=this.registeredIndexRefs;-1===idxs.indexOf(idx)&&idxs.push(idx)},render:Fragment_prototype_render,toString:Fragment_prototype_toString,unbind:Fragment_prototype_unbind,unregisterIndexRef:function(idx){var idxs=this.registeredIndexRefs;idxs.splice(idxs.indexOf(idx),1)},unrender:Fragment_prototype_unrender};var Ractive,properties,virtualdom_Fragment=Fragment,prototype_reset=Ractive$reset,shouldRerender=["template","partials","components","decorators","events"],resetHook=new hooks_Hook("reset"),resetPartial=function(name,partial){function collect(source,dest,ractive){ractive&&ractive.partials[name]||source.forEach(function(item){item.type===PARTIAL&&item.getPartialName()===name&&dest.push(item);item.fragment&&collect(item.fragment.items,dest,ractive);isArray(item.fragments)?collect(item.fragments,dest,ractive):isArray(item.items)?collect(item.items,dest,ractive):item.type===COMPONENT&&item.instance&&collect(item.instance.fragment.items,dest,item.instance);if(item.type===ELEMENT){isArray(item.attributes)&&collect(item.attributes,dest,ractive);isArray(item.conditionalAttributes)&&collect(item.conditionalAttributes,dest,ractive)}})}var promise,collection=[];collect(this.fragment.items,collection);this.partials[name]=partial;promise=global_runloop.start(this,!0);collection.forEach(function(item){item.value=void 0;item.setValue(name)});global_runloop.end();return promise},resetTemplate=Ractive$resetTemplate,reverse=makeArrayMethod("reverse"),Ractive_prototype_set=Ractive$set,shift=makeArrayMethod("shift"),prototype_sort=makeArrayMethod("sort"),splice=makeArrayMethod("splice"),subtract=Ractive$subtract,Ractive_prototype_teardown=Ractive$teardown,Ractive_prototype_teardown__teardownHook=new hooks_Hook("teardown"),toggle=Ractive$toggle,toHTML=Ractive$toHTML,Ractive_prototype_unrender=Ractive$unrender,unrenderHook=new hooks_Hook("unrender"),unshift=makeArrayMethod("unshift"),Ractive_prototype_update=Ractive$update,updateHook=new hooks_Hook("update"),prototype_updateModel=Ractive$updateModel,prototype={add:prototype_add,animate:prototype_animate,detach:prototype_detach,find:prototype_find,findAll:prototype_findAll,findAllComponents:prototype_findAllComponents,findComponent:prototype_findComponent,findContainer:findContainer,findParent:findParent,fire:prototype_fire,get:prototype_get,insert:insert,merge:prototype_merge,observe:observe,observeOnce:observeOnce,off:off,on:on,once:once,pop:pop,push:push,render:prototype_render,reset:prototype_reset,resetPartial:resetPartial,resetTemplate:resetTemplate,reverse:reverse,set:Ractive_prototype_set,shift:shift,sort:prototype_sort,splice:splice,subtract:subtract,teardown:Ractive_prototype_teardown,toggle:toggle,toHTML:toHTML,toHtml:toHTML,unrender:Ractive_prototype_unrender,unshift:unshift,update:Ractive_prototype_update,updateModel:prototype_updateModel},wrapMethod=function(method,superMethod,force){return force||needsSuper(method,superMethod)?function(){var result,hasSuper="_super"in this,_super=this._super;this._super=superMethod;result=method.apply(this,arguments);hasSuper&&(this._super=_super);return result}:method},unwrapExtended=unwrap,_extend=_extend__extend,getNodeInfo=function(node){var priv,indices,info={};if(!node||!(priv=node._ractive))return info;info.ractive=priv.root;info.keypath=priv.keypath.str;info.index={};(indices=Resolvers_findIndexRefs(priv.proxy.parentFragment))&&(info.index=Resolvers_findIndexRefs.resolve(indices));return info};Ractive=function(options){if(!(this instanceof Ractive))return new Ractive(options);initialise(this,options)};properties={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:_extend},getNodeInfo:{value:getNodeInfo},parse:{value:parse},Promise:{value:utils_Promise},svg:{value:svg},magic:{value:environment__magic},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:static_easing},events:{writable:!0,value:{}},interpolators:{writable:!0,value:static_interpolators},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}};defineProperties(Ractive,properties);Ractive.prototype=utils_object__extend(prototype,config_defaults);Ractive.prototype.constructor=Ractive;Ractive.defaults=Ractive.prototype;var FUNCTION="function";if(typeof Date.now!==FUNCTION||typeof String.prototype.trim!==FUNCTION||typeof Object.keys!==FUNCTION||typeof Array.prototype.indexOf!==FUNCTION||typeof Array.prototype.forEach!==FUNCTION||typeof Array.prototype.map!==FUNCTION||typeof Array.prototype.filter!==FUNCTION||"undefined"!=typeof window&&typeof window.addEventListener!==FUNCTION)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var _Ractive=Ractive;return _Ractive});!function(e,t){function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){for(var n,r=0;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}function Mn(e,n,r){for(var i,o,a,s,l=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=c.shift();for(;o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){for(var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("\ufeff")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});r=x(a),function(e,t){function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;for(;u--;)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){for(var n=e.split("|"),r=e.length;r--;)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(){}function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],u=o.preFilter;for(;s;){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r){u=xt(y,d),r(u,[],s,l),c=u.length;for(;c--;)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){u=[],c=y.length;for(;c--;)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}c=y.length;for(;c--;)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){for(var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r&&!o.relative[e[r].type];r++);return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){g=0;for(;m=e[g++];)if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){g=0;for(;m=t[g++];)m(x,y,l,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}function Nt(e,t,n){for(var r=0,i=t.length;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}a=Q.needsContext.test(e)?0:s.length;for(;a--&&(u=s[a],!o.relative[c=u.type]);)if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}return l(e,f)(i,t,!h,n,V.test(e)),n}var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){
var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);r=e;for(;r=r.parentNode;)s.unshift(r);r=t;for(;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){for(;g;){p=t;for(;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];for(;p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[b]||(p[b]={}))[e]=[T,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);gt.prototype=o.filters=o.pseudos,o.setFilters=new gt;l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){t||(t=mt(e)),n=t.length;for(;n--;)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o};r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;!function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){for(var r;(r=x.inArray(t,l,r))>-1;)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,l,u,t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select"),u=s.appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(;s--;)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){o=0;for(;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){o=0;for(;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=x(this),a=e.match(T)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)):void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)for(;n=o[i++];)r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;for(;u--;)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){t=(t||"").match(T)||[""],u=t.length;for(;u--;)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;for(;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}d=0;for(;(u=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),n=0;for(;(o=s[n++])&&!e.isPropagationStopped();){e.currentTarget=o.elem,a=0;for(;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;for(;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{
trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?x.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&x.cleanData(Ft(e,!1));for(;e.firstChild;)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}});x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=0,i=[],o=x(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];for(;i--;)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody){o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;for(;i--;)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u)}x.merge(d,s.childNodes),s.textContent="";for(;s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;for(;o=d[h++];)if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n)){i=0;for(;o=s[i++];)kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l});x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c){c={};for(;t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){
x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={};l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||s;e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position");)e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))}(window);(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%-([\s\S]+?)%>/g,escape:/<%=([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);!function(root){define("Backbone",["jquery","underscore","ractive"],function(){return function(){(function(){var a,t=this,e=t.Backbone,i=[],s=(i.push,i.slice);i.splice;a="undefined"!=typeof exports?exports:t.Backbone={};a.VERSION="1.1.0";var h=t._;h||"undefined"==typeof require||(h=require("underscore"));a.$=t.jQuery||t.Zepto||t.ender||t.$;a.noConflict=function(){t.Backbone=e;return this};a.emulateHTTP=!1;a.emulateJSON=!1;var o=a.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this,s=h.once(function(){r.off(t,s);e.apply(this,arguments)});s._callback=e;return this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:h.keys(this._events);for(o=0,u=a.length;u>o;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i)for(c=0,f=n.length;f>c;c++){s=n[c];(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&r.push(s)}r.length||delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;i&&c(i,e);r&&c(r,arguments);return this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;i||"object"!=typeof e||(i=this);t&&((r={})[t._listenId]=t);for(var n in r){t=r[n];t.off(e,i,this);(s||h.isEmpty(t._events))&&delete this._listeningTo[n]}return this}},u=/\s+/,l=function(t,e,i,r){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(r));return!1}if(u.test(i)){for(var n=i.split(u),a=0,h=n.length;h>a;a++)t[e].apply(t,[n[a]].concat(r));return!1}return!0},c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:for(;++r<s;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n);return;case 2:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:for(;++r<s;)(i=t[r]).callback.apply(i.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),n=e._listenId||(e._listenId=h.uniqueId("l"));s[n]=e;r||"object"!=typeof i||(r=this);e[t](i,r,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(a,o);var d=a.Model=function(t,e){var i=t||{};e||(e={});this.cid=h.uniqueId("c");this.attributes={};e.collection&&(this.collection=e.collection);e.parse&&(i=this.parse(i,e)||{});i=h.defaults({},i,h.result(this,"defaults"));this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(null==t)return this;if("object"==typeof t){s=t;i=e}else(s={})[t]=e;i||(i={});if(!this._validate(s,i))return!1;n=i.unset;o=i.silent;a=[];u=this._changing;this._changing=!0;if(!u){this._previousAttributes=h.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s){e=s[r];h.isEqual(c[r],e)||a.push(r);h.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e;n?delete c[r]:c[r]=e}if(!o){a.length&&(this._pending=!0);for(var f=0,d=a.length;d>f;f++)this.trigger("change:"+a[f],this,c[a[f]],i)}if(u)return this;if(!o)for(;this._pending;){this._pending=!1;this.trigger("change",this,i)}this._pending=!1;this._changing=!1;return this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!h.isEmpty(this.changed):h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):!1;var e,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)h.isEqual(r[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{};void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;t.success=function(r){if(!e.set(e.parse(r,t),t))return!1;i&&i(e,r,t);e.trigger("sync",e,r,t)};M(this,t);return this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;if(null==t||"object"==typeof t){r=t;i=e}else(r={})[t]=e;i=h.extend({validate:!0},i);if(r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=h.extend({},a,r));void 0===i.parse&&(i.parse=!0);var o=this,u=i.success;i.success=function(t){o.attributes=a;var e=o.parse(t,i);i.wait&&(e=h.extend(r||{},e));if(h.isObject(e)&&!o.set(e,i))return!1;u&&u(o,t,i);o.trigger("sync",o,t,i)};M(this,i);s=this.isNew()?"create":i.patch?"patch":"update";"patch"===s&&(i.attrs=r);n=this.sync(s,this,i);r&&i.wait&&(this.attributes=a);return n},destroy:function(t){t=t?h.clone(t):{};var e=this,i=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){(t.wait||e.isNew())&&r();i&&i(e,s,t);e.isNew()||e.trigger("sync",e,s,t)};if(this.isNew()){t.success();return!1}M(this,t);var s=this.sync("delete",this,t);t.wait||r();return s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},h.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return!0;this.trigger("invalid",this,i,h.extend(e,{validationError:i}));return!1}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.attributes);return h[t].apply(h,e)}});var v=a.Collection=function(t,e){e||(e={});e.model&&(this.model=e.model);void 0!==e.comparator&&(this.comparator=e.comparator);this._reset();this.initialize.apply(this,arguments);t&&this.reset(t,h.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};h.extend(v.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.extend({merge:!1},e,m))},remove:function(t,e){var i=!h.isArray(t);t=i?[t]:h.clone(t);e||(e={});var r,s,n,a;for(r=0,s=t.length;s>r;r++){a=t[r]=this.get(t[r]);if(a){delete this._byId[a.id];delete this._byId[a.cid];n=this.indexOf(a);this.models.splice(n,1);this.length--;if(!e.silent){e.index=n;a.trigger("remove",a,this,e)}this._removeReference(a)}}return i?t[0]:t},set:function(t,e){e=h.defaults({},e,g);e.parse&&(t=this.parse(t,e));var i=!h.isArray(t);t=i?t?[t]:[]:h.clone(t);var r,s,n,a,o,u,l,c=e.at,f=this.model,p=this.comparator&&null==c&&e.sort!==!1,v=h.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},w=e.add,b=e.merge,x=e.remove,E=!p&&w&&x?[]:!1;for(r=0,s=t.length;s>r;r++){o=t[r];n=o instanceof d?a=o:o[f.prototype.idAttribute];if(u=this.get(n)){x&&(_[u.cid]=!0);if(b){o=o===a?a.attributes:o;e.parse&&(o=u.parse(o,e));u.set(o,e);p&&!l&&u.hasChanged(v)&&(l=!0)}t[r]=u}else if(w){a=t[r]=this._prepareModel(o,e);if(!a)continue;m.push(a);a.on("all",this._onModelEvent,this);this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a)}E&&E.push(u||a)}if(x){for(r=0,s=this.length;s>r;++r)_[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,e)}if(m.length||E&&E.length){p&&(l=!0);this.length+=m.length;if(null!=c)for(r=0,s=m.length;s>r;r++)this.models.splice(c+r,0,m[r]);else{E&&(this.models.length=0);var T=E||m;for(r=0,s=T.length;s>r;r++)this.models.push(T[r])}}l&&this.sort({silent:!0});if(!e.silent){for(r=0,s=m.length;s>r;r++)(a=m[r]).trigger("add",a,this,e);(l||E&&E.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i]);e.previousModels=this.models;this._reset();t=this.add(t,h.extend({silent:!0},e));e.silent||this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,h.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,h.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t.id]||this._byId[t.cid]||this._byId[t]:void 0},at:function(t){return this.models[t]},where:function(t,e){return h.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this));t.silent||this.trigger("sort",this,t);return this},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{};void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t);e&&e(i,r,t);i.trigger("sync",i,r,t)};M(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;e.success=function(t,e,s){s.wait&&i.add(t,s);r&&r(t,e,s)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){t.collection||(t.collection=this);return t}e=e?h.clone(e):{};e.collection=this;var i=new this.model(t,e);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return!1},_removeReference:function(t){this===t.collection&&delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if("add"!==t&&"remove"!==t||i===this){"destroy"===t&&this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];null!=e.id&&(this._byId[e.id]=e)}this.trigger.apply(this,arguments)}}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(y,function(t){v.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.models);return h[t].apply(h,e)}});var _=["groupBy","countBy","sortBy"];h.each(_,function(t){v.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var w=a.View=function(t){this.cid=h.uniqueId("view");t||(t={});h.extend(this,h.pick(t,x));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},b=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(w.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();
return this},setElement:function(t,e){this.$el&&this.undelegateEvents();this.$el=t instanceof a.$?t:a.$(t);this.el=this.$el[0];e!==!1&&this.delegateEvents();return this},delegateEvents:function(t){if(!t&&!(t=h.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];h.isFunction(i)||(i=this[t[e]]);if(i){var r=e.match(b),s=r[1],n=r[2];i=h.bind(i,this);s+=".delegateEvents"+this.cid;""===n?this.$el.on(s,i):this.$el.on(s,n,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var t=h.extend({},h.result(this,"attributes"));this.id&&(t.id=h.result(this,"id"));this.className&&(t["class"]=h.result(this,"className"));var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}});a.sync=function(t,e,i){var r=T[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};i.url||(s.url=h.result(e,"url")||U());if(null==i.data&&e&&("create"===t||"update"===t||"patch"===t)){s.contentType="application/json";s.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST";i.emulateJSON&&(s.data._method=r);var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);return n?n.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1);"PATCH"===s.type&&E&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=i.xhr=a.ajax(h.extend(s,i));e.trigger("request",e,o,i);return o};var E=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var k=a.Router=function(t){t||(t={});t.routes&&(this.routes=t.routes);this._bindRoutes();this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(k.prototype,o,{initialize:function(){},route:function(t,e,i){h.isRegExp(t)||(t=this._routeToRegExp(t));if(h.isFunction(e)){i=e;e=""}i||(i=this[e]);var r=this;a.history.route(t,function(s){var n=r._extractParameters(t,s);i&&i.apply(r,n);r.trigger.apply(r,["route:"+e].concat(n));r.trigger("route",e,n);a.history.trigger("route",r,e,n)});return this},navigate:function(t,e){a.history.navigate(t,e);return this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var t,e=h.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(A,"\\$&").replace(S,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if("undefined"!=typeof window){this.location=window.location;this.history=window.history}},N=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/msie [\w.]+/,C=/\/$/,j=/[?#].*$/;I.started=!1;h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0;this.options=h.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==!1;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,r=P.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(O,"/");if(r&&this._wantsHashChange){this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=e;var s=this.location,n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!n){this.fragment=this.getFragment(null,!0);this.location.replace(this.root+this.location.search+"#"+this.fragment);return!0}if(this._hasPushState&&n&&s.hash){this.fragment=this.getHash().replace(N,"");this.history.replaceState({},document.title,this.root+this.fragment+s.search)}}return this.options.silent?void 0:this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment)return!1;this.iframe&&this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return h.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return!0}})},navigate:function(t,e){if(!I.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment!==t){this.fragment=t;""===t&&"/"!==i&&(i=i.slice(0,-1));if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){e.replace||this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}});a.history=new I;var R=function(t,e){var r,i=this;r=t&&h.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)};h.extend(r,i,e);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;t&&h.extend(r.prototype,t);r.__super__=i.prototype;return r};d.extend=v.extend=k.extend=w.extend=I.extend=R;var U=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var i=e.error;e.error=function(r){i&&i(t,r,e);t.trigger("error",t,r,e)}}}).call(this);return root.Backbone=Backbone}.apply(root,arguments)})}(this);define("app/js/models/ProgressBarDemo/ProgressBarModel",["Backbone","underscore"],function(Backbone,_){var valsArr=[70,30,45],namesArr=["ProgressBar1","ProgressBar2","ProgressBar3"],defaultsObj={};_.each(namesArr,function(val,index,arr){defaultsObj[val]={name:val,width:valsArr[index],progressBarValue:valsArr[index]}});return Backbone.Model.extend({defaults:{progressBars:defaultsObj,selectedProgressBar:namesArr[1]},initialize:function(){this.initData=JSON.stringify(this.defaults)},getDefaultData:function(){return JSON.parse(this.initData)}})});!function(){"use strict";function addPart(locale,master,needed,toLoad,prefix,suffix){if(master[locale]){needed.push(locale);(master[locale]===!0||1===master[locale])&&toLoad.push(prefix+locale+"/"+suffix)}}function addIfExists(req,locale,toLoad,prefix,suffix){var fullName=prefix+locale+"/"+suffix;require._fileExists(req.toUrl(fullName+".js"))&&toLoad.push(fullName)}function mixin(target,source,force){var prop;for(prop in source)if(!source.hasOwnProperty(prop)||target.hasOwnProperty(prop)&&!force){if("object"==typeof source[prop]){!target[prop]&&source[prop]&&(target[prop]={});mixin(target[prop],source[prop],force)}}else target[prop]=source[prop]}var nlsRegExp=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("l18n",["module"],function(module){var masterConfig=module.config?module.config():{};return{version:"2.0.4",load:function(name,req,onLoad,config){config=config||{};config.locale&&(masterConfig.locale=config.locale);var masterName,i,part,match=nlsRegExp.exec(name),prefix=match[1],locale=match[4],suffix=match[5],parts=locale.split("-"),toLoad=[],value={},current="";if(match[5]){prefix=match[1];masterName=prefix+suffix}else{masterName=name;suffix=match[4];locale=masterConfig.locale;locale||(locale=masterConfig.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase());parts=locale.split("-")}if(config.isBuild){toLoad.push(masterName);addIfExists(req,"root",toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addIfExists(req,current,toLoad,prefix,suffix)}req(toLoad,function(){onLoad()})}else req([masterName],function(master){var part,needed=[];addPart("root",master,needed,toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addPart(current,master,needed,toLoad,prefix,suffix)}req(toLoad,function(){var i,partBundle,part;for(i=needed.length-1;i>-1&&needed[i];i--){part=needed[i];partBundle=master[part];(partBundle===!0||1===partBundle)&&(partBundle=req(prefix+part+"/"+suffix));mixin(value,partBundle)}onLoad(value)})})}}})}();define("app/js/views/ProgressBarDemo/nls/ProgressBarLabels",{root:{progressBarActions:["-25","-10","+10","+25"],buttonEventName:"onChangeProgress",colors:{validState:"lightblue",invalidState:"red"}}});define("ractive-build",{});define("amd-loader",{});define("tosource",{});define("rv",{load:function(id){throw new Error("Dynamic load not allowed: "+id)}});define("rv!templates/button/button",[],function(){return{v:3,t:[{t:7,e:"button",a:{"class":"btn",type:"button"},v:{click:{n:[{t:2,r:"EventHandler"}],d:[{t:2,r:"EventHandlerParams"}]}},f:[{t:2,r:"buttonName"}]}]}});define("app/js/templates/button/ButtonView",["ractive","rv!templates/button/button"],function(Ractive,ButtonTemplate){return Ractive.extend({template:ButtonTemplate})});define("rv!templates/select/select",[],function(){return{v:3,t:[{t:7,e:"select",a:{"class":"SelectProgressBar",value:[{t:2,r:"DefaultSelected"}]},f:[{t:4,f:[{t:7,e:"option",a:{value:[{t:2,r:"name"}]},f:[{t:2,r:"name"}]}],n:52,r:"OptionsList"}]}]}});define("app/js/templates/select/SelectView",["ractive","rv!templates/select/select"],function(Ractive,SelectTemplate){return Ractive.extend({template:SelectTemplate})});define("rv!templates/progressbar/progressbar",[],function(){return{v:3,t:[{t:7,e:"div",a:{"class":"divPosition"},f:[{t:7,e:"div",a:{"class":"divPosition divProgressBar",style:["width:",{t:2,r:"width"},"%;background-color:",{t:2,r:"color"},";"]}}," ",{t:7,e:"div",a:{"class":"divPosition divProgressState"},f:[{t:2,r:"value"},"%"]}]}]}});define("app/js/templates/progressbar/ProgressBarView",["ractive","rv!templates/progressbar/progressbar"],function(Ractive,ProgressBarTemplate){return Ractive.extend({template:ProgressBarTemplate})});define("rv!app/js/views/ProgressBarDemo/templates/ProgressBarsDemo",[],function(){return{v:3,t:[{t:7,e:"div",a:{"class":"ProgressBarDisplayContainer"},f:[{t:4,f:[{t:7,e:"ProgressBarComponent",a:{range:[{t:2,r:"width"}],color:[{t:2,x:{r:["progressBarValue","colors.invalidState","colors.validState"],s:"_0>100?_1:_2"}}],value:[{t:2,r:"progressBarValue"}]}}],n:52,r:"progressBars"}]}," ",{t:7,e:"div",a:{"class":"ProgressBarActions"},f:[{t:7,e:"SelectComponent",a:{OptionsList:[{t:2,r:"progressBars"}],DefaultSelected:[{t:2,r:"selectedProgressBar"}]}}," ",{t:4,f:[{t:7,e:"ButtonComponent",a:{EventHandler:[{t:2,r:"buttonEventName"}],EventHandlerParams:[{t:2,r:"."}],buttonName:[{t:2,r:"."}]}}],n:52,r:"progressBarActions"}," ",{t:7,e:"button",a:{"class":"btn",type:"button",id:"resetBtn"},f:["Reset"]}]}]}});define("app/js/views/ProgressBarDemo/ProgressBarsDemoView",["ractive","l18n!app/js/views/ProgressBarDemo/nls/ProgressBarLabels","app/js/templates/button/ButtonView","app/js/templates/select/SelectView","app/js/templates/progressbar/ProgressBarView","rv!app/js/views/ProgressBarDemo/templates/ProgressBarsDemo"],function(Ractive,l18n,ButtonView,SelectView,ProgressBarView,ProgressBarsDemo){return Backbone.View.extend({el:"#testForm",model:null,ractive:null,l18n:l18n,initialize:function(args){this.model=args.model;this.undelegateEvents();this.events={"click button#resetBtn":this.reset};this.on("EVT_TEST_ACTION",this.triggerAction);this.delegateEvents();this.render(this.getDefaultViewData(),this)},triggerAction:function(elementName,data){console.log("-------UPDATE triggerred from [RACTIVE] view TO [BACKBONE] view ::: "+elementName+" = "+data+"---------")},reset:function(){this.model.defaults=this.model.getDefaultData();this.model.set(this.model.defaults);this.ractive.resetView(this.getDefaultViewData())},getDefaultViewData:function(){return _.extend(this.model.toJSON(),this.l18n)},render:function(defaultAttr,backboneObj){this.ractive=new Ractive({el:".ProgressBarDisplay",template:ProgressBarsDemo,components:{ProgressBarComponent:ProgressBarView,ButtonComponent:ButtonView,SelectComponent:SelectView},progressAnimDuration:270,progressAnimStyle:"easeInOut",data:defaultAttr,oninit:function(){var eventHandlerName=this.get("buttonEventName"),eventName="ButtonComponent."+eventHandlerName;this[eventHandlerName]=this.onChangeProgress;this.on(eventName,this[eventHandlerName])},resetView:function(modelAttr){this.set(modelAttr)},onChangeProgress:function(event,changeByValue){changeByValue=parseInt(changeByValue,10);var currentProgressBar=this.get("selectedProgressBar"),currentValue=parseInt(this.get("progressBars")[currentProgressBar].progressBarValue,10),updateObj=this.getProgressBarNewState(changeByValue,currentValue),changeW=this.animate("progressBars."+currentProgressBar+".width",updateObj.newValue,{duration:this.progressAnimDuration,easing:this.progressAnimStyle}),changeP=this.animate("progressBars."+currentProgressBar+".progressBarValue",updateObj.newState,{duration:0,easing:this.progressAnimStyle});changeW.then(function(){console.log("---width--")});changeP.then(function(){console.log("---progress--")});backboneObj.trigger("EVT_TEST_ACTION",currentProgressBar,updateObj.newState)},getProgressBarNewState:function(changeByValue,currentValue){var newValue=0,newState=0,calcValue=parseInt(currentValue+changeByValue,10),isExceeded=!1;if(calcValue>100){newValue=100;newState=calcValue;isExceeded=!0}else if(0>=calcValue){newValue=0;newState=0}else{newValue=calcValue;newState=calcValue}return{newValue:newValue,newState:newState,isExceeded:isExceeded}}})}})});define(["ractive","app/js/models/ProgressBarDemo/ProgressBarModel","app/js/views/ProgressBarDemo/ProgressBarsDemoView"],function(Ractive,ProgressBarModel,ProgressBarsDemoView){return Backbone.View.extend({className:"TestProgressBarContainer",model:null,view:null,initialize:function(){this.model=new ProgressBarModel;this.view=new ProgressBarsDemoView({model:this.model})}})})}();
//# sourceMappingURL=ProgressBarController.build.js.map
//# sourceMappingURL=ProgressBarController.js.map
